/*! For license information please see generated_app.js.LICENSE.txt */
(()=>{var e={984:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var i,o,a=n(852),s=n(886),u=n(594),c=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),l=new a.LL("app","Firebase",c),f="@firebase/app",h="[DEFAULT]",d=((o={})[f]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/app-check"]="fire-app-check",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),p=new u.Yd("@firebase/app"),m=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(e),this.container=new s.H0(t.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=h),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=h),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var y=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=h);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.r3)(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.wA(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw l.create("invalid-log-argument");(0,u.Am)(e,t)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||h,!(0,a.r3)(t,e))throw l.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var c=0,f=Object.keys(t);c<f.length;c++){var h=f[c];t[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(m);return t.INTERNAL=r(r({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,a.ZB)(t,e)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),t}(),g=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if((0,a.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,e)};var w=y;!function(e,t){e.INTERNAL.registerComponent(new s.wA("platform-logger",(function(e){return new g(e)}),"PRIVATE")),e.registerVersion(f,"0.6.30",void 0),e.registerVersion("fire-js","")}(w);const _=w},886:(e,t,n)=>{"use strict";function r(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function o(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}n.d(t,{wA:()=>s,H0:()=>l}),Object.create,Object.create;var a=n(852),s=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),u="[DEFAULT]",c=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new a.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:u})}catch(e){}try{for(var o=r(this.instancesDeferred.entries()),a=o.next();!a.done;a=o.next()){var s=i(a.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService({instanceIdentifier:f});l.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=u),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return e=this,t=void 0,r=function(){var e;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(o(o([],i(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),i(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=u),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=u),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var o=e.options,a=void 0===o?{}:o,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:a});try{for(var c=r(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var f=i(l.value,2),h=f[0],d=f[1];s===this.normalizeInstanceIdentifier(h)&&d.resolve(u)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return u},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,o=this.onInitCallbacks.get(t);if(o)try{for(var a=r(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===u?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(e){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=u),this.component?this.component.multipleInstances?e:u:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new c(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},594:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(t,{in:()=>o,Yd:()=>f,Ub:()=>h,Am:()=>d});var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=c[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},f=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function h(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},852:(e,t,n)=>{"use strict";n.d(t,{BH:()=>l,LL:()=>S,ZR:()=>E,r3:()=>C,Sg:()=>f,ne:()=>T,p$:()=>u,ZB:()=>c,m9:()=>P,z$:()=>h,jU:()=>m,ru:()=>y,d:()=>v,w1:()=>b,uI:()=>d,UG:()=>p,b$:()=>g,G6:()=>_,Mn:()=>w});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var o=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,f=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){return function(e){var t=o(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function u(e){return c(void 0,e)}function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}var l=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function f(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=i({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function p(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function m(){return"object"==typeof self&&self.self===self}function y(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){return h().indexOf("Electron/")>=0}function b(){var e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return h().indexOf("MSAppHost/")>=0}function _(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var E=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),S=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?I(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new E(i,s,r);return u},e}();function I(e,t){return e.replace(k,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var k=/\{\$([^}]+)}/g;function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e,t){var n=new A(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+f+a+n[r]&4294967295,f=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var A=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function x(){}function P(e){return e&&e._delegate?e._delegate:e}},503:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.Z});var r=n(984),i="8.10.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},140:(e,t,n)=>{"use strict";n.r(t);var r=n(984),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;var c=n(852),l=n(594),f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var d,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},m=m||{},y=p||self;function g(){}function v(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function b(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var w="closure_uid_"+(1e9*Math.random()>>>0),_=0;function E(e,t,n){return e.call.apply(e.bind,arguments)}function S(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function I(e,t,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:S).apply(null,arguments)}function k(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function C(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function T(){this.s=this.s,this.o=this.o}var A={};T.prototype.s=!1,T.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,w)&&e[w]||(e[w]=++_)}(this);delete A[e]}},T.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var x=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},P=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function R(e){return Array.prototype.concat.apply([],arguments)}function N(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function O(e){return/^[\s\xa0]*$/.test(e)}var D,M=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function L(e,t){return-1!=e.indexOf(t)}function B(e,t){return e<t?-1:e>t?1:0}e:{var U=y.navigator;if(U){var F=U.userAgent;if(F){D=F;break e}}D=""}function V(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function j(e){var t={};for(var n in e)t[n]=e[n];return t}var q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<q.length;o++)n=q[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function H(e){return H[" "](e),e}H[" "]=g;var X,K,W=L(D,"Opera"),$=L(D,"Trident")||L(D,"MSIE"),G=L(D,"Edge"),Q=G||$,Y=L(D,"Gecko")&&!(L(D.toLowerCase(),"webkit")&&!L(D,"Edge"))&&!(L(D,"Trident")||L(D,"MSIE"))&&!L(D,"Edge"),Z=L(D.toLowerCase(),"webkit")&&!L(D,"Edge");function J(){var e=y.document;return e?e.documentMode:void 0}e:{var ee="",te=(K=D,Y?/rv:([^\);]+)(\)|;)/.exec(K):G?/Edge\/([\d\.]+)/.exec(K):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(K):Z?/WebKit\/(\S+)/.exec(K):W?/(?:Version)[ \/]?(\S+)/.exec(K):void 0);if(te&&(ee=te?te[1]:""),$){var ne=J();if(null!=ne&&ne>parseFloat(ee)){X=String(ne);break e}}X=ee}var re,ie={};function oe(){return e=ie,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=M(String(X)).split("."),n=M("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=B(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||B(0==o[2].length,0==a[2].length)||B(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}();var e}y.document&&$?re=J()||parseInt(X,10)||void 0:re=void 0;var ae=re,se=function(){if(!y.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{y.addEventListener("test",g,t),y.removeEventListener("test",g,t)}catch(e){}return e}();function ue(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ce(e,t){if(ue.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Y){e:{try{H(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:le[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ce.Z.h.call(this)}}ue.prototype.h=function(){this.defaultPrevented=!0},C(ce,ue);var le={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),he=0;function de(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++he,this.ca=this.fa=!1}function pe(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function me(e){this.src=e,this.g={},this.h=0}function ye(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=x(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(pe(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ge(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}me.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=ge(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new de(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var ve="closure_lm_"+(1e6*Math.random()|0),be={};function we(e,t,n,r,i){if(r&&r.once)return Ee(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)we(e,t[o],n,r,i);return null}return n=xe(n),e&&e[fe]?e.N(t,n,b(r)?!!r.capture:!!r,i):_e(e,t,n,!1,r,i)}function _e(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=b(i)?!!i.capture:!!i,s=Te(e);if(s||(e[ve]=s=new me(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Ce;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)se||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ke(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ee(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Ee(e,t[o],n,r,i);return null}return n=xe(n),e&&e[fe]?e.O(t,n,b(r)?!!r.capture:!!r,i):_e(e,t,n,!0,r,i)}function Se(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Se(e,t[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=xe(n),e&&e[fe]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ge(o=e.g[t],n,r,i))&&(pe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--))):e&&(e=Te(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ge(t,n,r,i)),(n=-1<e?t[e]:null)&&Ie(n))}function Ie(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[fe])ye(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ke(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Te(t))?(ye(n,e),0==n.h&&(n.src=null,t[ve]=null)):pe(e)}}}function ke(e){return e in be?be[e]:be[e]="on"+e}function Ce(e,t){if(e.ca)e=!0;else{t=new ce(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ie(e),e=n.call(r,t)}return e}function Te(e){return(e=e[ve])instanceof me?e:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(e){return"function"==typeof e?e:(e[Ae]||(e[Ae]=function(t){return e.handleEvent(t)}),e[Ae])}function Pe(){T.call(this),this.i=new me(this),this.P=this,this.I=null}function Re(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ue(t,e);else if(t instanceof ue)t.target=t.target||e;else{var i=t;z(t=new ue(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Ne(a,r,!0,t)&&i}if(i=Ne(a=t.g=e,r,!0,t)&&i,i=Ne(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Ne(a=t.g=n[o],r,!1,t)&&i}function Ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&ye(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}C(Pe,T),Pe.prototype[fe]=!0,Pe.prototype.removeEventListener=function(e,t,n,r){Se(this,e,t,n,r)},Pe.prototype.M=function(){if(Pe.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pe(n[r]);delete t.g[e],t.h--}}this.I=null},Pe.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Pe.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Oe=y.JSON.stringify;function De(){var e=qe,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Me,Le=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Be.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Be=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Ue}),(function(e){return e.reset()})),Ue=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Fe(e){y.setTimeout((function(){throw e}),0)}function Ve(e,t){Me||function(){var e=y.Promise.resolve(void 0);Me=function(){e.then(ze)}}(),je||(Me(),je=!0),qe.add(e,t)}var je=!1,qe=new Le;function ze(){for(var e;e=De();){try{e.h.call(e.g)}catch(e){Fe(e)}var t=Be;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}je=!1}function He(e,t){Pe.call(this),this.h=e||1,this.g=t||y,this.j=I(this.kb,this),this.l=Date.now()}function Xe(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ke(e,t,n){if("function"==typeof e)n&&(e=I(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=I(e.handleEvent,e)}return 2147483647<Number(t)?-1:y.setTimeout(e,t||0)}function We(e){e.g=Ke((function(){e.g=null,e.i&&(e.i=!1,We(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}C(He,Pe),(d=He.prototype).da=!1,d.S=null,d.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Re(this,"tick"),this.da&&(Xe(this),this.start()))}},d.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},d.M=function(){He.Z.M.call(this),Xe(this),delete this.g};var $e=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:We(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(T);function Ge(e){T.call(this),this.h=e,this.g={}}C(Ge,T);var Qe=[];function Ye(e,t,n,r){Array.isArray(n)||(n&&(Qe[0]=n.toString()),n=Qe);for(var i=0;i<n.length;i++){var o=we(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Ze(e){V(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ie(e)}),e),e.g={}}function Je(){this.g=!0}function et(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Oe(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ge.prototype.M=function(){Ge.Z.M.call(this),Ze(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Je.prototype.Aa=function(){this.g=!1},Je.prototype.info=function(){};var tt={},nt=null;function rt(){return nt=nt||new Pe}function it(e){ue.call(this,tt.Ma,e)}function ot(e){var t=rt();Re(t,new it(t,e))}function at(e,t){ue.call(this,tt.STAT_EVENT,e),this.stat=t}function st(e){var t=rt();Re(t,new at(t,e))}function ut(e,t){ue.call(this,tt.Na,e),this.size=t}function ct(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return y.setTimeout((function(){e()}),t)}tt.Ma="serverreachability",C(it,ue),tt.STAT_EVENT="statevent",C(at,ue),tt.Na="timingevent",C(ut,ue);var lt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ft={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ht(){}function dt(e){return e.h||(e.h=e.i())}function pt(){}ht.prototype.h=null;var mt,yt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function gt(){ue.call(this,"d")}function vt(){ue.call(this,"c")}function bt(){}function wt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ge(this),this.P=Et,e=Q?125:void 0,this.W=new He(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}C(gt,ue),C(vt,ue),C(bt,ht),bt.prototype.g=function(){return new XMLHttpRequest},bt.prototype.i=function(){return{}},mt=new bt;var Et=45e3,St={},It={};function kt(e,t,n){e.K=1,e.v=$t(qt(t)),e.s=n,e.U=!0,Ct(e,null)}function Ct(e,t){e.F=Date.now(),Pt(e),e.A=qt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),un(n.h,"t",r),e.C=0,n=e.l.H,e.h=new _t,e.g=cr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new $e(I(e.Ia,e,e.g),e.O)),Ye(e.V,e.g,"readystatechange",e.gb),t=e.H?j(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ot(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");a=2<=f.length&&"type"==f[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Tt(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function At(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=xt(e,n))==It){4==t&&(e.o=4,st(14),i=!1),et(e.j,e.m,null,"[Incomplete Response]");break}if(r==St){e.o=4,st(15),et(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}et(e.j,e.m,r,null),Mt(e,r)}Tt(e)&&r!=It&&r!=St&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,st(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),tr(t),t.L=!0,st(11))):(et(e.j,e.m,n,"[Invalid Chunked Response]"),Dt(e),Ot(e))}function xt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?It:(n=Number(t.substring(n,r)),isNaN(n)?St:(r+=1)+n>t.length?It:(t=t.substr(r,n),e.C=r+n,t))}function Pt(e){e.Y=Date.now()+e.P,Rt(e,e.P)}function Rt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ct(I(e.eb,e),t)}function Nt(e){e.B&&(y.clearTimeout(e.B),e.B=null)}function Ot(e){0==e.l.G||e.I||ir(e.l,e)}function Dt(e){Nt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Xe(e.W),Ze(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Mt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||mn(n.i,e)))if(n.I=e.N,!e.J&&mn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rr(n),Kn(n)}er(n),st(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ct(I(n.ab,n),6e3));if(1>=pn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ar(n,11)}else if((e.J||n.g==e)&&rr(n),!O(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(L(l,"spdy")||L(l,"quic")||L(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(yn(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Wt(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ur(r,r.H?r.la:null,r.W),d.J){gn(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(Nt(p),Pt(p)),r.g=d}else Jn(r);0<n.l.length&&Gn(n)}else"stop"!=o[0]&&"close"!=o[0]||ar(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ar(n,7):Xn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ot(4)}catch(o){}}function Lt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(v(e)||"string"==typeof e)P(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(v(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(v(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Bt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Bt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ut(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ft(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ft(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(d=wt.prototype).setTimeout=function(e){this.P=e},d.gb=function(e){e=e.target;var t=this.L;t&&3==Vn(e)?t.l():this.Ia(e)},d.Ia=function(e){try{if(e==this.g)e:{var t=Vn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Q||this.g&&(this.h.h||this.g.ga()||jn(this.g)))){this.I||4!=t||7==n||ot(8==n||0>=r?3:2),Nt(this);var i=this.g.ba();this.N=i;t:if(Tt(this)){var o=jn(this.g);e="";var a=o.length,s=4==Vn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dt(this),Ot(this);var u="";break t}this.h.i=new y.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,st(12),Dt(this),Ot(this);break e}et(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mt(this,i)}this.U?(At(this,t,u),Q&&this.i&&3==t&&(Ye(this.V,this.W,"tick",this.fb),this.W.start())):(et(this.j,this.m,u,null),Mt(this,u)),4==t&&Dt(this),this.i&&!this.I&&(4==t?ir(this.l,this):(this.i=!1,Pt(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,st(12)):(this.o=0,st(13)),Dt(this),Ot(this)}}}catch(t){}},d.fb=function(){if(this.g){var e=Vn(this.g),t=this.g.ga();this.C<t.length&&(Nt(this),At(this,e,t),this.i&&4!=e&&Pt(this))}},d.cancel=function(){this.I=!0,Dt(this)},d.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ot(3),st(17)),Dt(this),this.o=2,Ot(this)):Rt(this,this.Y-e)},(d=Bt.prototype).R=function(){Ut(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},d.T=function(){return Ut(this),this.g.concat()},d.get=function(e,t){return Ft(this.h,e)?this.h[e]:t},d.set=function(e,t){Ft(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},d.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Vt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof jt){this.g=void 0!==t?t:e.g,zt(this,e.j),this.s=e.s,Ht(this,e.i),Xt(this,e.m),this.l=e.l,t=e.h;var n=new rn;n.i=t.i,t.g&&(n.g=new Bt(t.g),n.h=t.h),Kt(this,n),this.o=e.o}else e&&(n=String(e).match(Vt))?(this.g=!!t,zt(this,n[1]||"",!0),this.s=Gt(n[2]||""),Ht(this,n[3]||"",!0),Xt(this,n[4]),this.l=Gt(n[5]||"",!0),Kt(this,n[6]||"",!0),this.o=Gt(n[7]||"")):(this.g=!!t,this.h=new rn(null,this.g))}function qt(e){return new jt(e)}function zt(e,t,n){e.j=n?Gt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ht(e,t,n){e.i=n?Gt(t,!0):t}function Xt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Kt(e,t,n){t instanceof rn?(e.h=t,function(e,t){t&&!e.j&&(on(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(an(this,t),un(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Qt(t,tn)),e.h=new rn(t,e.g))}function Wt(e,t,n){e.h.set(t,n)}function $t(e){return Wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Gt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Qt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Yt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}jt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Qt(t,Zt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Qt(t,Zt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Qt(n,"/"==n.charAt(0)?en:Jt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Qt(n,nn)),e.join("")};var Zt=/[#\/\?@]/g,Jt=/[#\?:]/g,en=/[#\?]/g,tn=/[#\?@]/g,nn=/#/g;function rn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function on(e){e.g||(e.g=new Bt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function an(e,t){on(e),t=cn(e,t),Ft(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ft((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ut(e)))}function sn(e,t){return on(e),t=cn(e,t),Ft(e.g.h,t)}function un(e,t,n){an(e,t),0<n.length&&(e.i=null,e.g.set(cn(e,t),N(n)),e.h+=n.length)}function cn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(d=rn.prototype).add=function(e,t){on(this),this.i=null,e=cn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},d.forEach=function(e,t){on(this),this.g.forEach((function(n,r){P(n,(function(n){e.call(t,n,r,this)}),this)}),this)},d.T=function(){on(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},d.R=function(e){on(this);var t=[];if("string"==typeof e)sn(this,e)&&(t=R(t,this.g.get(cn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=R(t,e[n])}return t},d.set=function(e,t){return on(this),this.i=null,sn(this,e=cn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},d.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},d.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var ln=function(e,t){this.h=e,this.g=t};function fn(e){this.l=e||hn,e=y.PerformanceNavigationTiming?0<(e=y.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(y.g&&y.g.Ea&&y.g.Ea()&&y.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hn=10;function dn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function pn(e){return e.h?1:e.g?e.g.size:0}function mn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function yn(e,t){e.g?e.g.add(t):e.h=t}function gn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function vn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=h(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return N(e.i)}function bn(){}function wn(){this.g=new bn}function _n(e,t,n){var r=n||"";try{Lt(e,(function(e,n){var i=e;b(e)&&(i=Oe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function En(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Sn(e){this.l=e.$b||null,this.j=e.ib||!1}function In(e,t){Pe.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=kn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fn.prototype.cancel=function(){var e,t;if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=h(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},bn.prototype.stringify=function(e){return y.JSON.stringify(e,void 0)},bn.prototype.parse=function(e){return y.JSON.parse(e,void 0)},C(Sn,ht),Sn.prototype.g=function(){return new In(this.l,this.j)},Sn.prototype.i=function(e){return function(){return e}}({}),C(In,Pe);var kn=0;function Cn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Tn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,An(e)}function An(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(d=In.prototype).open=function(e,t){if(this.readyState!=kn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,An(this)},d.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||y).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},d.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tn(this)),this.readyState=kn},d.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==y.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},d.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tn(this):An(this),3==this.readyState&&Cn(this)}},d.Ua=function(e){this.g&&(this.response=this.responseText=e,Tn(this))},d.Ta=function(e){this.g&&(this.response=e,Tn(this))},d.ha=function(){this.g&&Tn(this)},d.setRequestHeader=function(e,t){this.v.append(e,t)},d.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},d.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(In.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xn=y.JSON.parse;function Pn(e){Pe.call(this),this.headers=new Bt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rn,this.K=this.L=!1}C(Pn,Pe);var Rn="",Nn=/^https?$/i,On=["POST","PUT"];function Dn(e){return"content-type"==e.toLowerCase()}function Mn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ln(e),Un(e)}function Ln(e){e.D||(e.D=!0,Re(e,"complete"),Re(e,"error"))}function Bn(e){if(e.h&&void 0!==m&&(!e.C[1]||4!=Vn(e)||2!=e.ba()))if(e.v&&4==Vn(e))Ke(e.Fa,0,e);else if(Re(e,"readystatechange"),4==Vn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(Vt)[1]||null;if(!o&&y.self&&y.self.location){var a=y.self.location.protocol;o=a.substr(0,a.length-1)}i=!Nn.test(o?o.toLowerCase():"")}t=i}if(t)Re(e,"complete"),Re(e,"success");else{e.m=6;try{var s=2<Vn(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",Ln(e)}}finally{Un(e)}}}function Un(e,t){if(e.g){Fn(e);var n=e.g,r=e.C[0]?g:null;e.g=null,e.C=null,t||Re(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Fn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(y.clearTimeout(e.A),e.A=null)}function Vn(e){return e.g?e.g.readyState:0}function jn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Rn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function qn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return V(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Wt(e,t,n))}function zn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hn(e){this.za=0,this.l=[],this.h=new Je,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=zn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=zn("baseRetryDelayMs",5e3,e),this.$a=zn("retryDelaySeedMs",1e4,e),this.Ya=zn("forwardChannelMaxRetries",2,e),this.ra=zn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new fn(e&&e.concurrentRequestLimit),this.Ca=new wn,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Xn(e){if(Wn(e),3==e.G){var t=e.V++,n=qt(e.F);Wt(n,"SID",e.J),Wt(n,"RID",t),Wt(n,"TYPE","terminate"),Yn(e,n),(t=new wt(e,e.h,t,void 0)).K=2,t.v=$t(qt(n)),n=!1,y.navigator&&y.navigator.sendBeacon&&(n=y.navigator.sendBeacon(t.v.toString(),"")),!n&&y.Image&&((new Image).src=t.v,n=!0),n||(t.g=cr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Pt(t)}sr(e)}function Kn(e){e.g&&(tr(e),e.g.cancel(),e.g=null)}function Wn(e){Kn(e),e.u&&(y.clearTimeout(e.u),e.u=null),rr(e),e.i.cancel(),e.m&&("number"==typeof e.m&&y.clearTimeout(e.m),e.m=null)}function $n(e,t){e.l.push(new ln(e.Za++,t)),3==e.G&&Gn(e)}function Gn(e){dn(e.i)||e.m||(e.m=!0,Ve(e.Ha,e),e.C=0)}function Qn(e,t){var n;n=t?t.m:e.V++;var r=qt(e.F);Wt(r,"SID",e.J),Wt(r,"RID",n),Wt(r,"AID",e.U),Yn(e,r),e.o&&e.s&&qn(r,e.o,e.s),n=new wt(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Zn(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),yn(e.i,n),kt(n,r,t)}function Yn(e,t){e.j&&Lt({},(function(e,n){Wt(t,n,e)}))}function Zn(e,t,n){n=Math.min(e.l.length,n);var r=e.j?I(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{_n(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Jn(e){e.g||e.u||(e.Y=1,Ve(e.Ga,e),e.A=0)}function er(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=ct(I(e.Ga,e),or(e,e.A)),e.A++,0))}function tr(e){null!=e.B&&(y.clearTimeout(e.B),e.B=null)}function nr(e){e.g=new wt(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=qt(e.oa);Wt(t,"RID","rpc"),Wt(t,"SID",e.J),Wt(t,"CI",e.N?"0":"1"),Wt(t,"AID",e.U),Yn(e,t),Wt(t,"TYPE","xmlhttp"),e.o&&e.s&&qn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=$t(qt(t)),n.s=null,n.U=!0,Ct(n,e)}function rr(e){null!=e.v&&(y.clearTimeout(e.v),e.v=null)}function ir(e,t){var n=null;if(e.g==t){rr(e),tr(e),e.g=null;var r=2}else{if(!mn(e.i,t))return;n=t.D,gn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Re(r=rt(),new ut(r,n,t,i)),Gn(e)}else Jn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(pn(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=ct(I(e.Ha,e,t),or(e,e.C)),e.C++,0)))}(e,t)||2==r&&er(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ar(e,5);break;case 4:ar(e,10);break;case 3:ar(e,6);break;default:ar(e,2)}}function or(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ar(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=I(e.jb,e);n||(n=new jt("//www.google.com/images/cleardot.gif"),y.location&&"http"==y.location.protocol||zt(n,"https"),$t(n)),function(e,t){var n=new Je;if(y.Image){var r=new Image;r.onload=k(En,n,r,"TestLoadImage: loaded",!0,t),r.onerror=k(En,n,r,"TestLoadImage: error",!1,t),r.onabort=k(En,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=k(En,n,r,"TestLoadImage: timeout",!1,t),y.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else st(2);e.G=0,e.j&&e.j.va(t),sr(e),Wn(e)}function sr(e){e.G=0,e.I=-1,e.j&&(0==vn(e.i).length&&0==e.l.length||(e.i.i.length=0,N(e.l),e.l.length=0),e.j.ua())}function ur(e,t,n){var r=function(e){return e instanceof jt?qt(e):new jt(e,void 0)}(n);if(""!=r.i)t&&Ht(r,t+"."+r.i),Xt(r,r.m);else{var i=y.location;r=function(e,t,n,r){var i=new jt(null,void 0);return e&&zt(i,e),t&&Ht(i,t),n&&Xt(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&V(e.aa,(function(e,t){Wt(r,t,e)})),t=e.D,n=e.sa,t&&n&&Wt(r,t,n),Wt(r,"VER",e.ma),Yn(e,r),r}function cr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Pn(new Sn({ib:!0})):new Pn(e.qa)).L=e.H,t}function lr(){}function fr(){if($&&!(10<=Number(ae)))throw Error("Environmental error: no available transport.")}function hr(e,t){Pe.call(this),this.g=new Hn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!O(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!O(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new mr(this)}function dr(e){gt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function pr(){vt.call(this),this.status=1}function mr(e){this.g=e}(d=Pn.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mt.g(),this.C=this.u?dt(this.u):dt(mt),this.g.onreadystatechange=I(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Mn(this,e)}e=n||"";var i=new Bt(this.headers);r&&Lt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Dn,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=y.FormData&&e instanceof y.FormData,!(0<=x(On,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fn(this),0<this.B&&((this.K=function(e){return $&&oe()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=I(this.pa,this)):this.A=Ke(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Mn(this,e)}},d.pa=function(){void 0!==m&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Re(this,"timeout"),this.abort(8))},d.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Re(this,"complete"),Re(this,"abort"),Un(this))},d.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Un(this,!0)),Pn.Z.M.call(this)},d.Fa=function(){this.s||(this.F||this.v||this.l?Bn(this):this.cb())},d.cb=function(){Bn(this)},d.ba=function(){try{return 2<Vn(this)?this.g.status:-1}catch(e){return-1}},d.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},d.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xn(t)}},d.Da=function(){return this.m},d.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(d=Hn.prototype).ma=8,d.G=1,d.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},d.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new wt(this,this.h,e,void 0),n=this.s;if(this.P&&(n?z(n=j(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Zn(this,t,r),Wt(i=qt(this.F),"RID",e),Wt(i,"CVER",22),this.D&&Wt(i,"X-HTTP-Session-Id",this.D),Yn(this,i),this.o&&n&&qn(i,this.o,n),yn(this.i,t),this.Ra&&Wt(i,"TYPE","init"),this.ja?(Wt(i,"$req",r),Wt(i,"SID","null"),t.$=!0,kt(t,i,null)):kt(t,i,r),this.G=2}}else 3==this.G&&(e?Qn(this,e):0==this.l.length||dn(this.i)||Qn(this))},d.Ga=function(){if(this.u=null,nr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ct(I(this.bb,this),e)}},d.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,st(10),Kn(this),nr(this))},d.ab=function(){null!=this.v&&(this.v=null,Kn(this),er(this),st(19))},d.jb=function(e){e?(this.h.info("Successfully pinged google.com"),st(2)):(this.h.info("Failed to ping google.com"),st(1))},(d=lr.prototype).xa=function(){},d.wa=function(){},d.va=function(){},d.ua=function(){},d.Oa=function(){},fr.prototype.g=function(e,t){return new hr(e,t)},C(hr,Pe),hr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ve(I(e.hb,e,t))),st(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ur(e,null,e.W),Gn(e)},hr.prototype.close=function(){Xn(this.g)},hr.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,$n(this.g,t)}else this.v?((t={}).__data__=Oe(e),$n(this.g,t)):$n(this.g,e)},hr.prototype.M=function(){this.g.j=null,delete this.j,Xn(this.g),delete this.g,hr.Z.M.call(this)},C(dr,gt),C(pr,vt),C(mr,lr),mr.prototype.xa=function(){Re(this.g,"a")},mr.prototype.wa=function(e){Re(this.g,new dr(e))},mr.prototype.va=function(e){Re(this.g,new pr(e))},mr.prototype.ua=function(){Re(this.g,"b")},fr.prototype.createWebChannel=fr.prototype.g,hr.prototype.send=hr.prototype.u,hr.prototype.open=hr.prototype.m,hr.prototype.close=hr.prototype.close,lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,ft.COMPLETE="complete",pt.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",Pe.prototype.listen=Pe.prototype.N,Pn.prototype.listenOnce=Pn.prototype.O,Pn.prototype.getLastError=Pn.prototype.La,Pn.prototype.getLastErrorCode=Pn.prototype.Da,Pn.prototype.getStatus=Pn.prototype.ba,Pn.prototype.getResponseJson=Pn.prototype.Qa,Pn.prototype.getResponseText=Pn.prototype.ga,Pn.prototype.send=Pn.prototype.ea;var yr=lt,gr=ft,vr=tt,br=10,wr=11,_r=Sn,Er=pt,Sr=Pn,Ir=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();Ir.o=-1;var kr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Cr=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o(t,e),t}(Error),Tr=new l.Yd("@firebase/firestore");function Ar(){return Tr.logLevel}function xr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Tr.logLevel<=l.in.DEBUG){var r=t.map(Nr);Tr.debug.apply(Tr,u(["Firestore (8.10.0): "+e],r))}}function Pr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Tr.logLevel<=l.in.ERROR){var r=t.map(Nr);Tr.error.apply(Tr,u(["Firestore (8.10.0): "+e],r))}}function Rr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Tr.logLevel<=l.in.WARN){var r=t.map(Nr);Tr.warn.apply(Tr,u(["Firestore (8.10.0): "+e],r))}}function Nr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Or(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+e;throw Pr(t),new Error(t)}function Dr(e,t){e||Or()}function Mr(e,t){return e}function Lr(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Br=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Lr(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function Ur(e,t){return e<t?-1:e>t?1:0}function Fr(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Vr(e){return e+"\0"}var jr=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Cr(kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Cr(kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Cr(kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Cr(kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Ur(this.nanoseconds,e.nanoseconds):Ur(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),qr=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new jr(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();function zr(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Hr(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Kr=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&Or(),void 0===n?n=e.length-t:n>e.length-t&&Or(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),Wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Cr(kr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(Kr),$r=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return $r.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Cr(kr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Cr(kr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Cr(kr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Cr(kr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(Kr),Qr=function(){function e(e){this.fields=e,e.sort(Gr.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return Fr(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),Yr=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return Ur(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();Yr.EMPTY_BYTE_STRING=new Yr("");var Zr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(e){if(Dr(!!e),"string"==typeof e){var t=0,n=Zr.exec(e);if(Dr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ei(e.seconds),nanos:ei(e.nanos)}}function ei(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ti(e){return"string"==typeof e?Yr.fromBase64String(e):Yr.fromUint8Array(e)}function ni(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ri(e){var t=e.mapValue.fields.__previous_value__;return ni(t)?ri(t):t}function ii(e){var t=Jr(e.mapValue.fields.__local_write_time__.timestampValue);return new jr(t.seconds,t.nanos)}function oi(e){return null==e}function ai(e){return 0===e&&1/e==-1/0}function si(e){return"number"==typeof e&&Number.isInteger(e)&&!ai(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ui=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(Wr.fromString(t))},e.fromName=function(t){return new e(Wr.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===Wr.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return Wr.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new Wr(t.slice()))},e}();function ci(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ni(e)?4:10:Or()}function li(e,t){var n=ci(e);if(n!==ci(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ii(e).isEqual(ii(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Jr(e.timestampValue),r=Jr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ti(e.bytesValue).isEqual(ti(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ei(e.geoPointValue.latitude)===ei(t.geoPointValue.latitude)&&ei(e.geoPointValue.longitude)===ei(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ei(e.integerValue)===ei(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ei(e.doubleValue),r=ei(t.doubleValue);return n===r?ai(n)===ai(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fr(e.arrayValue.values||[],t.arrayValue.values||[],li);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zr(n)!==zr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!li(n[i],r[i])))return!1;return!0}(e,t);default:return Or()}}function fi(e,t){return void 0!==(e.values||[]).find((function(e){return li(e,t)}))}function hi(e,t){var n=ci(e),r=ci(t);if(n!==r)return Ur(n,r);switch(n){case 0:return 0;case 1:return Ur(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ei(e.integerValue||e.doubleValue),r=ei(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return di(e.timestampValue,t.timestampValue);case 4:return di(ii(e),ii(t));case 5:return Ur(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ti(e),r=ti(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ur(n[i],r[i]);if(0!==o)return o}return Ur(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ur(ei(e.latitude),ei(t.latitude));return 0!==n?n:Ur(ei(e.longitude),ei(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=hi(n[i],r[i]);if(o)return o}return Ur(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Ur(r[a],o[a]);if(0!==s)return s;var u=hi(n[r[a]],i[o[a]]);if(0!==u)return u}return Ur(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Or()}}function di(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ur(e,t);var n=Jr(e),r=Jr(t),i=Ur(n.seconds,r.seconds);return 0!==i?i:Ur(n.nanos,r.nanos)}function pi(e){return mi(e)}function mi(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Jr(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ti(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ui.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=mi(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+mi(e.fields[o])}return t+"}"}(e.mapValue):Or();var t,n}function yi(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function gi(e){return!!e&&"integerValue"in e}function vi(e){return!!e&&"arrayValue"in e}function bi(e){return!!e&&"nullValue"in e}function wi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _i(e){return!!e&&"mapValue"in e}function Ei(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Hr(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ei(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ei(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Si=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!_i(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ei(t)},e.prototype.setAll=function(e){var t=this,n=Gr.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=Ei(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());_i(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return li(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];_i(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){Hr(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(Ei(this.value))},e}();function Ii(e){var t=[];return Hr(e.fields,(function(e,n){var r=new Gr([e]);if(_i(n)){var i=Ii(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new Qr(t)}var ki=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,qr.min(),Si.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Si.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Si.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),Ci=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Ti(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Ci(e,t,n,r,i,o,a)}function Ai(e){var t=Mr(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+pi(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),oi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=ji(t.startAt)),t.endAt&&(n+="|ub:",n+=ji(t.endAt)),t.h=n}return t.h}function xi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!zi(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!li(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xi(e.startAt,t.startAt)&&Xi(e.endAt,t.endAt)}function Pi(e){return ui.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ri=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return o(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new Ni(e,n,r):"array-contains"===n?new Li(e,r):"in"===n?new Bi(e,r):"not-in"===n?new Ui(e,r):"array-contains-any"===n?new Fi(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new Oi(e,n):new Di(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(hi(t,this.value)):null!==t&&ci(this.value)===ci(t)&&this.m(hi(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Or()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),Ni=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=ui.fromName(r.referenceValue),i}return o(t,e),t.prototype.matches=function(e){var t=ui.comparator(e.key,this.key);return this.m(t)},t}(Ri),Oi=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=Mi(0,n),r}return o(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Ri),Di=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=Mi(0,n),r}return o(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Ri);function Mi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ui.fromName(e.referenceValue)}))}var Li=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return o(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return vi(t)&&fi(t.arrayValue,this.value)},t}(Ri),Bi=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return o(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&fi(this.value.arrayValue,t)},t}(Ri),Ui=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return o(t,e),t.prototype.matches=function(e){if(fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!fi(this.value.arrayValue,t)},t}(Ri),Fi=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return o(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!vi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return fi(t.value.arrayValue,e)}))},t}(Ri),Vi=function(e,t){this.position=e,this.before=t};function ji(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return pi(e)})).join(",")}var qi=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function zi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Hi(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?ui.comparator(ui.fromName(a.referenceValue),n.key):hi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Xi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!li(e.position[n],t.position[n]))return!1;return!0}var Ki=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Wi(e,t,n,r,i,o,a,s){return new Ki(e,t,n,r,i,o,a,s)}function $i(e){return new Ki(e)}function Gi(e){return!oi(e.limit)&&"F"===e.limitType}function Qi(e){return!oi(e.limit)&&"L"===e.limitType}function Yi(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Zi(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Ji(e){return null!==e.collectionGroup}function eo(e){var t=Mr(e);if(null===t.p){t.p=[];var n=Zi(t),r=Yi(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new qi(n)),t.p.push(new qi(Gr.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new qi(Gr.keyField(),u))}}}return t.p}function to(e){var t=Mr(e);if(!t.T)if("F"===t.limitType)t.T=Ti(t.path,t.collectionGroup,eo(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=eo(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new qi(o.field,a))}var s=t.endAt?new Vi(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Vi(t.startAt.position,!t.startAt.before):null;t.T=Ti(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function no(e,t,n){return new Ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ro(e,t){return xi(to(e),to(t))&&e.limitType===t.limitType}function io(e){return Ai(to(e))+"|lt:"+e.limitType}function oo(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+pi(t.value);var t})).join(", ")+"]"),oi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+ji(e.startAt)),e.endAt&&(t+=", endAt: "+ji(e.endAt)),"Target("+t+")"}(to(e))+"; limitType="+e.limitType+")"}function ao(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ui.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Hi(e.startAt,eo(e),t)||e.endAt&&Hi(e.endAt,eo(e),t))}(e,t)}function so(e){return function(t,n){for(var r=!1,i=0,o=eo(e);i<o.length;i++){var a=o[i],s=uo(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function uo(e,t,n){var r=e.field.isKeyField()?ui.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hi(r,i):Or()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Or()}}function co(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ai(t)?"-0":t}}function lo(e){return{integerValue:""+e}}function fo(e,t){return si(t)?lo(t):co(e,t)}var ho=function(){this._=void 0};function po(e,t,n){return e instanceof go?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vo?bo(e,t):e instanceof wo?_o(e,t):function(e,t){var n=yo(e,t),r=So(n)+So(e.A);return gi(n)&&gi(e.A)?lo(r):co(e.R,r)}(e,t)}function mo(e,t,n){return e instanceof vo?bo(e,t):e instanceof wo?_o(e,t):n}function yo(e,t){return e instanceof Eo?gi(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(ho),vo=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return o(t,e),t}(ho);function bo(e,t){for(var n=Io(t),r=function(e){n.some((function(t){return li(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var wo=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return o(t,e),t}(ho);function _o(e,t){for(var n=Io(t),r=function(e){n=n.filter((function(t){return!li(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Eo=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return o(t,e),t}(ho);function So(e){return ei(e.integerValue||e.doubleValue)}function Io(e){return vi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ko=function(e,t){this.field=e,this.transform=t},Co=function(e,t){this.version=e,this.transformResults=t},To=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function Ao(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var xo=function(){};function Po(e,t,n){e instanceof Mo?function(e,t,n){var r=e.value.clone(),i=Uo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lo?function(e,t,n){if(Ao(e.precondition,t)){var r=Uo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ro(e,t,n){e instanceof Mo?function(e,t,n){if(Ao(e.precondition,t)){var r=e.value.clone(),i=Fo(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Do(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Lo?function(e,t,n){if(Ao(e.precondition,t)){var r=Fo(e.fieldTransforms,n,t),i=t.data;i.setAll(Bo(e)),i.setAll(r),t.convertToFoundDocument(Do(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Ao(e.precondition,t)&&t.convertToNoDocument(qr.min())}(e,t)}function No(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=yo(o.transform,a||null);null!=s&&(null==n&&(n=Si.empty()),n.set(o.field,s))}return n||null}function Oo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fr(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vo&&t instanceof vo||e instanceof wo&&t instanceof wo?Fr(e.elements,t.elements,li):e instanceof Eo&&t instanceof Eo?li(e.A,t.A):e instanceof go&&t instanceof go}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Do(e){return e.isFoundDocument()?e.version:qr.min()}var Mo=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return o(t,e),t}(xo),Lo=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return o(t,e),t}(xo);function Bo(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Uo(e,t,n){var r=new Map;Dr(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,mo(a,s,n[i]))}return r}function Fo(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,po(s,u,t))}return r}var Vo,jo,qo=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return o(t,e),t}(xo),zo=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return o(t,e),t}(xo),Ho=function(e){this.count=e};function Xo(e){switch(e){case kr.OK:return Or();case kr.CANCELLED:case kr.UNKNOWN:case kr.DEADLINE_EXCEEDED:case kr.RESOURCE_EXHAUSTED:case kr.INTERNAL:case kr.UNAVAILABLE:case kr.UNAUTHENTICATED:return!1;case kr.INVALID_ARGUMENT:case kr.NOT_FOUND:case kr.ALREADY_EXISTS:case kr.PERMISSION_DENIED:case kr.FAILED_PRECONDITION:case kr.ABORTED:case kr.OUT_OF_RANGE:case kr.UNIMPLEMENTED:case kr.DATA_LOSS:return!0;default:return Or()}}function Ko(e){if(void 0===e)return Pr("GRPC error has no .code"),kr.UNKNOWN;switch(e){case Vo.OK:return kr.OK;case Vo.CANCELLED:return kr.CANCELLED;case Vo.UNKNOWN:return kr.UNKNOWN;case Vo.DEADLINE_EXCEEDED:return kr.DEADLINE_EXCEEDED;case Vo.RESOURCE_EXHAUSTED:return kr.RESOURCE_EXHAUSTED;case Vo.INTERNAL:return kr.INTERNAL;case Vo.UNAVAILABLE:return kr.UNAVAILABLE;case Vo.UNAUTHENTICATED:return kr.UNAUTHENTICATED;case Vo.INVALID_ARGUMENT:return kr.INVALID_ARGUMENT;case Vo.NOT_FOUND:return kr.NOT_FOUND;case Vo.ALREADY_EXISTS:return kr.ALREADY_EXISTS;case Vo.PERMISSION_DENIED:return kr.PERMISSION_DENIED;case Vo.FAILED_PRECONDITION:return kr.FAILED_PRECONDITION;case Vo.ABORTED:return kr.ABORTED;case Vo.OUT_OF_RANGE:return kr.OUT_OF_RANGE;case Vo.UNIMPLEMENTED:return kr.UNIMPLEMENTED;case Vo.DATA_LOSS:return kr.DATA_LOSS;default:return Or()}}(jo=Vo||(Vo={}))[jo.OK=0]="OK",jo[jo.CANCELLED=1]="CANCELLED",jo[jo.UNKNOWN=2]="UNKNOWN",jo[jo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jo[jo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jo[jo.NOT_FOUND=5]="NOT_FOUND",jo[jo.ALREADY_EXISTS=6]="ALREADY_EXISTS",jo[jo.PERMISSION_DENIED=7]="PERMISSION_DENIED",jo[jo.UNAUTHENTICATED=16]="UNAUTHENTICATED",jo[jo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jo[jo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jo[jo.ABORTED=10]="ABORTED",jo[jo.OUT_OF_RANGE=11]="OUT_OF_RANGE",jo[jo.UNIMPLEMENTED=12]="UNIMPLEMENTED",jo[jo.INTERNAL=13]="INTERNAL",jo[jo.UNAVAILABLE=14]="UNAVAILABLE",jo[jo.DATA_LOSS=15]="DATA_LOSS";var Wo=function(){function e(e,t){this.comparator=e,this.root=t||Go.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Go.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Go.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new $o(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new $o(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new $o(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new $o(this.root,e,this.comparator,!0)},e}(),$o=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Go=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Or();if(this.right.isRed())throw Or();var e=this.left.check();if(e!==this.right.check())throw Or();return e+(this.isRed()?0:1)},e}();Go.EMPTY=null,Go.RED=!0,Go.BLACK=!1,Go.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw Or()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw Or()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw Or()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw Or()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw Or()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Go(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var Qo=function(){function e(e){this.comparator=e,this.data=new Wo(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Yo(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Yo(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Yo=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Zo=new Wo(ui.comparator);function Jo(){return Zo}var ea=new Wo(ui.comparator);function ta(){return ea}var na=new Wo(ui.comparator);function ra(){return na}var ia=new Qo(ui.comparator);function oa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=ia,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var aa=new Qo(Ur);function sa(){return aa}var ua=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,ca.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(qr.min(),r,sa(),Jo(),oa())},e}(),ca=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Yr.EMPTY_BYTE_STRING,n,oa(),oa(),oa())},e}(),la=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},fa=function(e,t){this.targetId=e,this.V=t},ha=function(e,t,n,r){void 0===n&&(n=Yr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},da=function(){function e(){this.S=0,this.D=ya(),this.C=Yr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},e.prototype.M=function(){var e=oa(),t=oa(),n=oa();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Or()}})),new ca(this.C,this.N,e,t,n)},e.prototype.L=function(){this.k=!1,this.D=ya()},e.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),pa=function(){function e(e){this.W=e,this.G=new Map,this.H=Jo(),this.J=ma(),this.Y=new Qo(Ur)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:Or()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(Pi(i))if(0===n){var o=new ui(i.path);this.tt(t,o,ki.newNoDocument(o,qr.min()))}else Dr(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&Pi(o.target)){var a=new ui(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,ki.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=oa();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new ua(e,n,this.Y,this.H,r);return this.H=Jo(),this.J=ma(),this.Y=new Qo(Ur),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new da,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Qo(Ur),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||xr("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new da),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function ma(){return new Wo(ui.comparator)}function ya(){return new Wo(ui.comparator)}var ga={asc:"ASCENDING",desc:"DESCENDING"},va={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ba=function(e,t){this.databaseId=e,this.I=t};function wa(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function _a(e,t){return e.I?t.toBase64():t.toUint8Array()}function Ea(e,t){return wa(e,t.toTimestamp())}function Sa(e){return Dr(!!e),qr.fromTimestamp(function(e){var t=Jr(e);return new jr(t.seconds,t.nanos)}(e))}function Ia(e,t){return function(e){return new Wr(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ka(e){var t=Wr.fromString(e);return Dr(Ga(t)),t}function Ca(e,t){return Ia(e.databaseId,t.path)}function Ta(e,t){var n=ka(t);if(n.get(1)!==e.databaseId.projectId)throw new Cr(kr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Cr(kr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ui(Ra(n))}function Aa(e,t){return Ia(e.databaseId,t)}function xa(e){var t=ka(e);return 4===t.length?Wr.emptyPath():Ra(t)}function Pa(e){return new Wr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ra(e){return Dr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Na(e,t,n){return{name:Ca(e,t),fields:n.value.mapValue.fields}}function Oa(e,t,n){var r=Ta(e,t.name),i=Sa(t.updateTime),o=new Si({mapValue:{fields:t.fields}}),a=ki.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Da(e,t){var n;if(t instanceof Mo)n={update:Na(e,t.key,t.value)};else if(t instanceof qo)n={delete:Ca(e,t.key)};else if(t instanceof Lo)n={update:Na(e,t.key,t.data),updateMask:$a(t.fieldMask)};else{if(!(t instanceof zo))return Or();n={verify:Ca(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof go)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Eo)return{fieldPath:t.field.canonicalString(),increment:n.A};throw Or()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ea(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Or()}(e,t.precondition)),n}function Ma(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?To.updateTime(Sa(e.updateTime)):void 0!==e.exists?To.exists(e.exists):To.none()}(t.currentDocument):To.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Dr("REQUEST_TIME"===t.setToServerValue),n=new go;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new vo(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new wo(i)}else"increment"in t?n=new Eo(e,t.increment):Or();var o=Gr.fromServerFormat(t.fieldPath);return new ko(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ta(e,t.update.name),o=new Si({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new Qr(t.map((function(e){return Gr.fromServerFormat(e)})))}(t.updateMask);return new Lo(i,o,a,n,r)}return new Mo(i,o,n,r)}if(t.delete){var s=Ta(e,t.delete);return new qo(s,n)}if(t.verify){var u=Ta(e,t.verify);return new zo(u,n)}return Or()}function La(e,t){return{documents:[Aa(e,t.path)]}}function Ba(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Aa(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Aa(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(wi(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NAN"}};if(bi(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wi(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NOT_NAN"}};if(bi(e.value))return{unaryFilter:{field:Ha(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(e.field),op:za(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ha(e.field),direction:qa(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||oi(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Va(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Va(t.endAt)),n}function Ua(e){var t=xa(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Fa(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new qi(Xa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return oi(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=ja(n.startAt));var l=null;return n.endAt&&(l=ja(n.endAt)),Wi(t,i,s,a,u,"F",c,l)}function Fa(e){return e?void 0!==e.unaryFilter?[Wa(e)]:void 0!==e.fieldFilter?[Ka(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Fa(e)})).reduce((function(e,t){return e.concat(t)})):Or():[]}function Va(e){return{before:e.before,values:e.position}}function ja(e){var t=!!e.before,n=e.values||[];return new Vi(n,t)}function qa(e){return ga[e]}function za(e){return va[e]}function Ha(e){return{fieldPath:e.canonicalString()}}function Xa(e){return Gr.fromServerFormat(e.fieldPath)}function Ka(e){return Ri.create(Xa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Or()}}(e.fieldFilter.op),e.fieldFilter.value)}function Wa(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Xa(e.unaryFilter.field);return Ri.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Xa(e.unaryFilter.field);return Ri.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xa(e.unaryFilter.field);return Ri.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xa(e.unaryFilter.field);return Ri.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Or()}}function $a(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ga(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Qa(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Za(t)),t=Ya(e.get(n),t);return Za(t)}function Ya(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Za(e){return e+""}function Ja(e){var t=e.length;if(Dr(t>=2),2===t)return Dr(""===e.charAt(0)&&""===e.charAt(1)),Wr.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&Or(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:Or()}o=a+2}return new Wr(r)}var es=function(e,t){this.seconds=e,this.nanoseconds=t},ts=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};ts.store="owner",ts.key="owner";var ns=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};ns.store="mutationQueues",ns.keyPath="userId";var rs=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};rs.store="mutations",rs.keyPath="batchId",rs.userMutationsIndex="userMutationsIndex",rs.userMutationsKeyPath=["userId","batchId"];var is=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Qa(t)]},e.key=function(e,t,n){return[e,Qa(t),n]},e}();is.store="documentMutations",is.PLACEHOLDER=new is;var os=function(e,t){this.path=e,this.readTime=t},as=function(e,t){this.path=e,this.version=t},ss=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ss.store="remoteDocuments",ss.readTimeIndex="readTimeIndex",ss.readTimeIndexPath="readTime",ss.collectionReadTimeIndex="collectionReadTimeIndex",ss.collectionReadTimeIndexPath=["parentPath","readTime"];var us=function(e){this.byteSize=e};us.store="remoteDocumentGlobal",us.key="remoteDocumentGlobalKey";var cs=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};cs.store="targets",cs.keyPath="targetId",cs.queryTargetsIndexName="queryTargetsIndex",cs.queryTargetsKeyPath=["canonicalId","targetId"];var ls=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};ls.store="targetDocuments",ls.keyPath=["targetId","path"],ls.documentTargetsIndex="documentTargetsIndex",ls.documentTargetsKeyPath=["path","targetId"];var fs=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fs.key="targetGlobalKey",fs.store="targetGlobal";var hs=function(e,t){this.collectionId=e,this.parent=t};hs.store="collectionParents",hs.keyPath=["collectionId","parent"];var ds=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};ds.store="clientMetadata",ds.keyPath="clientId";var ps=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};ps.store="bundles",ps.keyPath="bundleId";var ms=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};ms.store="namedQueries",ms.keyPath="name";var ys=u(u([],u(u([],u(u([],u(u([],[ns.store,rs.store,is.store,ss.store,cs.store,ts.store,fs.store,ls.store]),[ds.store])),[us.store])),[hs.store])),[ps.store,ms.store]),gs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vs=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),bs=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},ws=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&Or(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),_s=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new bs,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new Is(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=xs(t.target.error);n.ft.reject(new Is(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Is(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(xr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new Cs(t)},e}(),Es=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t((0,c.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return xr("SimpleDb","Removing database:",e),Ts(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=(0,c.z$)(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return a(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(xr("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new Is(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new Cr(kr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Is(e,n))},i.onupgradeneeded=function(e){xr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){xr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return a(this,void 0,void 0,(function(){var i,o,a,u,c;return s(this,(function(l){switch(l.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,c,l,f;return s(this,(function(s){switch(s.label){case 0:++o,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,u.At(e)];case 2:return u.db=s.sent(),t=_s.open(u.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),ws.reject(e)})).toPromise(),c={},a.catch((function(){})),[4,t.dt];case 3:return[2,(c.value=(s.sent(),a),c)];case 4:return l=s.sent(),f="FirebaseError"!==l.name&&o<3,xr("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),Ss=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return Ts(this.Pt.delete())},e}(),Is=function(e){function t(t,n){var r=this;return(r=e.call(this,kr.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return o(t,e),t}(Cr);function ks(e){return"IndexedDbTransactionError"===e.name}var Cs=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(xr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(xr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ts(n)},e.prototype.add=function(e){return xr("SimpleDb","ADD",this.store.name,e,e),Ts(this.store.add(e))},e.prototype.get=function(e){var t=this;return Ts(this.store.get(e)).next((function(n){return void 0===n&&(n=null),xr("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return xr("SimpleDb","DELETE",this.store.name,e),Ts(this.store.delete(e))},e.prototype.count=function(){return xr("SimpleDb","COUNT",this.store.name),Ts(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.kt=function(e,t){xr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new ws((function(n,r){t.onerror=function(e){var t=xs(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new ws((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Ss(i),a=t(i.primaryKey,i.value,o);if(a instanceof ws){var s=a.catch((function(e){return o.done(),ws.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return ws.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Ts(e){return new ws((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=xs(e.target.error);n(t)}}))}var As=!1;function xs(e){var t=Es._t((0,c.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Cr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return As||(As=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ps=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return o(t,e),t}(vs);function Rs(e,t){var n=Mr(e);return Es.It(n.Mt,t)}var Ns=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Po(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&Ro(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&Ro(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(qr.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),oa())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,(function(e,t){return Oo(e,t)}))&&Fr(this.baseMutations,e.baseMutations,(function(e,t){return Oo(e,t)}))},e}(),Os=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){Dr(t.mutations.length===r.length);for(var i=ra(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Ds=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=qr.min()),void 0===o&&(o=qr.min()),void 0===a&&(a=Yr.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),Ms=function(e){this.Lt=e};function Ls(e,t){if(t.document)return Oa(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=ui.fromSegments(t.noDocument.path),r=js(t.noDocument.readTime),i=ki.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=ui.fromSegments(t.unknownDocument.path);return r=js(t.unknownDocument.version),ki.newUnknownDocument(o,r)}return Or()}function Bs(e,t,n){var r=Us(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:Ca(e,t.key),fields:t.data.value.mapValue.fields,updateTime:wa(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new ss(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=Vs(t.version);return a=t.hasCommittedMutations,new ss(null,new os(s,u),null,a,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Vs(t.version);return new ss(new as(c,l),null,null,!0,r,i)}return Or()}function Us(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fs(e){var t=new jr(e[0],e[1]);return qr.fromTimestamp(t)}function Vs(e){var t=e.toTimestamp();return new es(t.seconds,t.nanoseconds)}function js(e){var t=new jr(e.seconds,e.nanoseconds);return qr.fromTimestamp(t)}function qs(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ma(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return Ma(e.Lt,t)})),s=jr.fromMillis(t.localWriteTimeMs);return new Ns(t.batchId,s,n,a)}function zs(e){var t,n,r=js(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?js(e.lastLimboFreeSnapshotVersion):qr.min();return void 0!==e.query.documents?(Dr(1===(n=e.query).documents.length),t=to($i(xa(n.documents[0])))):t=function(e){return to(Ua(e))}(e.query),new Ds(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Yr.fromBase64String(e.resumeToken))}function Hs(e,t){var n,r=Vs(t.snapshotVersion),i=Vs(t.lastLimboFreeSnapshotVersion);n=Pi(t.target)?La(e.Lt,t.target):Ba(e.Lt,t.target);var o=t.resumeToken.toBase64();return new cs(t.targetId,Ai(t.target),r,o,t.sequenceNumber,i,n)}function Xs(e){var t=Ua({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?no(t,t.limit,"L"):t}var Ks=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Ws(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:js(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Ws(e).put({bundleId:(n=t).id,createTime:Vs(Sa(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return $s(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Xs(t.bundledQuery),readTime:js(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return $s(e).put(function(e){return{name:e.name,readTime:Vs(Sa(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Ws(e){return Rs(e,ps.store)}function $s(e){return Rs(e,ms.store)}var Gs=function(){function e(){this.Bt=new Qs}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),ws.resolve()},e.prototype.getCollectionParents=function(e,t){return ws.resolve(this.Bt.getEntries(t))},e}(),Qs=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qo(Wr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Qo(Wr.comparator)).toArray()},e}(),Ys=function(){function e(){this.qt=new Qs}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:Qa(i)};return Zs(e).put(o)}return ws.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Vr(t),""],!1,!0);return Zs(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ja(o.parent))}return n}))},e}();function Zs(e){return Rs(e,hs.store)}var Js={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eu=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function tu(e,t,n){var r=e.store(rs.store),i=e.store(is.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Dr(1===s)})));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],d=is.key(t,h.key.path,n.batchId);o.push(i.delete(d)),c.push(h.key)}return ws.waitFor(o).next((function(){return c}))}function nu(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Or();t=e.noDocument}return JSON.stringify(t).length}eu.DEFAULT_COLLECTION_PERCENTILE=10,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eu.DEFAULT=new eu(41943040,eu.DEFAULT_COLLECTION_PERCENTILE,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eu.DISABLED=new eu(-1,0,0);var ru=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return Dr(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).$t({index:rs.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=au(e),a=ou(e);return a.add({}).next((function(s){Dr("number"==typeof s);for(var u=new Ns(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return Da(e.Lt,t)})),i=n.mutations.map((function(t){return Da(e.Lt,t)}));return new rs(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],f=new Qo((function(e,t){return Ur(e.canonicalString(),t.canonicalString())})),h=0,d=r;h<d.length;h++){var p=d[h],m=is.key(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,is.PLACEHOLDER))}return f.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),ws.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ou(e).get(t).next((function(e){return e?(Dr(e.userId===n.userId),qs(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?ws.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ou(e).$t({index:rs.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Dr(t.batchId>=r),o=qs(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ou(e).$t({index:rs.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ou(e).Nt(rs.userMutationsIndex,n).next((function(e){return e.map((function(e){return qs(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=is.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return au(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ja(u);if(s===n.userId&&t.path.isEqual(l))return ou(e).get(c).next((function(e){if(!e)throw Or();Dr(e.userId===n.userId),o.push(qs(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Qo(Ur),i=[];return t.forEach((function(t){var o=is.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=au(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Ja(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),ws.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=is.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Qo(Ur);return au(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Ja(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ou(e).get(t).next((function(e){if(null===e)throw Or();Dr(e.userId===n.userId),r.push(qs(n.R,e))})))})),ws.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return tu(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),ws.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ws.resolve();var r=IDBKeyRange.lowerBound(is.prefixForUser(t.userId)),i=[];return au(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ja(e[1]);i.push(o)}else r.done()})).next((function(){Dr(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return iu(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return su(e).get(this.userId).next((function(e){return e||new ns(t.userId,-1,"")}))},e}();function iu(e,t,n){var r=is.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return au(e).$t({range:o,Ft:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function ou(e){return Rs(e,rs.store)}function au(e){return Rs(e,is.store)}function su(e){return Rs(e,ns.store)}var uu=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),cu=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new uu(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return qr.fromTimestamp(new jr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return lu(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return Dr(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return lu(e).$t((function(a,s){var u=zs(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return ws.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return lu(e).$t((function(e,n){var r=zs(n);t(r)}))},e.prototype.Xt=function(e){return fu(e).get(fs.key).next((function(e){return Dr(null!==e),e}))},e.prototype.Zt=function(e,t){return fu(e).put(fs.key,t)},e.prototype.te=function(e,t){return lu(e).put(Hs(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=Ai(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return lu(e).$t({range:r,index:cs.queryTargetsIndexName},(function(e,n,r){var o=zs(n);xi(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=hu(e);return t.forEach((function(t){var a=Qa(t.path);i.push(o.put(new ls(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),ws.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=hu(e);return ws.forEach(t,(function(t){var o=Qa(t.path);return ws.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=hu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=hu(e),i=oa();return r.$t({range:n,Ft:!0},(function(e,t,n){var r=Ja(e[1]),o=new ui(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Qa(t.path),r=IDBKeyRange.bound([n],[Vr(n)],!1,!0),i=0;return hu(e).$t({index:ls.documentTargetsIndex,Ft:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return lu(e).get(t).next((function(e){return e?zs(e):null}))},e}();function lu(e){return Rs(e,cs.store)}function fu(e){return Rs(e,fs.store)}function hu(e){return Rs(e,ls.store)}function du(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){if(e.code!==kr.FAILED_PRECONDITION||e.message!==gs)throw e;return xr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function pu(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Ur(n,i);return 0===a?Ur(r,o):a}var mu=function(){function e(e){this.ne=e,this.buffer=new Qo(pu),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();pu(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),yu=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;xr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return a(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ks(t=n.sent())?(xr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,du(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),gu=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return ws.resolve(Ir.o);var r=new mu(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(xr("LruGarbageCollector","Garbage collection skipped; disabled"),ws.resolve(Js)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(xr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Js):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,c=this,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(xr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Ar()<=l.in.DEBUG&&xr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-f)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-f)+"ms"),ws.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),vu=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new gu(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return bu(e,n)},e.prototype.removeReference=function(e,t,n){return bu(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return bu(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return su(e).Ot((function(r){return iu(e,r,t).next((function(e){return e&&(n=!0),ws.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),hu(e).delete([0,Qa(a.path)])}))}));i.push(u)}})).next((function(){return ws.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return bu(e,t)},e.prototype.we=function(e,t){var n,r=hu(e),i=Ir.o;return r.$t({index:ls.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Ir.o&&t(new ui(Ja(n)),i),i=s,n=a):i=Ir.o})).next((function(){i!==Ir.o&&t(new ui(Ja(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function bu(e,t){return hu(e).put(function(e,t){return new ls(0,Qa(e.path),t)}(t,e.currentSequenceNumber))}var wu=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){Hr(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return Xr(this.inner)},e}(),_u=function(){function e(){this.changes=new wu((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:qr.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:ki.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ws.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),Eu=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return ku(e).put(Cu(t),n)},e.prototype.removeEntry=function(e,t){var n=ku(e),r=Cu(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return ku(e).get(Cu(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return ku(e).get(Cu(t)).next((function(e){return{document:n.ye(t,e),size:nu(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Jo();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Jo(),i=new Wo(ui.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,nu(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return ws.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return ku(e).$t({range:r},(function(e,t,r){for(var a=ui.fromSegments(e);o&&ui.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Jo(),o=t.path.length+1,a={};if(n.isEqual(qr.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=Us(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=ss.collectionReadTimeIndex}return ku(e).$t(a,(function(e,n,a){if(e.length===o){var s=Ls(r.R,n);t.path.isPrefixOf(s.key.path)?ao(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new Su(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Iu(e).get(us.key).next((function(e){return Dr(!!e),e}))},e.prototype.me=function(e,t){return Iu(e).put(us.key,t)},e.prototype.ye=function(e,t){if(t){var n=Ls(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(qr.min()))return n}return ki.newInvalidDocument(e)},e}(),Su=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new wu((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return o(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Qo((function(e,t){return Ur(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=Bs(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=nu(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=Bs(t.Ie.R,ki.newNoDocument(o,qr.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),ws.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(_u);function Iu(e){return Rs(e,us.store)}function ku(e){return Rs(e,ss.store)}function Cu(e){return e.path.toArray()}var Tu=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;Dr(n<r&&n>=0&&r<=11);var o=new _s("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ts.store)}(e),function(e){e.createObjectStore(ns.store,{keyPath:ns.keyPath}),e.createObjectStore(rs.store,{keyPath:rs.keyPath,autoIncrement:!0}).createIndex(rs.userMutationsIndex,rs.userMutationsKeyPath,{unique:!0}),e.createObjectStore(is.store)}(e),Au(e),function(e){e.createObjectStore(ss.store)}(e));var a=ws.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ls.store),e.deleteObjectStore(cs.store),e.deleteObjectStore(fs.store)}(e),Au(e)),a=a.next((function(){return function(e){var t=e.store(fs.store),n=new fs(0,0,qr.min().toTimestamp(),0);return t.put(fs.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(rs.store).Nt().next((function(n){e.deleteObjectStore(rs.store),e.createObjectStore(rs.store,{keyPath:rs.keyPath,autoIncrement:!0}).createIndex(rs.userMutationsIndex,rs.userMutationsKeyPath,{unique:!0});var r=t.store(rs.store),i=n.map((function(e){return r.put(e)}));return ws.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(ds.store,{keyPath:ds.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(us.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(ss.store);t.createIndex(ss.readTimeIndex,ss.readTimeIndexPath,{unique:!1}),t.createIndex(ss.collectionReadTimeIndex,ss.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(ps.store,{keyPath:ps.keyPath})}(e),function(e){e.createObjectStore(ms.store,{keyPath:ms.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(ss.store).$t((function(e,n){t+=nu(n)})).next((function(){var n=new us(t);return e.store(us.store).put(us.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(ns.store),r=e.store(rs.store);return n.Nt().next((function(n){return ws.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(rs.userMutationsIndex,i).next((function(r){return ws.forEach(r,(function(r){Dr(r.userId===n.userId);var i=qs(t.R,r);return tu(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(ls.store),n=e.store(ss.store);return e.store(fs.store).get(fs.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new Wr(n),a=function(e){return[0,Qa(e)]}(o);r.push(t.get(a).next((function(n){return n?ws.resolve():function(n){return t.put(new ls(0,Qa(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return ws.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(hs.store,{keyPath:hs.keyPath});var n=t.store(hs.store),r=new Qs,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Qa(i)})}};return t.store(ss.store).$t({Ft:!0},(function(e,t){var n=new Wr(e);return i(n.popLast())})).next((function(){return t.store(is.store).$t({Ft:!0},(function(e,t){e[0];var n=e[1];e[2];var r=Ja(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(cs.store);return n.$t((function(e,r){var i=zs(r),o=Hs(t.R,i);return n.put(o)}))},e}();function Au(e){e.createObjectStore(ls.store,{keyPath:ls.keyPath}).createIndex(ls.documentTargetsIndex,ls.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(cs.store,{keyPath:cs.keyPath}).createIndex(cs.queryTargetsIndexName,cs.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(fs.store)}var xu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Pu=function(){function e(t,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new Cr(kr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vu(this,i),this.Le=n+"main",this.R=new Ms(u),this.Be=new Es(this.Le,11,new Tu(this.R)),this.qe=new cu(this.referenceDelegate,this.R),this.Ut=new Ys,this.Ue=function(e,t){return new Eu(e,t)}(this.R,this.Ut),this.Ke=new Ks,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Cr(kr.FAILED_PRECONDITION,xu);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new Ir(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return a(t,void 0,void 0,(function(){return s(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return a(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return a(t,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Nu(t).put(new ds(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(ks(t))return xr("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return xr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return Ru(e).get(ts.key).next((function(e){return ws.resolve(t.tn(e))}))},e.prototype.en=function(e){return Nu(e).delete(this.clientId)},e.prototype.nn=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Rs(e,ds.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ws.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?ws.resolve(!0):Ru(e).get(ts.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new Cr(kr.FAILED_PRECONDITION,xu);return!1}}return!(!t.networkEnabled||!t.inForeground)||Nu(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&xr("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ts.store,ds.store],(function(t){var n=new Ps(t,Ir.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Nu(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return ru.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;xr("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,ys,(function(o){return i=new Ps(o,r.Ne?r.Ne.next():Ir.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw Pr("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Cr(kr.FAILED_PRECONDITION,gs);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return Ru(e).get(ts.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Cr(kr.FAILED_PRECONDITION,xu)}))},e.prototype.Ze=function(e){var t=new ts(this.clientId,this.allowTabSynchronization,Date.now());return Ru(e).put(ts.key,t)},e.yt=function(){return Es.yt()},e.prototype.Xe=function(e){var t=this,n=Ru(e);return n.get(ts.key).next((function(e){return t.tn(e)?(xr("IndexedDbPersistence","Releasing primary lease."),n.delete(ts.key)):ws.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Pr("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),(0,c.G6)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return xr("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return Pr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function Ru(e){return Rs(e,ts.store)}function Nu(e){return Rs(e,ds.store)}function Ou(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Du=function(e,t){this.progress=e,this.wn=t},Mu=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return ui.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Ji(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new ui(t)).next((function(e){var t=ta();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=ta();return this.Ut.getCollectionParents(e,i).next((function(a){return ws.forEach(a,(function(a){var s=function(e,t){return new Ki(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=ki.newInvalidDocument(c),r=r.insert(c,l)),Ro(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){ao(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=oa(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Lo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),Lu=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=oa(),i=oa(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Bu=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(qr.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(o){var a=i.Cn(t,o);return(Gi(t)||Qi(t))&&i.Nn(t.limitType,a,r,n)?i.Dn(e,t):(Ar()<=l.in.DEBUG&&xr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),oo(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new Qo(so(e));return t.forEach((function(t,r){ao(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return Ar()<=l.in.DEBUG&&xr("QueryEngine","Using full collection scan to execute query:",oo(t)),this.Sn.getDocumentsMatchingQuery(e,t,qr.min())},e}(),Uu=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new Wo(Ur),this.Fn=new wu((function(e){return Ai(e)}),xi),this.$n=qr.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new Mu(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.kn)}))},e}();function Fu(e,t,n,r){return new Uu(e,t,n,r)}function Vu(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(a){switch(a.label){case 0:return n=Mr(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new Mu(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=oa(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,f=c.mutations;l<f.length;l++){var h=f[l];a=a.add(h.key)}}for(var d=0,p=t;d<p.length;d++){var m=p[d];r.push(m.batchId);for(var y=0,g=m.mutations;y<g.length;y++){var v=g[y];a=a.add(v.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function ju(e,t){var n=Mr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=ws.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);Dr(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function qu(e){var t=Mr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function zu(e,t){var n=Mr(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return Dr(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.qe.updateTargetData(e,c))}}}));var s=Jo();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Hu(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(qr.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return ws.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.kn=i,e}))}function Hu(e,t,n,r,i){var o=oa();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Jo();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(qr.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):xr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Xu(e,t){var n=Mr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function Ku(e,t){var n=Mr(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,ws.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new Ds(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.kn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(e.targetId,e),n.Fn.set(t,e.targetId)),e}))}function Wu(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,a;return s(this,(function(s){switch(s.label){case 0:r=Mr(e),i=r.kn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ks(a=s.sent()))throw a;return xr("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}}))}))}function $u(e,t,n){var r=Mr(e),i=qr.min(),o=oa();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Mr(e),i=r.Fn.get(n);return void 0!==i?ws.resolve(r.kn.get(i)):r.qe.getTargetData(t,n)}(r,e,to(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:qr.min(),n?o:oa())})).next((function(e){return{documents:e,Bn:o}}))}))}function Gu(e,t){var n=Mr(e),r=Mr(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Qu(e){var t=Mr(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Mr(e),i=Jo(),o=Us(n),a=ku(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:ss.readTimeIndex,range:s},(function(e,t){var n=Ls(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:Fs(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function Yu(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){return[2,(t=Mr(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=ku(e),n=qr.min();return t.$t({index:ss.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Fs(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.$n=e}))]}))}))}function Zu(e,t,n,r){return a(this,void 0,void 0,(function(){var i,o,a,u,c,l,f,h,d,p;return s(this,(function(s){switch(s.label){case 0:for(i=Mr(e),o=oa(),a=Jo(),u=ra(),c=0,l=n;c<l.length;c++)f=l[c],h=t.qn(f.metadata.name),f.document&&(o=o.add(h)),a=a.insert(h,t.Un(f)),u=u.insert(h,t.Kn(f.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,Ku(i,function(e){return to($i(Wr.fromString("__bundle__/docs/"+e)))}(r))];case 1:return p=s.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Hu(e,d,a,qr.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return i.qe.addMatchingKeys(e,o,p.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function Ju(e,t,n){return void 0===n&&(n=oa()),a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return[4,Ku(e,to(Xs(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Mr(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=Sa(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var a=r.withResumeToken(Yr.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(e,t)}))}))]}}))}))}var ec=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return ws.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:Sa(n.createTime)}),ws.resolve()},e.prototype.getNamedQuery=function(e,t){return ws.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Xs(e.bundledQuery),readTime:Sa(e.readTime)}}(t)),ws.resolve()},e}(),tc=function(){function e(){this.Wn=new Qo(nc.Gn),this.zn=new Qo(nc.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new nc(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new nc(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new ui(new Wr([])),r=new nc(n,e),i=new nc(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new ui(new Wr([])),n=new nc(t,e),r=new nc(t,e+1),i=oa();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new nc(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),nc=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return ui.comparator(e.key,t.key)||Ur(e.ns,t.ns)},e.Hn=function(e,t){return Ur(e.ns,t.ns)||ui.comparator(e.key,t.key)},e}(),rc=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Qo(nc.Gn)}return e.prototype.checkEmpty=function(e){return ws.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Ns(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new nc(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return ws.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return ws.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return ws.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return ws.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return ws.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new nc(t,0),i=new nc(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),ws.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Qo(Ur);return t.forEach((function(e){var t=new nc(e,0),i=new nc(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),ws.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;ui.isDocumentKey(i)||(i=i.child(""));var o=new nc(new ui(i),0),a=new Qo(Ur);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),ws.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;Dr(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return ws.forEach(t.mutations,(function(i){var o=new nc(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new nc(t,0),r=this.rs.firstAfterOrEqual(n);return ws.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,ws.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),ic=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new Wo(ui.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return ws.resolve(n?n.document.clone():ki.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Jo();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():ki.newInvalidDocument(e))})),ws.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Jo(),i=new ui(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||ao(t,c)&&(r=r.insert(c.key,c.clone()))}return ws.resolve(r)},e.prototype.fs=function(e,t){return ws.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new oc(this)},e.prototype.getSize=function(e){return ws.resolve(this.size)},e}(),oc=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return o(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),ws.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(_u),ac=function(){function e(e){this.persistence=e,this.ds=new wu((function(e){return Ai(e)}),xi),this.lastRemoteSnapshotVersion=qr.min(),this.highestTargetId=0,this.ws=0,this._s=new tc,this.targetCount=0,this.ys=uu.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),ws.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return ws.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return ws.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),ws.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),ws.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new uu(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,ws.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),ws.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,ws.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),ws.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return ws.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return ws.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),ws.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ws.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),ws.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return ws.resolve(n)},e.prototype.containsKey=function(e,t){return ws.resolve(this._s.containsKey(t))},e}(),sc=function(){function e(e,t){var n=this;this.gs={},this.Ne=new Ir(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new ac(this),this.Ut=new Gs,this.Ue=function(e,t){return new ic(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new Ms(t),this.Ke=new ec(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new rc(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;xr("MemoryPersistence","Starting transaction:",e);var i=new uc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return ws.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),uc=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return o(t,e),t}(vs),cc=function(){function e(e){this.persistence=e,this.As=new tc,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Or()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),ws.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),ws.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),ws.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ws.forEach(this.vs,(function(r){var i=ui.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return ws.or([function(){return ws.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),lc=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function fc(e,t){return"firestore_clients_"+e+"_"+t}function hc(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function dc(e,t){return"firestore_targets_"+e+"_"+t}lc.UNAUTHENTICATED=new lc(null),lc.GOOGLE_CREDENTIALS=new lc("google-credentials-uid"),lc.FIRST_PARTY=new lc("first-party-uid"),lc.MOCK_USER=new lc("mock-user");var pc=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Cr(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(Pr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),mc=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Cr(i.error.code,i.error.message)),o?new e(t,i.state,r):(Pr("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),yc=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=sa(),a=0;i&&a<r.activeTargetIds.length;++a)i=si(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(Pr("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),gc=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Pr("SharedClientState","Failed to parse online state: "+t),null)},e}(),vc=function(){function e(){this.activeTargetIds=sa()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),bc=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Wo(Ur),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=fc(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new vc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,u,c,l,f,h=this;return s(this,(function(s){switch(s.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=s.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(fc(this.persistenceKey,r)))&&(o=yc.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)f=l[c],this.ks(f);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(dc(this.persistenceKey,e));if(n){var r=mc.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(dc(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return xr("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){xr("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){xr("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.ks=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(xr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return a(t,void 0,void 0,(function(){var e,t,r,i,o,a;return s(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(e){var t=Ir.o;if(null!=e)try{var n=JSON.parse(e);Dr("number"==typeof n),t=n}catch(e){Pr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Ir.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new pc(this.currentUser,e,t,n),i=hc(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=hc(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=dc(this.persistenceKey,e),i=new mc(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return yc.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return pc.Vs(new lc(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return mc.Vs(r,t)},e.prototype.js=function(e){return gc.Vs(e)},e.prototype.ii=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(xr("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},e.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=sa();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),wc=function(){function e(){this.li=new vc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new vc,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),_c=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),Ec=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){xr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){xr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Sc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ic=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),kc=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return o(t,e),t.prototype.Fi=function(e,t,n,r){return new Promise((function(i,o){var a=new Sr;a.listenOnce(gr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case yr.NO_ERROR:var t=a.getResponseJson();xr("Connection","XHR received:",JSON.stringify(t)),i(t);break;case yr.TIMEOUT:xr("Connection",'RPC "'+e+'" timed out'),o(new Cr(kr.DEADLINE_EXCEEDED,"Request time out"));break;case yr.HTTP_ERROR:var n=a.getStatus();if(xr("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(kr).indexOf(t)>=0?t:kr.UNKNOWN}(r.status);o(new Cr(s,r.message))}else o(new Cr(kr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Cr(kr.UNAVAILABLE,"Connection failed."));break;default:Or()}}finally{xr("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new fr,i=rt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new _r({})),this.ki(o.initMessageHeaders,t),(0,c.uI)()||(0,c.b$)()||(0,c.d)()||(0,c.w1)()||(0,c.Mn)()||(0,c.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");xr("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,l=!1,f=new Ic({Ei:function(e){l?xr("Connection","Not sending because WebChannel is closed:",e):(u||(xr("Connection","Opening WebChannel transport."),s.open(),u=!0),xr("Connection","WebChannel sending:",e),s.send(e))},Ti:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Er.EventType.OPEN,(function(){l||xr("Connection","WebChannel transport opened.")})),h(s,Er.EventType.CLOSE,(function(){l||(l=!0,xr("Connection","WebChannel transport closed"),f.Vi())})),h(s,Er.EventType.ERROR,(function(e){l||(l=!0,Rr("Connection","WebChannel transport errored:",e),f.Vi(new Cr(kr.UNAVAILABLE,"The operation could not be completed")))})),h(s,Er.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Dr(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){xr("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=Vo[e];if(void 0!==t)return Ko(t)}(o),u=i.message;void 0===a&&(a=kr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),l=!0,f.Vi(new Cr(a,u)),s.close()}else xr("Connection","WebChannel received:",n),f.Si(n)}})),h(i,vr.STAT_EVENT,(function(e){e.stat===br?xr("Connection","Detected buffering proxy"):e.stat===wr&&xr("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);xr("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(e,i,o,n).then((function(e){return xr("RestConnection","Received: ",e),e}),(function(t){throw Rr("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=Sc[e];return this.Di+"/v1/"+t+":"+n},e}());function Cc(){return"undefined"!=typeof window?window:null}function Tc(){return"undefined"!=typeof document?document:null}function Ac(e){return new ba(e,!0)}var xc=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&xr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),Pc=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new xc(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===kr.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===kr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new Cr(kr.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return a(e,void 0,void 0,(function(){return s(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return xr("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(xr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Rc=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return o(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Or()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(Dr(void 0===t||"string"==typeof t),Yr.fromBase64String(t||"")):(Dr(void 0===t||t instanceof Uint8Array),Yr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?kr.UNKNOWN:Ko(e.code);return new Cr(t,e.message||"")}(s);n=new ha(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=Ta(e,r.document.name),o=Sa(r.document.updateTime);var s=new Si({mapValue:{fields:r.document.fields}}),u=(a=ki.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new la(u,c,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=Ta(e,r.document),o=r.readTime?Sa(r.readTime):qr.min(),s=ki.newNoDocument(i,o),a=r.removedTargetIds||[],n=new la([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=Ta(e,r.document),o=r.removedTargetIds||[],n=new la([],o,i,null);else{if(!("filter"in t))return Or();t.filter;var l=t.filter;l.targetId,r=l.count||0,i=new Ho(r),o=l.targetId,n=new fa(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return qr.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?qr.min():t.readTime?Sa(t.readTime):qr.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=Pa(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=Pi(r)?{documents:La(e,r)}:{query:Ba(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=_a(e,t.resumeToken):t.snapshotVersion.compareTo(qr.min())>0&&(n.readTime=wa(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Or()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=Pa(this.R),t.removeTarget=e,this.cr(t)},t}(Pc),Nc=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return o(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(Dr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(Dr(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Sa(e.updateTime):Sa(t);return n.isEqual(qr.min())&&(n=Sa(t)),new Co(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Sa(e.commitTime);return this.listener.Tr(n,t)}return Dr(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=Pa(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Da(t.R,e)}))};this.cr(n)},t}(Pc),Oc=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return o(t,e),t.prototype.br=function(){if(this.Rr)throw new Cr(kr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===kr.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Cr(kr.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===kr.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Cr(kr.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),Dc=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Pr(t),this.Vr=!1):xr("OnlineStateTracker",t)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),Mc=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return a(o,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return Hc(this)?(xr("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return(t=Mr(e)).Or.add(4),[4,Bc(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,Lc(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new Dc(n,r)};function Lc(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:if(!Hc(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Bc(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Uc(e,t){var n=Mr(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),zc(n)?qc(n):ol(n).er()&&Vc(n,t))}function Fc(e,t){var n=Mr(e),r=ol(n);n.$r.delete(t),r.er()&&jc(n,t),0===n.$r.size&&(r.er()?r.ir():Hc(n)&&n.Br.set("Unknown"))}function Vc(e,t){e.qr.U(t.targetId),ol(e).mr(t)}function jc(e,t){e.qr.U(t),ol(e).yr(t)}function qc(e){e.qr=new pa({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),ol(e).start(),e.Br.Sr()}function zc(e){return Hc(e)&&!ol(e).tr()&&e.$r.size>0}function Hc(e){return 0===Mr(e).Or.size}function Xc(e){e.qr=void 0}function Kc(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return e.$r.forEach((function(t,n){Vc(e,t)})),[2]}))}))}function Wc(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){return Xc(e),zc(e)?(e.Br.Nr(t),qc(e)):e.Br.set("Unknown"),[2]}))}))}function $c(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o;return s(this,(function(u){switch(u.label){case 0:if(e.Br.set("Online"),!(t instanceof ha&&2===t.state&&t.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o;return s(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),xr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Gc(e,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof la?e.qr.X(t):t instanceof fa?e.qr.rt(t):e.qr.et(t),n.isEqual(qr.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,qu(e.localStore)];case 8:return i=u.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(Yr.EMPTY_BYTE_STRING,n.snapshotVersion)),jc(e,t);var r=new Ds(n.target,t,1,n.sequenceNumber);Vc(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return xr("RemoteStore","Failed to raise snapshot:",o=u.sent()),[4,Gc(e,o)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function Gc(e,t,n){return a(this,void 0,void 0,(function(){var r=this;return s(this,(function(i){switch(i.label){case 0:if(!ks(t))throw t;return e.Or.add(1),[4,Bc(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return qu(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return a(r,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return xr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,Lc(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Qc(e,t){return t().catch((function(n){return Gc(e,n,t)}))}function Yc(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o;return s(this,(function(a){switch(a.label){case 0:t=Mr(e),n=al(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(e){return Hc(e)&&e.Fr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Xu(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.Fr.push(t);var n=al(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,Gc(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Zc(t)&&Jc(t),[2]}}))}))}function Zc(e){return Hc(e)&&!al(e).tr()&&e.Fr.length>0}function Jc(e){al(e).start()}function el(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){return al(e).Ar(),[2]}))}))}function tl(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return s(this,(function(o){for(t=al(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function nl(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=Os.from(r,t,n),[4,Qc(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Yc(e)];case 2:return o.sent(),[2]}}))}))}function rl(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return t&&al(e).pr?[4,function(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return Xo(r=t.code)&&r!==kr.ABORTED?(n=e.Fr.shift(),al(e).sr(),[4,Qc(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,Yc(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Zc(e)&&Jc(e),[2]}}))}))}function il(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return n=Mr(e),t?(n.Or.delete(2),[4,Lc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Bc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ol(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=Mr(e);return r.br(),new Rc(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Kc.bind(null,e),Ri:Wc.bind(null,e),_r:$c.bind(null,e)}),e.Mr.push((function(n){return a(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),zc(e)?qc(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),Xc(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function al(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=Mr(e);return r.br(),new Nc(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:el.bind(null,e),Ri:rl.bind(null,e),Ir:tl.bind(null,e),Tr:nl.bind(null,e)}),e.Mr.push((function(n){return a(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,Yc(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.Fr.length>0&&(xr("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr}var sl=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Cr(kr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function ul(e,t){if(Pr("AsyncQueue",t+": "+e),ks(e))return new Cr(kr.UNAVAILABLE,t+": "+e);throw e}var cl=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||ui.comparator(t.key,n.key)}:function(e,t){return ui.comparator(e.key,t.key)},this.keyedMap=ta(),this.sortedSet=new Wo(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),ll=function(){function e(){this.Qr=new Wo(ui.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):Or():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),fl=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,cl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ro(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),hl=function(){this.Wr=void 0,this.listeners=[]},dl=function(){this.queries=new wu((function(e){return io(e)}),ro),this.onlineState="Unknown",this.Gr=new Set};function pl(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:if(n=Mr(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new hl),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return u=s.sent(),c=ul(u,"Initialization of query '"+oo(t.query)+"' failed"),[2,void t.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&vl(n),[2]}}))}))}function ml(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a;return s(this,(function(s){return n=Mr(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function yl(e,t){for(var n=Mr(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&vl(n)}function gl(e,t,n){var r=Mr(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function vl(e){e.Gr.forEach((function(e){e.next()}))}var bl=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new fl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),wl=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),_l=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return Ta(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?Oa(this.R,e.document,!1):ki.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return Sa(e)},e}();!function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=function(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(e)}e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new _l(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||oa()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i;return s(this,(function(o){switch(o.label){case 0:return[4,Zu(this.localStore,new _l(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Ju(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Du(Object.assign({},this.progress),e))]}}))}))}}();var El=function(e){this.key=e},Sl=function(e){this.key=e},Il=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=oa(),this.mutatedKeys=oa(),this.lo=so(e),this.fo=new cl(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new ll,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Gi(this.query)&&i.size===this.query.limit?i.last():null,c=Qi(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=ao(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.yo(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.lo(f,u)>0||c&&n.lo(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(a=a.add(f),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),Gi(this.query)||Qi(this.query))for(;a.size>this.query.limit;){var l=Gi(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Or()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new fl(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ll,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=oa(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new Sl(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new El(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=oa();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return fl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),kl=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Cl=function(e){this.key=e,this.bo=!1},Tl=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new wu((function(e){return io(e)}),ro),this.Vo=new Map,this.So=new Set,this.Do=new Wo(ui.comparator),this.Co=new Map,this.No=new tc,this.xo={},this.ko=new Map,this.Fo=uu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function Al(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return n=rf(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Ku(n.localStore,to(t))];case 2:return a=s.sent(),u=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,xl(n,t,r,"current"===u)];case 3:i=s.sent(),n.isPrimaryClient&&Uc(n.remoteStore,a),s.label=4;case 4:return[2,i]}}))}))}function xl(e,t,n,r){return a(this,void 0,void 0,(function(){var i,o,u,c,l,f;return s(this,(function(h){switch(h.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return a(this,void 0,void 0,(function(){var i,o,a;return s(this,(function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,$u(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(ql(e,t.targetId,a.To),a.snapshot)]}}))}))}(e,t,n,r)},[4,$u(e.localStore,t,!0)];case 1:return i=h.sent(),o=new Il(t,i.Bn),u=o._o(i.documents),c=ca.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=o.applyChanges(u,e.isPrimaryClient,c),ql(e,n,l.To),f=new kl(t,n,o),[2,(e.Po.set(t,f),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),l.snapshot)]}}))}))}function Pl(e,t){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return n=Mr(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!ro(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Wu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Fc(n.remoteStore,r.targetId),Vl(n,r.targetId)})).catch(du)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Vl(n,r.targetId),[4,Wu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Rl(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,a;return s(this,(function(s){switch(s.label){case 0:r=of(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(e,t){var n,r=Mr(e),i=jr.now(),o=t.reduce((function(e,t){return e.add(t.key)}),oa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=No(c,n.get(c.key));null!=l&&a.push(new Lo(c.key,l,Ii(l.value.mapValue),To.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(r.localStore,t)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new Wo(Ur)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,Xl(r,i.changes)];case 3:return s.sent(),[4,Yc(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=ul(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Nl(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:n=Mr(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zu(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(Dr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?Dr(r.bo):e.removedDocuments.size>0&&(Dr(r.bo),r.bo=!1))})),[4,Xl(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,du(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ol(e,t,n){var r=Mr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Mr(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&vl(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Dl(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c;return s(this,(function(s){switch(s.label){case 0:return(r=Mr(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new Wo(ui.comparator)).insert(o,ki.newNoDocument(o,qr.min())),u=oa().add(o),c=new ua(qr.min(),new Map,new Qo(Ur),a,u),[4,Nl(r,c)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),Hl(r),[3,4];case 2:return[4,Wu(r.localStore,t,!1).then((function(){return Vl(r,t,n)})).catch(du)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}function Ml(e,t){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:n=Mr(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,ju(n.localStore,t)];case 2:return i=o.sent(),Fl(n,r,null),Ul(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Xl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ll(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:r=Mr(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=Mr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return Dr(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(r.localStore,t)];case 2:return i=o.sent(),Fl(r,t,n),Ul(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Xl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Bl(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a;return s(this,(function(s){switch(s.label){case 0:Hc((n=Mr(e)).remoteStore)||xr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(e){var t=Mr(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=ul(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}}))}))}function Ul(e,t){(e.ko.get(t)||[]).forEach((function(e){e.resolve()})),e.ko.delete(t)}function Fl(e,t,n){var r=Mr(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Vl(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||jl(e,t)}))}function jl(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(Fc(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Hl(e))}function ql(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof El?(e.No.addReference(o.key,t),zl(e,o)):o instanceof Sl?(xr("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||jl(e,o.key)):Or()}}function zl(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(xr("SyncEngine","New document in limbo: "+n),e.So.add(r),Hl(e))}function Hl(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new ui(Wr.fromString(t)),r=e.Fo.next();e.Co.set(r,new Cl(n)),e.Do=e.Do.insert(n,r),Uc(e.remoteStore,new Ds(to($i(n.path)),r,2,Ir.o))}}function Xl(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,u;return s(this,(function(c){switch(c.label){case 0:return r=Mr(e),i=[],o=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,a){u.push(r.Oo(a,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=Lu.Pn(a.targetId,e);o.push(t)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(i),[4,function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l,f;return s(this,(function(s){switch(s.label){case 0:n=Mr(e),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ws.forEach(t,(function(t){return ws.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return ws.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return s.sent(),[3,4];case 3:if(!ks(r=s.sent()))throw r;return xr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],u=a.targetId,a.fromCache||(c=n.kn.get(u),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),n.kn=n.kn.insert(u,f));return[2]}}))}))}(r.localStore,o)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Kl(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return(n=Mr(e)).currentUser.isEqual(t)?[3,3]:(xr("SyncEngine","User change. New user:",t.toKey()),[4,Vu(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.ko.forEach((function(e){e.forEach((function(e){e.reject(new Cr(kr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Xl(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Wl(e,t){var n=Mr(e),r=n.Co.get(t);if(r&&r.bo)return oa().add(r.key);var i=oa(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function $l(e,t){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return[4,$u((n=Mr(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&ql(n,t.targetId,i.To),i)]}}))}))}function Gl(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){return[2,Qu((t=Mr(e)).localStore).then((function(e){return Xl(t,e)}))]}))}))}function Ql(e,t,n,r){return a(this,void 0,void 0,(function(){var i,o;return s(this,(function(a){switch(a.label){case 0:return[4,function(e,t){var n=Mr(e),r=Mr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):ws.resolve(null)}))}))}((i=Mr(e)).localStore,t)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Yc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Fl(i,t,r||null),Ul(i,t),function(e,t){Mr(Mr(e)._n).Gt(t)}(i.localStore,t)):Or(),a.label=4;case 4:return[4,Xl(i,o)];case 5:return a.sent(),[3,7];case 6:xr("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}}))}))}function Yl(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l;return s(this,(function(s){switch(s.label){case 0:return rf(n=Mr(e)),of(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Zl(n,r.toArray())]);case 1:return i=s.sent(),n.$o=!0,[4,il(n.remoteStore,!0)];case 2:for(s.sent(),o=0,a=i;o<a.length;o++)u=a[o],Uc(n.remoteStore,u);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Vl(n,t),Wu(n.localStore,t,!0)})),Fc(n.remoteStore,t)})),[4,l]);case 4:return s.sent(),[4,Zl(n,c)];case 5:return s.sent(),function(e){var t=Mr(e);t.Co.forEach((function(e,n){Fc(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new Wo(ui.comparator)}(n),n.$o=!1,[4,il(n.remoteStore,!1)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))}function Zl(e,t,n){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u,c,l,f,h,d,p,m,y;return s(this,(function(s){switch(s.label){case 0:n=Mr(e),r=[],i=[],o=0,a=t,s.label=1;case 1:return o<a.length?(u=a[o],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,Ku(n.localStore,to(l[0]))]:[3,7]):[3,13];case 2:c=s.sent(),f=0,h=l,s.label=3;case 3:return f<h.length?(d=h[f],p=n.Po.get(d),[4,$l(n,p)]):[3,6];case 4:(m=s.sent()).snapshot&&i.push(m.snapshot),s.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Gu(n.localStore,u)];case 8:return y=s.sent(),[4,Ku(n.localStore,y)];case 9:return c=s.sent(),[4,xl(n,Jl(y),u,!1)];case 10:s.sent(),s.label=11;case 11:r.push(c),s.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Jl(e){return Wi(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ef(e){var t=Mr(e);return Mr(Mr(t.localStore).persistence).fn()}function tf(e,t,n,r){return a(this,void 0,void 0,(function(){var i,o,a;return s(this,(function(s){switch(s.label){case 0:return(i=Mr(e)).$o?(xr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qu(i.localStore)];case 3:return o=s.sent(),a=ua.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Xl(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Wu(i.localStore,t,!0)];case 6:return s.sent(),Vl(i,t,r),[3,8];case 7:Or(),s.label=8;case 8:return[2]}}))}))}function nf(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u,c,l,f,h,d;return s(this,(function(p){switch(p.label){case 0:if(!(r=rf(e)).$o)return[3,10];i=0,o=t,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(xr("SyncEngine","Adding an already active target "+a),[3,5]):[4,Gu(r.localStore,a)]):[3,6];case 2:return u=p.sent(),[4,Ku(r.localStore,u)];case 3:return c=p.sent(),[4,xl(r,Jl(u),c.targetId,!1)];case 4:p.sent(),Uc(r.remoteStore,c),p.label=5;case 5:return i++,[3,1];case 6:l=function(e){return s(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,Wu(r.localStore,e,!1).then((function(){Fc(r.remoteStore,e),Vl(r,e)})).catch(du)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},f=0,h=n,p.label=7;case 7:return f<h.length?(d=h[f],[5,l(d)]):[3,10];case 8:p.sent(),p.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function rf(e){var t=Mr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dl.bind(null,t),t.vo._r=yl.bind(null,t.eventManager),t.vo.Mo=gl.bind(null,t.eventManager),t}function of(e){var t=Mr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ml.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ll.bind(null,t),t}var af=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.R=Ac(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return Fu(this.persistence,new Bu,e.initialUser,this.R)},e.prototype.qo=function(e){return new sc(cc.bs,this.R)},e.prototype.Bo=function(e){return new wc},e.prototype.terminate=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),sf=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return o(t,e),t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,Yu(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,t)];case 3:return r.sent(),[4,of(this.Qo.syncEngine)];case 4:return r.sent(),[4,Yc(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},t.prototype.Ko=function(e){return Fu(this.persistence,new Bu,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new yu(t,e.asyncQueue)},t.prototype.qo=function(e){var t=Ou(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?eu.withCacheSize(this.cacheSizeBytes):eu.DEFAULT;return new Pu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Cc(),Tc(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new wc},t}(af),uf=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return o(t,e),t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){var n,r=this;return s(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof bc?(this.sharedClientState.syncEngine={ui:Ql.bind(null,n),ai:tf.bind(null,n),hi:nf.bind(null,n),fn:ef.bind(null,n),ci:Gl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return a(r,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Yl(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=Cc();if(!bc.yt(t))throw new Cr(kr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ou(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bc(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(sf),cf=function(){function e(){}return e.prototype.initialize=function(e,t){return a(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ol(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Kl.bind(null,this.syncEngine),[4,il(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new dl},e.prototype.createDatastore=function(e){var t,n=Ac(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new kc(t));return function(e,t,n){return new Oc(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ol(a.syncEngine,e,0)},o=Ec.yt()?new Ec:new _c,new Mc(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new Tl(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Mr(e),xr("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,Bc(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}(),lf=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),ff=(function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new bs,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return a(this,void 0,void 0,(function(){var e,t,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new wl(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))}}(),function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Cr(kr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return n=Mr(e),r=Pa(n.R)+"/documents",i={documents:t.map((function(e){return Ca(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=s.sent(),a=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){Dr(!!t.found),t.found.name,t.found.updateTime;var n=Ta(e,t.found.name),r=Sa(t.found.updateTime),i=new Si({mapValue:{fields:t.found.fields}});return ki.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Dr(!!t.missing),Dr(!!t.readTime);var n=Ta(e,t.missing),r=Sa(t.readTime);return ki.newNoDocument(n,r)}(e,t):Or()}(n.R,e);a.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=a.get(e.toString());Dr(!!t),u.push(t)})),u)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new qo(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=ui.fromPath(n);t.mutations.push(new zo(r,t.precondition(r)))})),[4,function(e,t){return a(this,void 0,void 0,(function(){var n,r,i;return s(this,(function(o){switch(o.label){case 0:return n=Mr(e),r=Pa(n.R)+"/documents",i={writes:t.map((function(e){return Da(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Or();t=qr.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Cr(kr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?To.updateTime(t):To.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qr.min()))throw new Cr(kr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return To.updateTime(t)}return To.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}()),hf=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new xc(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return a(e,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){return e=new ff(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!oi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Xo(t)}return!1},e}(),df=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=lc.UNAUTHENTICATED,this.clientId=Br.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return a(r,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return xr("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Cr(kr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return a(e,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=ul(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();function pf(e,t){return a(this,void 0,void 0,(function(){var n,r,i=this;return s(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),xr("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return a(i,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,Vu(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function mf(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,yf(e)];case 1:return n=i.sent(),xr("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return(n=Mr(e)).asyncQueue.verifyOperationInProgress(),xr("RemoteStore","RemoteStore received new credentials"),r=Hc(n),n.Or.add(3),[4,Bc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,Lc(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function yf(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(xr("FirestoreClient","Using default OfflineComponentProvider"),[4,pf(e,new af)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function gf(e){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(xr("FirestoreClient","Using default OnlineComponentProvider"),[4,mf(e,new cf)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function vf(e){return yf(e).then((function(e){return e.persistence}))}function bf(e){return yf(e).then((function(e){return e.localStore}))}function wf(e){return gf(e).then((function(e){return e.remoteStore}))}function _f(e){return gf(e).then((function(e){return e.syncEngine}))}function Ef(e){return a(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,gf(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=Al.bind(null,t.syncEngine),n.onUnlisten=Pl.bind(null,t.syncEngine),n)]}}))}))}function Sf(e,t,n){var r=this;void 0===n&&(n={});var i=new bs;return e.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new lf({next:function(o){t.enqueueAndForget((function(){return ml(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Cr(kr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Cr(kr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new bl($i(n.path),o,{includeMetadataChanges:!0,so:!0});return pl(e,a)},[4,Ef(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function If(e,t,n){var r=this;void 0===n&&(n={});var i=new bs;return e.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new lf({next:function(n){t.enqueueAndForget((function(){return ml(e,a)})),n.fromCache&&"server"===r.source?i.reject(new Cr(kr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new bl(n,o,{includeMetadataChanges:!0,so:!0});return pl(e,a)},[4,Ef(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var kf=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Cf=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Tf=new Map,Af=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},xf=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(lc.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Pf=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Rf=function(){function e(e){var t=this;this.currentUser=lc.UNAUTHENTICATED,this.oc=new bs,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){xr("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(xr("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(xr("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Dr("string"==typeof n.accessToken),new Af(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return a(n,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return Dr(null===e||"string"==typeof e),new lc(e)},e}(),Nf=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=lc.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),Of=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new Nf(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(lc.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Df(e,t,n){if(!n)throw new Cr(kr.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Mf(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Cr(kr.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Lf(e,t,n,r){if(!0===t&&!0===r)throw new Cr(kr.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Bf(e){if(!ui.isDocumentKey(e))throw new Cr(kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Uf(e){if(ui.isDocumentKey(e))throw new Cr(kr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Ff(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":Or()}function Vf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Cr(kr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ff(e);throw new Cr(kr.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function jf(e,t){if(t<=0)throw new Cr(kr.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var qf=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Cr(kr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Cr(kr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Lf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),zf=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qf({}),this._settingsFrozen=!1,e instanceof Cf?(this._databaseId=e,this._credentials=new xf):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Cr(kr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cf(e.options.projectId)}(e),this._credentials=new Rf(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new Cr(kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new Cr(kr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qf(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new xf;switch(e.type){case"gapi":var t=e.client;return Dr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Of(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Cr(kr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return(e=Tf.get(this))&&(xr("ComponentProvider","Removing Datastore"),Tf.delete(this),e.terminate()),Promise.resolve();var e},e}(),Hf=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Kf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Xf=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Kf=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,$i(r))||this)._path=r,i.type="collection",i}return o(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Hf(this.firestore,null,new ui(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Xf);function Wf(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,c.m9)(e),Df("collection","path",t),e instanceof zf)return Uf(n=Wr.fromString.apply(Wr,u([t],r))),new Kf(e,null,n);if(!(e instanceof Hf||e instanceof Kf))throw new Cr(kr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Uf(n=Wr.fromString.apply(Wr,u([e.path],r)).child(Wr.fromString(t))),new Kf(e.firestore,null,n)}function $f(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,c.m9)(e),1===arguments.length&&(t=Br.u()),Df("doc","path",t),e instanceof zf)return Bf(n=Wr.fromString.apply(Wr,u([t],r))),new Hf(e,null,new ui(n));if(!(e instanceof Hf||e instanceof Kf))throw new Cr(kr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bf(n=e._path.child(Wr.fromString.apply(Wr,u([t],r)))),new Hf(e.firestore,e instanceof Kf?e.converter:null,new ui(n))}function Gf(e,t){return e=(0,c.m9)(e),t=(0,c.m9)(t),(e instanceof Hf||e instanceof Kf)&&(t instanceof Hf||t instanceof Kf)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qf(e,t){return e=(0,c.m9)(e),t=(0,c.m9)(t),e instanceof Xf&&t instanceof Xf&&e.firestore===t.firestore&&ro(e._query,t._query)&&e.converter===t.converter}var Yf=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new xc(this,"async_queue_retry"),this.Ic=function(){var t=Tc();t&&xr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=Tc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=Tc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new bs;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},e.prototype.bc=function(){return a(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ks(e=n.sent()))throw e;return xr("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=sl.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)}));return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&Or()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function Zf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}!function(){function e(){this._progressObserver={},this._taskCompletionResolver=new bs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Jf=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Yf,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return o(t,e),t.prototype._terminate=function(){return this._firestoreClient||th(this),this._firestoreClient.terminate()},t}(zf);function eh(e){return e._firestoreClient||th(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function th(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new kf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new df(e._credentials,e._queue,r)}function nh(e,t,n){var r=this,i=new bs;return e.asyncQueue.enqueue((function(){return a(r,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,pf(e,n)];case 1:return o.sent(),[4,mf(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===kr.FAILED_PRECONDITION||e.code===kr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function rh(e){if(e._initialized||e._terminated)throw new Cr(kr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ih=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new Cr(kr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),oh=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(Yr.fromBase64String(t))}catch(t){throw new Cr(kr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(Yr.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),ah=function(e){this._methodName=e},sh=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new Cr(kr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Cr(kr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return Ur(this._lat,e._lat)||Ur(this._long,e._long)},e}(),uh=/^__.*__$/,ch=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new Lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mo(e,this.data,t,this.fieldTransforms)},e}(),lh=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new Lo(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function fh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Or()}}var hh=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(e){return Nh(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(fh(this.Nc)&&uh.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),dh=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||Ac(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new hh({Nc:e,methodName:t,qc:n,path:Gr.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function ph(e){var t=e._freezeSettings(),n=Ac(e._databaseId);return new dh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mh(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);Ah("Data must be an object, but it was:",a,r);var s,u,c=Ch(r,a);if(o.merge)s=new Qr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],f=0,h=o.mergeFields;f<h.length;f++){var d=xh(t,h[f],n);if(!a.contains(d))throw new Cr(kr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Oh(l,d)||l.push(d)}s=new Qr(l),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new ch(new Si(c),s,u)}var yh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(ah);function gh(e,t,n){return new hh({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var vh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._toFieldTransform=function(e){return new ko(e.path,new go)},t.prototype.isEqual=function(e){return e instanceof t},t}(ah),bh=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return o(t,e),t.prototype._toFieldTransform=function(e){var t=gh(this,e,!0),n=this.Kc.map((function(e){return kh(e,t)})),r=new vo(n);return new ko(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ah),wh=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return o(t,e),t.prototype._toFieldTransform=function(e){var t=gh(this,e,!0),n=this.Kc.map((function(e){return kh(e,t)})),r=new wo(n);return new ko(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ah),_h=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return o(t,e),t.prototype._toFieldTransform=function(e){var t=new Eo(e.R,fo(e.R,this.Qc));return new ko(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(ah);function Eh(e,t,n,r){var i=e.Uc(1,t,n);Ah("Data must be an object, but it was:",i,r);var o=[],a=Si.empty();Hr(r,(function(e,r){var s=Rh(t,e,n);r=(0,c.m9)(r);var u=i.Oc(s);if(r instanceof yh)o.push(s);else{var l=kh(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new Qr(o);return new lh(a,s,i.fieldTransforms)}function Sh(e,t,n,r,i,o){var a=e.Uc(1,t,n),s=[xh(t,r,n)],u=[i];if(o.length%2!=0)throw new Cr(kr.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(xh(t,o[l])),u.push(o[l+1]);for(var f=[],h=Si.empty(),d=s.length-1;d>=0;--d)if(!Oh(f,s[d])){var p=s[d],m=u[d];m=(0,c.m9)(m);var y=a.Oc(p);if(m instanceof yh)f.push(p);else{var g=kh(m,y);null!=g&&(f.push(p),h.set(p,g))}}var v=new Qr(f);return new lh(h,v,a.fieldTransforms)}function Ih(e,t,n,r){return void 0===r&&(r=!1),kh(n,e.Uc(r?4:3,t))}function kh(e,t){if(Th(e=(0,c.m9)(e)))return Ah("Unsupported field value:",t,e),Ch(e,t);if(e instanceof ah)return function(e,t){if(!fh(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=kh(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fo(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=jr.fromDate(e);return{timestampValue:wa(t.R,n)}}if(e instanceof jr)return n=new jr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:wa(t.R,n)};if(e instanceof sh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof oh)return{bytesValue:_a(t.R,e._byteString)};if(e instanceof Hf){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ia(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+Ff(e))}(e,t)}function Ch(e,t){var n={};return Xr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hr(e,(function(e,r){var i=kh(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Th(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jr||e instanceof sh||e instanceof oh||e instanceof Hf||e instanceof ah)}function Ah(e,t,n){if(!Th(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ff(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function xh(e,t,n){if((t=(0,c.m9)(t))instanceof ih)return t._internalPath;if("string"==typeof t)return Rh(e,t);throw Nh("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Ph=new RegExp("[~\\*/\\[\\]]");function Rh(e,t,n){if(t.search(Ph)>=0)throw Nh("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(ih.bind.apply(ih,u([void 0],t.split(".")))))._internalPath}catch(r){throw Nh("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Nh(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Cr(kr.INVALID_ARGUMENT,(s+=". ")+e+u)}function Oh(e,t){return e.some((function(e){return e.isEqual(t)}))}var Dh=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Hf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new Mh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(Lh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),Mh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Dh);function Lh(e,t){return"string"==typeof t?Rh(e,t):t instanceof ih?t._internalPath:t._delegate._internalPath}var Bh=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Uh=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return o(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(Lh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(Dh),Fh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Uh),Vh=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Bh(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Fh(n._firestore,n._userDataWriter,r.key,r,new Bh(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Cr(kr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Fh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Fh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:jh(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function jh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Or()}}function qh(e,t){return e instanceof Uh&&t instanceof Uh?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Vh&&t instanceof Vh&&e._firestore===t._firestore&&Qf(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function zh(e){if(Qi(e)&&0===e.explicitOrderBy.length)throw new Cr(kr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hh=function(){};function Xh(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Kh=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return o(t,e),t.prototype._apply=function(e){var t=ph(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Cr(kr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Jh(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var f=l[c];u.push(Zh(r,e,f))}s={arrayValue:{values:u}}}else s=Zh(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jh(a,o),s=Ih(n,"where",a,"in"===o||"not-in"===o);var h=Ri.create(i,o,s);return function(e,t){if(t.g()){var n=Zi(e);if(null!==n&&!n.isEqual(t.field))throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Yi(e);null!==r&&ed(0,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Cr(kr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Cr(kr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Xf(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Hh),Wh=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return o(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new qi(t,n);return function(e,t){if(null===Yi(e)){var n=Zi(e);null!==n&&ed(0,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new Xf(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ki(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Hh),$h=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return o(t,e),t.prototype._apply=function(e){return new Xf(e.firestore,e.converter,no(e._query,this.Hc,this.Jc))},t}(Hh),Gh=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return o(t,e),t.prototype._apply=function(e){var t=Yh(e,this.type,this.Yc,this.Xc);return new Xf(e.firestore,e.converter,function(e,t){return new Ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Hh),Qh=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return o(t,e),t.prototype._apply=function(e){var t=Yh(e,this.type,this.Yc,this.Xc);return new Xf(e.firestore,e.converter,function(e,t){return new Ki(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Hh);function Yh(e,t,n,r){if(n[0]=(0,c.m9)(n[0]),n[0]instanceof Dh)return function(e,t,n,r,i){if(!r)throw new Cr(kr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=eo(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(yi(t,r.key));else{var c=r.data.field(u.field);if(ni(c))throw new Cr(kr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Vi(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ph(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new Cr(kr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ji(e)&&-1!==c.indexOf("/"))throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(Wr.fromString(c));if(!ui.isDocumentKey(l))throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var f=new ui(l);s.push(yi(t,f))}else{var h=Ih(n,r,c);s.push(h)}}return new Vi(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function Zh(e,t,n){if("string"==typeof(n=(0,c.m9)(n))){if(""===n)throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ji(t)&&-1!==n.indexOf("/"))throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Wr.fromString(n));if(!ui.isDocumentKey(r))throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return yi(e,new ui(r))}if(n instanceof Hf)return yi(e,n._key);throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ff(n)+".")}function Jh(e,t){if(!Array.isArray(e)||0===e.length)throw new Cr(kr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Cr(kr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function ed(e,t,n){if(!n.isEqual(t))throw new Cr(kr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var td=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Or()}},e.prototype.convertObject=function(e,t){var n=this,r={};return Hr(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new sh(ei(e.latitude),ei(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=ri(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ii(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=Jr(e);return new jr(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=Wr.fromString(e);Dr(Ga(n));var r=new Cf(n.get(1),n.get(3)),i=new ui(n.popFirst(5));return r.isEqual(t)||Pr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function nd(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var rd=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return o(t,e),t.prototype.convertBytes=function(e){return new oh(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hf(this.firestore,null,t)},t}(td),id=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ph(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=od(e,this._firestore),i=nd(r.converter,t,n),o=mh(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,To.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=od(e,this._firestore);return o="string"==typeof(t=(0,c.m9)(t))||t instanceof ih?Sh(this._dataReader,"WriteBatch.update",a._key,t,n,r):Eh(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,To.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=od(e,this._firestore);return this._mutations=this._mutations.concat(new qo(t._key,To.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new Cr(kr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function od(e,t){if((e=(0,c.m9)(e)).firestore!==t)throw new Cr(kr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ad=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return o(t,e),t.prototype.convertBytes=function(e){return new oh(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hf(this.firestore,null,t)},t}(td);function sd(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Vf(e,Hf);var o=Vf(e.firestore,Jf),a=ph(o);return cd(o,[("string"==typeof(t=(0,c.m9)(t))||t instanceof ih?Sh(a,"updateDoc",e._key,t,n,r):Eh(a,"updateDoc",e._key,t)).toMutation(e._key,To.exists(!0))])}function ud(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=(0,c.m9)(e);var u={includeMetadataChanges:!1},l=0;"object"!=typeof i[l]||Zf(i[l])||(u=i[l],l++);var f,h,d,p={includeMetadataChanges:u.includeMetadataChanges};if(Zf(i[l])){var m=i[l];i[l]=null===(t=m.next)||void 0===t?void 0:t.bind(m),i[l+1]=null===(n=m.error)||void 0===n?void 0:n.bind(m),i[l+2]=null===(r=m.complete)||void 0===r?void 0:r.bind(m)}if(e instanceof Hf)h=Vf(e.firestore,Jf),d=$i(e._key.path),f={next:function(t){i[l]&&i[l](ld(h,e,t))},error:i[l+1],complete:i[l+2]};else{var y=Vf(e,Xf);h=Vf(y.firestore,Jf),d=y._query;var g=new ad(h);f={next:function(e){i[l]&&i[l](new Vh(h,g,y,e))},error:i[l+1],complete:i[l+2]},zh(e._query)}return function(e,t,n,r){var i=this,o=new lf(r),u=new bl(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=pl,[4,Ef(e)];case 1:return[2,t.apply(void 0,[n.sent(),u])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=ml,[4,Ef(e)];case 1:return[2,t.apply(void 0,[n.sent(),u])]}}))}))}))}}(eh(h),d,p,f)}function cd(e,t){return function(e,t){var n=this,r=new bs;return e.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=Rl,[4,_f(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(eh(e),t)}function ld(e,t,n){var r=n.docs.get(t._key),i=new ad(e);return new Uh(e,i,t._key,r,new Bh(n.hasPendingWrites,n.fromCache),t.converter)}var fd=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return o(t,e),t.prototype.get=function(t){var n=this,r=od(t,this._firestore),i=new ad(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Uh(n._firestore,i,r._key,e._document,new Bh(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=ph(e)}return e.prototype.get=function(e){var t=this,n=od(e,this._firestore),r=new rd(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Or();var i=e[0];if(i.isFoundDocument())return new Dh(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Dh(t._firestore,r,n._key,null,n.converter);throw Or()}))},e.prototype.set=function(e,t,n){var r=od(e,this._firestore),i=nd(r.converter,t,n),o=mh(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=od(e,this._firestore);return o="string"==typeof(t=(0,c.m9)(t))||t instanceof ih?Sh(this._dataReader,"Transaction.update",a._key,t,n,r):Eh(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=od(e,this._firestore);return this._transaction.delete(t._key),this},e}());function hd(){if("undefined"==typeof Uint8Array)throw new Cr(kr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function dd(){if("undefined"==typeof atob)throw new Cr(kr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var pd=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return dd(),new e(oh.fromBase64String(t))},e.fromUint8Array=function(t){return hd(),new e(oh.fromUint8Array(t))},e.prototype.toBase64=function(){return dd(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return hd(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),md=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){rh(e=Vf(e,Jf));var n=eh(e),r=e._freezeSettings(),i=new cf;return nh(n,i,new sf(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){rh(e=Vf(e,Jf));var t=eh(e),n=e._freezeSettings(),r=new cf;return nh(t,r,new uf(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new Cr(kr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new bs;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return a(t,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return Es.yt()?(t=e+"main",[4,Es.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ou(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),yd=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof Cf||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Rr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){var i;void 0===r&&(r={});var o=(e=Vf(e,zf))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Rr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=lc.MOCK_USER;else{a=(0,c.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Cr(kr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new lc(u)}e._credentials=new Pf(new Af(a,s))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return a(t,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,vf(e)];case 1:return t=r.sent(),[4,wf(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=Mr(e);return t.Or.delete(0),Lc(t)}(n))]}}))}))}))}(eh(Vf(this._delegate,Jf)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return a(t,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,vf(e)];case 1:return t=r.sent(),[4,wf(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return(t=Mr(e)).Or.add(0),[4,Bc(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(eh(Vf(this._delegate,Jf)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&Lf("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new bs;return e.asyncQueue.enqueueAndForget((function(){return a(t,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return t=Bl,[4,_f(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(eh(Vf(this._delegate,Jf)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new lf(t);return e.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=function(e,t){Mr(e).Gr.add(t),t.next()},[4,Ef(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=function(e,t){Mr(e).Gr.delete(t)},[4,Ef(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(eh(e=Vf(e,Jf)),Zf(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new Cr(kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Pd(this,Wf(this._delegate,e))}catch(e){throw Ed(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new _d(this,$f(this._delegate,e))}catch(e){throw Ed(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new Td(this,function(e,t){if(e=Vf(e,zf),Df("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Cr(kr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Xf(e,null,function(e){return new Ki(Wr.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Ed(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new bs;return e.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return[4,function(e){return gf(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new hf(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(eh(e),(function(n){return t(new fd(e,n))}))}(this._delegate,(function(n){return e(new vd(t,n))}))},e.prototype.batch=function(){var e=this;return eh(this._delegate),new bd(new id(this._delegate,(function(t){return cd(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new Cr(kr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new Cr(kr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),gd=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return o(t,e),t.prototype.convertBytes=function(e){return new pd(new oh(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return _d.eu(t,this.firestore,null)},t}(td),vd=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gd(e)}return e.prototype.get=function(e){var t=this,n=Rd(e);return this._delegate.get(n).then((function(e){return new kd(t._firestore,new Uh(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=Rd(e);return n?(Mf("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Rd(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,u([a,t,n],i)),this},e.prototype.delete=function(e){var t=Rd(e);return this._delegate.delete(t),this},e}(),bd=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=Rd(e);return n?(Mf("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Rd(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,u([a,t,n],i)),this},e.prototype.delete=function(e){var t=Rd(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),wd=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new Fh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cd(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new gd(t),n),i.set(n,o)),o},e}();wd.su=new WeakMap;var _d=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gd(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new Cr(kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Hf(n._delegate,r,new ui(t)))},e.eu=function(t,n,r){return new e(n,new Hf(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Pd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Pd(this.firestore,Wf(this._delegate,e))}catch(e){throw Ed(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=(0,c.m9)(e))instanceof Hf&&Gf(this._delegate,e)},e.prototype.set=function(e,t){t=Mf("DocumentReference.set",t);try{return function(e,t,n){e=Vf(e,Hf);var r=Vf(e.firestore,Jf),i=nd(e.converter,t,n);return cd(r,[mh(ph(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,To.none())])}(this._delegate,e,t)}catch(e){throw Ed(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?sd(this._delegate,e):sd.apply(void 0,u([this._delegate,e,t],n))}catch(e){throw Ed(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return cd(Vf((e=this._delegate).firestore,Jf),[new qo(e._key,To.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Sd(t),i=Id(t,(function(t){return new kd(e.firestore,new Uh(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return ud(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Vf(e,Hf);var t=Vf(e.firestore,Jf),n=eh(t),r=new ad(t);return function(e,t){var n=this,r=new bs;return e.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=Mr(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Cr(kr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ul(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,bf(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new Uh(t,r,e._key,n,new Bh(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Vf(e,Hf);var t=Vf(e.firestore,Jf);return Sf(eh(t),e._key,{source:"server"}).then((function(n){return ld(t,e,n)}))}(this._delegate):function(e){e=Vf(e,Hf);var t=Vf(e.firestore,Jf);return Sf(eh(t),e._key).then((function(n){return ld(t,e,n)}))}(this._delegate)).then((function(e){return new kd(t.firestore,new Uh(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(wd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function Ed(e,t,n){return e.message=e.message.replace(t,n),e}function Sd(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!Zf(r))return r}return{}}function Id(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Zf(e[0])?e[0]:Zf(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kd=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new _d(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return qh(this._delegate,e._delegate)},e}(),Cd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(kd),Td=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gd(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Xh(this._delegate,function(e,t,n){var r=t,i=Lh("where",e);return new Kh(i,r,n)}(t,n,r)))}catch(t){throw Ed(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Xh(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Lh("orderBy",e);return new Wh(r,n)}(t,n)))}catch(t){throw Ed(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Xh(this._delegate,function(e){return jf("limit",e),new $h("limit",e,"F")}(t)))}catch(t){throw Ed(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Xh(this._delegate,function(e){return jf("limitToLast",e),new $h("limitToLast",e,"L")}(t)))}catch(t){throw Ed(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xh(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Gh("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw Ed(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xh(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Gh("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw Ed(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xh(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Qh("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw Ed(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xh(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Qh("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw Ed(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return Qf(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Vf(e,Xf);var t=Vf(e.firestore,Jf),n=eh(t),r=new ad(t);return function(e,t){var n=this,r=new bs;return e.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o,a,u;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,$u(e,t,!0)];case 1:return u=s.sent(),r=new Il(t,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=s.sent(),u=ul(a,"Failed to execute query '"+t+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,bf(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new Vh(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Vf(e,Xf);var t=Vf(e.firestore,Jf),n=eh(t),r=new ad(t);return If(n,e._query,{source:"server"}).then((function(n){return new Vh(t,r,e,n)}))}(this._delegate):function(e){e=Vf(e,Xf);var t=Vf(e.firestore,Jf),n=eh(t),r=new ad(t);return zh(e._query),If(n,e._query).then((function(n){return new Vh(t,r,e,n)}))}(this._delegate)).then((function(e){return new xd(t.firestore,new Vh(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Sd(t),i=Id(t,(function(t){return new xd(e.firestore,new Vh(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return ud(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(wd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),Ad=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Cd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),xd=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new Td(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new Cd(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Ad(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Cd(n._firestore,r))}))},e.prototype.isEqual=function(e){return qh(this._delegate,e._delegate)},e}(),Pd=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return o(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new _d(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new _d(this.firestore,void 0===e?$f(this._delegate):$f(this._delegate,e))}catch(e){throw Ed(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=Vf(e.firestore,Jf),r=$f(e),i=nd(e.converter,t);return cd(n,[mh(ph(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,To.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new _d(t.firestore,e)}))},t.prototype.isEqual=function(e){return Gf(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(wd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(Td);function Rd(e){return Vf(e,Hf)}var Nd,Od=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(ih.bind.apply(ih,u([void 0],e)))}return e.documentId=function(){return new e(Gr.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=(0,c.m9)(e))instanceof ih&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),Dd=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new vh("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new yh("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new bh("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new wh("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new _h("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}(),Md=n(886),Ld={Firestore:yd,GeoPoint:sh,Timestamp:jr,Blob:pd,Transaction:vd,WriteBatch:bd,DocumentReference:_d,DocumentSnapshot:kd,Query:Td,QueryDocumentSnapshot:Cd,QuerySnapshot:xd,CollectionReference:Pd,FieldPath:Od,FieldValue:Dd,setLogLevel:function(e){var t;t=e,Tr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Md.wA("firestore",(function(e){return function(e,t){return new yd(e,new Jf(e,t),new md)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Ld)))})(Nd=r.Z),Nd.registerVersion("@firebase/firestore","2.4.0")},705:(e,t,n)=>{"use strict";n.r(t);var r=n(984),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;var c=n(852),l=n(886),f="firebasestorage.googleapis.com",h=function(e){function t(n,r){var i=e.call(this,d(n),"Firebase Storage: "+r+" ("+d(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._codeEquals=function(e){return d(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(c.ZR);function d(e){return"storage/"+e}function p(){return new h("unknown","An unknown error occurred, please check the error payload for server response.")}function m(){return new h("canceled","User canceled the upload/download.")}function y(){return new h("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function g(e){return new h("invalid-argument",e)}function v(){return new h("app-deleted","The Firebase app was deleted.")}function b(e){return new h("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function w(e,t){return new h("invalid-format","String does not match format '"+e+"': "+t)}function _(e){throw new h("internal-error","Internal error: "+e)}var E={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},S=function(e,t){this.data=e,this.contentType=t||null};function I(e,t){switch(e){case E.RAW:return new S(k(t));case E.BASE64:case E.BASE64URL:return new S(C(e,t));case E.DATA_URL:return new S((n=new A(t)).base64?C(E.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw w(E.DATA_URL,"Malformed data URL.")}return k(t)}(n.rest),new A(t).contentType)}var n;throw p()}function k(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function C(e,t){switch(e){case E.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw w(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case E.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw w(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw w(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var T,A=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw w(E.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=t[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=e.substring(e.indexOf(",")+1)},x={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function P(e){switch(e){case"running":case"pausing":case"canceling":return x.RUNNING;case"paused":return x.PAUSED;case"success":return x.SUCCESS;case"canceled":return x.CANCELED;case"error":default:return x.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(T||(T={}));var R=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=T.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=T.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=T.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw _("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw _("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw _("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw _("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),N=function(){function e(){}return e.prototype.createConnection=function(){return new R},e}(),O=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(n){return new e(t,"")}if(""===r.path)return r;throw new h("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===f?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],d=l.regex.exec(t);if(d){var p=d[l.indices.bucket],m=d[l.indices.path];m||(m=""),r=new e(p,m),l.postModify(r);break}}if(null==r)throw function(e){return new h("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),D=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function M(e){return"string"==typeof e||e instanceof String}function L(e){return B()&&e instanceof Blob}function B(){return"undefined"!=typeof Blob}function U(e,t,n,r){if(r<t)throw g("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw g("Invalid value for '"+e+"'. Expected "+n+" or less.")}function F(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null==n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function V(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}var j=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var f=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(e){o(e)}else null!==a?((r=p()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?v():m()):o(r=new h("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new q(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,o=null,a=!1,s=0;function c(){return 2===s}var l=!1;function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l||(l=!0,n.apply(null,e))}function h(t){o=setTimeout((function(){o=null,function(t,n){if(n)t(!1,new q(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===T.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new q(a,r))}else{var s=r.getErrorCode()===T.ABORT;t(!1,new q(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}(d,c())}),t)}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!l)if(e)f.call.apply(f,u([null,e],t));else{var r;c()||a?f.call.apply(f,u([null,e],t)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function m(e){p||(p=!0,l||(null!==o?(e||(s=2),clearTimeout(o),h(0)):e||(s=1)))}return h(0),setTimeout((function(){a=!0,m(!0)}),r),m}(0,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),q=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};function z(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function H(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=z();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(B())return new Blob(e);throw new h("unsupported-environment","This browser doesn't seem to support creating Blobs")}var X=function(){function e(e,t){var n=0,r="";L(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(L(this.data_)){var r=(i=this.data_,o=t,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new e(r)}var i,o,a;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(B()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(H.apply(null,r))}var i=t.map((function(e){return M(e)?I(E.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function K(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}function W(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function $(e,t){return t}var G=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||$},Q=null;function Y(){if(Q)return Q;var e=[];e.push(new G("bucket")),e.push(new G("generation")),e.push(new G("metageneration")),e.push(new G("name","fullPath",!0));var t=new G("name");t.xform=function(e,t){return function(e){return!M(e)||e.length<2?e:W(e)}(t)},e.push(t);var n=new G("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new G("timeCreated")),e.push(new G("updated")),e.push(new G("md5Hash",null,!0)),e.push(new G("cacheControl",null,!0)),e.push(new G("contentDisposition",null,!0)),e.push(new G("contentEncoding",null,!0)),e.push(new G("contentLanguage",null,!0)),e.push(new G("contentType",null,!0)),e.push(new G("metadata","customMetadata",!0)),Q=e}function Z(e,t,n){var r=K(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new O(n,r);return t._makeStorageReference(i)}})}(r,e),r}(e,r,n)}function J(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var ee=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function te(e){if(!e)throw p()}function ne(e,t){return function(n,r){var i=Z(e,r,t);return te(null!==i),i}}function re(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new h("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new h("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new h("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new h("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function ie(e){var t=re(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new h("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function oe(e,t,n){var r=F(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new ee(r,"GET",ne(e,n),i);return o.errorHandler=ie(t),o}function ae(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=F(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,u=new ee(a,"GET",function(e,t){return function(n,r){var i=function(e,t,n){var r=K(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new O(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=e._makeStorageReference(new O(t,l.name)),r.items.push(s)}return r}(e,t,r)}(e,t,r);return te(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=re(t),u}function se(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var ue=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function ce(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){te(!1)}return te(!!n&&-1!==(t||["active"]).indexOf(n)),n}var le=262144;var fe=function(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};function he(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var de=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Y(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=se(t,r,i),s={name:a.fullPath},u=F(o,e.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=J(a,n),f=e.maxUploadRetryTime,h=new ee(u,"POST",(function(e){var t;ce(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){te(!1)}return te(M(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=re(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new ee(n,"POST",(function(e){var t=ce(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){te(!1)}n||te(!1);var i=Number(n);return te(!isNaN(i)),new ue(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=re(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=le*this._chunkMultiplier,n=new ue(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=function(e,t,n,r,i,o,a,s){var u=new ue(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new h("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,d=f+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},m=r.slice(f,d);if(null===m)throw y();var g=t.maxUploadRetryTime,v=new ee(n,"POST",(function(e,n){var i,a=ce(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?ne(t,o)(e,n):null,new ue(s,c,"final"===a,i)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=s||null,v.errorHandler=re(e),v}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(t){return e._error=t,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){le*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=oe(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=se(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+J(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=X.getBlob(c,r,l);if(null===f)throw y();var h={name:u.fullPath},d=F(o,e.host),p=e.maxUploadRetryTime,m=new ee(d,"POST",ne(e,n),p);return m.urlParams=h,m.headers=a,m.body=f.uploadData(),m.errorHandler=re(t),m}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=m(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=P(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new fe(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(P(this._state)){case x.SUCCESS:he(this._resolve.bind(null,this.snapshot))();break;case x.CANCELED:case x.ERROR:he(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(P(this._state)){case x.RUNNING:case x.PAUSED:e.next&&he(e.next.bind(e,this.snapshot))();break;case x.SUCCESS:e.complete&&he(e.complete.bind(e))();break;case x.CANCELED:case x.ERROR:e.error&&he(e.error.bind(e,this._error))();break;default:e.error&&he(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),pe=function(){function e(e,t){this._service=e,this._location=t instanceof O?t:O.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new O(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return W(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new O(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw b(e)},e}();function me(e){var t={prefixes:[],items:[]};return ye(e,t).then((function(){return t}))}function ye(e,t,n){return a(this,void 0,void 0,(function(){var r,i,o;return s(this,(function(a){switch(a.label){case 0:return[4,ge(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,ye(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function ge(e,t){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&U("options.maxResults",1,1e3,t.maxResults),n=t||{},r=ae(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function ve(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=F(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new ee(r,"GET",function(e,t){return function(n,r){var i=Z(e,r,t);return te(null!==i),function(e,t,n){var r=K(t);if(null===r)return null;if(!M(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return F("/b/"+o(r)+"/o/"+o(i),n)+V({alt:"media",token:t})}))[0]}(i,r,e.host)}}(e,n),i);return o.errorHandler=ie(t),o}(e.storage,e._location,Y()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw new h("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function be(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new O(e._location.bucket,n);return new pe(e.storage,r)}function we(e){return/^[A-Za-z]+:\/\//.test(e)}function _e(e,t){if(e instanceof Ie){var n=e;if(null==n._bucket)throw new h("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new pe(n,n._bucket);return null!=t?_e(r,t):r}return void 0!==t?be(e,t):e}function Ee(e,t){if(t&&we(t)){if(e instanceof Ie)return new pe(e,t);throw g("To use ref(service, url), the first argument must be a Storage instance.")}return _e(e,t)}function Se(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:O.makeFromBucketSpec(n,e)}var Ie=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=f,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?O.makeFromBucketSpec(i,this._host):Se(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=O.makeFromBucketSpec(this._url,e):this._bucket=Se(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){U("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){U("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new pe(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new D(v());var i=function(e,t,n,r,i,o){var a=V(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new j(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();function ke(e,t){return Ee(e=(0,c.m9)(e),t)}var Ce,Te,Ae=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),xe=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Ae(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Ae(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new Ae(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Ae(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),Pe=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Re(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Re(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Re=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return be(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new xe(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new de(e,new X(t),n)}(e=(0,c.m9)(e),t,n)}(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=E.RAW),this._throwIfRoot("putString");var r=I(t,e),i=o({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new xe(new de(this._delegate,new X(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return function(e){return me(e=(0,c.m9)(e))}(this._delegate).then((function(t){return new Pe(t,e.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return ge(e=(0,c.m9)(e),t)}(this._delegate,e||void 0).then((function(e){return new Pe(e,t.storage)}))},e.prototype.getMetadata=function(){return function(e){return function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=oe(e.storage,e._location,Y()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=(0,c.m9)(e))}(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return function(e,t){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=F(t.fullServerUrl(),e.host),o=J(n,r),a=e.maxOperationRetryTime,s=new ee(i,"PATCH",ne(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ie(t),s}(e.storage,e._location,t,Y()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}(e=(0,c.m9)(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return function(e){return ve(e=(0,c.m9)(e))}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function(e){return function(e){return a(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=F(t.fullServerUrl(),e.host),r=e.maxOperationRetryTime,i=new ee(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ie(t),i}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=(0,c.m9)(e))}(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw b(e)},e}(),Ne=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(we(e))throw g("ref() expected a child path but got a URL, use refFromURL instead.");return new Re(ke(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!we(e))throw g("refFromURL() expected a full URL but got a child path, use ref() instead.");try{O.makeFromUrl(e,this._delegate.host)}catch(e){throw g("refFromUrl() expected a valid full URL but got an invalid one.")}return new Re(ke(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={}),function(e,t,n,r){void 0===r&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken="string"==typeof i?i:(0,c.Sg)(i,e.app.options.projectId))}(e,t,n,r)}(this._delegate,e,t,n)},e}();Ce=r.Z,Te={TaskState:x,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:E,Storage:Ie,Reference:Re},Ce.INTERNAL.registerComponent(new l.wA("storage",(function(e,t){var n=t.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Ne(i,new Ie(i,o,a,new N,n,r.Z.SDK_VERSION))}),"PUBLIC").setServiceProps(Te).setMultipleInstances(!0)),Ce.registerVersion("@firebase/storage","0.7.0")},679:(e,t,n)=>{"use strict";var r=n(296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var s=u(t),m=u(n),y=0;y<a.length;++y){var g=a[y];if(!(o[g]||r&&r[g]||m&&m[g]||s&&s[g])){var v=h(n,g);try{c(t,g,v)}catch(e){}}}}return t}},103:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case o:case s:case a:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case m:case u:return e;default:return t}}case i:return t}}}function E(e){return _(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=y,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=d,t.isAsyncMode=function(e){return E(e)||_(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===s||e===a||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g)},t.typeOf=_},296:(e,t,n)=>{"use strict";e.exports=n(103)},29:(e,t,n)=>{"use strict";let r,i;n.r(t),n.d(t,{deleteDB:()=>m,openDB:()=>p,unwrap:()=>d,wrap:()=>h});const o=new WeakMap,a=new WeakMap,s=new WeakMap,u=new WeakMap,c=new WeakMap;let l={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||s.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(d(this),e),h(o.get(this))}:function(...e){return h(t.apply(d(this),e))}:function(e,...n){const r=t.call(d(this),e,...n);return s.set(r,e.sort?e.sort():[e]),h(r)}:(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));a.set(e,t)}(e),n=e,(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,l):e);var t,n}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(h(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&o.set(t,e)})).catch((()=>{})),c.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),c.set(t,e)),t}const d=e=>c.get(e);function p(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=h(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(h(a.result),e.oldVersion,e.newVersion,h(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}function m(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),h(n).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],v=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=g.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return v.set(t,o),o}var w;w=l,l={...w,get:(e,t,n)=>b(e,t)||w.get(e,t,n),has:(e,t)=>!!b(e,t)||w.has(e,t)}},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,u=i(e),c=1;c<arguments.length;c++){for(var l in a=Object(arguments[c]))n.call(a,l)&&(u[l]=a[l]);if(t){s=t(a);for(var f=0;f<s.length;f++)r.call(a,s[f])&&(u[s[f]]=a[s[f]])}}return u}},703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},448:(e,t,n)=>{"use strict";var r=n(294),i=n(418),o=n(840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},m={};function y(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(m,e)||!d.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,S=60106,I=60107,k=60108,C=60114,T=60109,A=60110,x=60112,P=60113,R=60120,N=60115,O=60116,D=60121,M=60128,L=60129,B=60130,U=60131;if("function"==typeof Symbol&&Symbol.for){var F=Symbol.for;E=F("react.element"),S=F("react.portal"),I=F("react.fragment"),k=F("react.strict_mode"),C=F("react.profiler"),T=F("react.provider"),A=F("react.context"),x=F("react.forward_ref"),P=F("react.suspense"),R=F("react.suspense_list"),N=F("react.memo"),O=F("react.lazy"),D=F("react.block"),F("react.scope"),M=F("react.opaque.id"),L=F("react.debug_trace_mode"),B=F("react.offscreen"),U=F("react.legacy_hidden")}var V,j="function"==typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=j&&e[j]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var H=!1;function X(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return X(e.type,!1);case 11:return X(e.type.render,!1);case 22:return X(e.type._render,!1);case 1:return X(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case C:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case N:return W(e.type);case D:return W(e._render);case O:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function $(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function ce(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ye=(me=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Te=null,Ae=null;function xe(e){if(e=Jr(e)){if("function"!=typeof Ce)throw Error(a(280));var t=e.stateNode;t&&(t=ti(t),Ce(e.stateNode,e.type,t))}}function Pe(e){Te?Ae?Ae.push(e):Ae=[e]:Te=e}function Re(){if(Te){var e=Te,t=Ae;if(Ae=Te=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ne(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Me=Ne,Le=!1,Be=!1;function Ue(){null===Te&&null===Ae||(De(),Re())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=ti(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Ve=!1;if(f)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){Ve=!1}function qe(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var ze=!1,He=null,Xe=!1,Ke=null,We={onError:function(e){ze=!0,He=e}};function $e(e,t,n,r,i,o,a,s,u){ze=!1,He=null,qe.apply(We,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ye(e){if(Ge(e)!==e)throw Error(a(188))}function Ze(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ye(i),e;if(o===r)return Ye(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Je(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,ot=[],at=null,st=null,ut=null,ct=new Map,lt=new Map,ft=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=dt(t,n,r,i,o),null!==t&&null!==(t=Jr(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=Zr(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Jr(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=Jr(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&gt(at)&&(at=null),null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),ct.forEach(vt),lt.forEach(vt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function _t(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&wt(at,e),null!==st&&wt(st,e),null!==ut&&wt(ut,e),ct.forEach(t),lt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},It={},kt={};function Ct(e){if(It[e])return It[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in kt)return It[e]=n[t];return e}f&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var Tt=Ct("animationend"),At=Ct("animationiteration"),xt=Ct("animationstart"),Pt=Ct("transitionend"),Rt=new Map,Nt=new Map,Ot=["abort","abort",Tt,"animationEnd",At,"animationIteration",xt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Nt.set(r,t),Rt.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Mt=8;function Lt(e){if(0!=(1&e))return Mt=15,1;if(0!=(2&e))return Mt=14,2;if(0!=(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!=(32&e)?(Mt=11,32):0!=(t=192&e)?(Mt=10,t):0!=(256&e)?(Mt=9,256):0!=(t=3584&e)?(Mt=8,t):0!=(4096&e)?(Mt=7,4096):0!=(t=4186112&e)?(Mt=6,t):0!=(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!=(134217728&e)?(Mt=3,134217728):0!=(t=805306368&e)?(Mt=2,t):0!=(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Mt=15;else if(0!=(o=134217727&n)){var u=o&~a;0!==u?(r=Lt(u),i=Mt):0!=(s&=o)&&(r=Lt(s),i=Mt)}else 0!=(o=n&~a)?(r=Lt(o),i=Mt):0!==s&&(r=Lt(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Lt(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-zt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ft(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ft(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&0===(e=Vt(4186112&~t))&&(e=512),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Vt(e){return e&-e}function jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Xt|0)|0},Ht=Math.log,Xt=Math.LN2,Kt=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,$t=!0;function Gt(e,t,n,r){Le||De();var i=Yt,o=Le;Le=!0;try{Oe(i,e,t,n,r)}finally{(Le=o)||Ue()}}function Qt(e,t,n,r){Wt(Kt,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){var i;if($t)if((i=0==(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=dt(null,e,t,n,r),ot.push(e);else{var o=Zt(e,t,n,r);if(null===o)i&&pt(e,r);else{if(i){if(-1<ht.indexOf(e))return e=dt(o,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=mt(at,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return ut=mt(ut,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ct.set(o,mt(ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,lt.set(o,mt(lt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;pt(e,r)}Rr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=ke(r);if(null!==(i=Zr(i))){var o=Ge(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Qe(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Rr(e,t,r,i,n),null}var Jt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var un,cn,ln,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(fn),dn=i({},fn,{view:0,detail:0}),pn=sn(dn),mn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(un=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=un=0,ln=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),yn=sn(mn),gn=sn(i({},mn,{dataTransfer:0})),vn=sn(i({},dn,{relatedTarget:0})),bn=sn(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=sn(i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),_n=sn(i({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Cn(){return kn}var Tn=sn(i({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=sn(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=sn(i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nn=[9,13,27,32],On=f&&"CompositionEvent"in window,Dn=null;f&&"documentMode"in document&&(Dn=document.documentMode);var Mn=f&&"TextEvent"in window&&!Dn,Ln=f&&(!On||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),Un=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Pe(r),0<(t=Or(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Kn=null;function Wn(e){kr(e,0)}function $n(e){if(Y(ei(e)))return e}function Gn(e,t){if("change"===e)return t}var Qn=!1;if(f){var Yn;if(f){var Zn="oninput"in document;if(!Zn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Zn="function"==typeof Jn.oninput}Yn=Zn}else Yn=!1;Qn=Yn&&(!document.documentMode||9<document.documentMode)}function er(){Xn&&(Xn.detachEvent("onpropertychange",tr),Kn=Xn=null)}function tr(e){if("value"===e.propertyName&&$n(Kn)){var t=[];if(Hn(t,Kn,e,ke(e)),e=Wn,Le)e(t);else{Le=!0;try{Ne(e,t)}finally{Le=!1,Ue()}}}}function nr(e,t,n){"focusin"===e?(er(),Kn=n,(Xn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Kn)}function ir(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},sr=Object.prototype.hasOwnProperty;function ur(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!sr.call(t,n[r])||!ar(e[n[r]],t[n[r]]))return!1;return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pr=f&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==Z(r)||(r="selectionStart"in(r=mr)&&dr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Or(yr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Ot,2);for(var wr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<wr.length;_r++)Nt.set(wr[_r],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if($e.apply(this,arguments),ze){if(!ze)throw Error(a(198));var l=He;ze=!1,He=null,Xe||(Xe=!0,Ke=l)}}(r,t,void 0,e),e.currentTarget=null}function kr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Ir(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Ir(i,s,c),o=u}}}if(Xe)throw e=Ke,Xe=!1,Ke=null,e}function Cr(e,t){var n=ni(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Tr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Tr]||(e[Tr]=!0,s.forEach((function(t){Sr.has(t)||xr(t,!1,e,null),xr(t,!0,e,null)})))}function xr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ni(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Pr(o,e,i,t),a.add(s))}function Pr(e,t,n,r){var i=Nt.get(t);switch(void 0===i?2:i){case 0:i=Gt;break;case 1:i=Qt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Rr(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Zr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Be)return e();Be=!0;try{Me(e,t,n)}finally{Be=!1,Ue()}}((function(){var r=o,i=ke(n),a=[];e:{var s=Rt.get(e);if(void 0!==s){var u=hn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=vn;break;case"focusout":c="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=xn;break;case Tt:case At:case xt:u=bn;break;case Pt:u=Pn;break;case"scroll":u=pn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!=(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==h&&null!=(m=Fe(p,h))&&l.push(Nr(p,m,d))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!Zr(c)&&!c[Qr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Zr(c):null)&&(c!==(f=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,m="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ei(u),d=null==c?s:ei(c),(s=new l(m,p+"leave",u,n,i)).target=f,s.relatedTarget=d,m=null,Zr(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,m=l),f=m,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Dr(d))p++;for(d=0,m=h;m;m=Dr(m))d++;for(;0<p-d;)l=Dr(l),p--;for(;0<d-p;)h=Dr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Dr(l),h=Dr(h)}l=null}else l=null;null!==u&&Mr(a,s,u,l,!1),null!==c&&null!==f&&Mr(a,f,c,l,!0)}if("select"===(u=(s=r?ei(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Gn;else if(zn(s))if(Qn)y=or;else{y=rr;var g=nr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ir);switch(y&&(y=y(e,r))?Hn(a,y,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ei(r):window,e){case"focusin":(zn(g)||"true"===g.contentEditable)&&(mr=g,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(v=nn()):(en="value"in(Jt=i)?Jt.value:Jt.textContent,jn=!0)),0<(g=Or(r,b)).length&&(b=new _n(b,e,null,n,i),a.push({event:b,listeners:g}),(v||null!==(v=Vn(n)))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&Fn(e,t)?(e=nn(),tn=en=Jt=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&0<(r=Or(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v)}kr(a,t)}))}function Nr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Or(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Fe(e,n))&&r.unshift(Nr(e,o,i)),null!=(o=Fe(e,t))&&r.push(Nr(e,o,i))),e=e.return}return r}function Dr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Mr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Fe(n,o))&&a.unshift(Nr(n,u,s)):i||null!=(u=Fe(n,o))&&a.push(Nr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Lr(){}var Br=null,Ur=null;function Fr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jr="function"==typeof setTimeout?setTimeout:void 0,qr="function"==typeof clearTimeout?clearTimeout:void 0;function zr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Kr=0,Wr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Wr,Gr="__reactProps$"+Wr,Qr="__reactContainer$"+Wr,Yr="__reactEvents$"+Wr;function Zr(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[$r])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function Jr(e){return!(e=e[$r]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ti(e){return e[Gr]||null}function ni(e){var t=e[Yr];return void 0===t&&(t=e[Yr]=new Set),t}var ri=[],ii=-1;function oi(e){return{current:e}}function ai(e){0>ii||(e.current=ri[ii],ri[ii]=null,ii--)}function si(e,t){ii++,ri[ii]=e.current,e.current=t}var ui={},ci=oi(ui),li=oi(!1),fi=ui;function hi(e,t){var n=e.type.contextTypes;if(!n)return ui;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function di(e){return null!=e.childContextTypes}function pi(){ai(li),ai(ci)}function mi(e,t,n){if(ci.current!==ui)throw Error(a(168));si(ci,t),si(li,n)}function yi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,W(t)||"Unknown",o));return i({},n,r)}function gi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ui,fi=ci.current,si(ci,e),si(li,li.current),!0}function vi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=yi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,ai(li),ai(ci),si(ci,e)):ai(li),si(li,n)}var bi=null,wi=null,_i=o.unstable_runWithPriority,Ei=o.unstable_scheduleCallback,Si=o.unstable_cancelCallback,Ii=o.unstable_shouldYield,ki=o.unstable_requestPaint,Ci=o.unstable_now,Ti=o.unstable_getCurrentPriorityLevel,Ai=o.unstable_ImmediatePriority,xi=o.unstable_UserBlockingPriority,Pi=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Ni=o.unstable_IdlePriority,Oi={},Di=void 0!==ki?ki:function(){},Mi=null,Li=null,Bi=!1,Ui=Ci(),Fi=1e4>Ui?Ci:function(){return Ci()-Ui};function Vi(){switch(Ti()){case Ai:return 99;case xi:return 98;case Pi:return 97;case Ri:return 96;case Ni:return 95;default:throw Error(a(332))}}function ji(e){switch(e){case 99:return Ai;case 98:return xi;case 97:return Pi;case 96:return Ri;case 95:return Ni;default:throw Error(a(332))}}function qi(e,t){return e=ji(e),_i(e,t)}function zi(e,t,n){return e=ji(e),Ei(e,t,n)}function Hi(){if(null!==Li){var e=Li;Li=null,Si(e)}Xi()}function Xi(){if(!Bi&&null!==Mi){Bi=!0;var e=0;try{var t=Mi;qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(t){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ei(Ai,Hi),t}finally{Bi=!1}}}var Ki=_.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=oi(null),Gi=null,Qi=null,Yi=null;function Zi(){Yi=Qi=Gi=null}function Ji(e){var t=$i.current;ai($i),e.type._context._currentValue=t}function eo(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function to(e,t){Gi=e,Yi=Qi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Oa=!0),e.firstContext=null)}function no(e,t){if(Yi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Yi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qi){if(null===Gi)throw Error(a(308));Qi=t,Gi.dependencies={lanes:0,firstContext:t,responders:null}}else Qi=Qi.next=t;return e._currentValue}var ro=!1;function io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ao(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function so(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function co(e,t,n,r){var o=e.updateQueue;ro=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==a){for(h=o.baseState,s=0,f=l=c=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(u=t,d=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(u="function"==typeof(p=m.payload)?p.call(d,h,u):p))break e;h=i({},h,u);break e;case 2:ro=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===f&&(c=h),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=f,Ms|=s,e.lanes=s,e.memoizedState=h}}function lo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var fo=(new r.Component).refs;function ho(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=au(),i=su(e),o=ao(r,i);o.payload=t,null!=n&&(o.callback=n),so(e,o),uu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=au(),i=su(e),o=ao(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),so(e,o),uu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=au(),r=su(e),i=ao(n,r);i.tag=2,null!=t&&(i.callback=t),so(e,i),uu(e,r,n)}};function mo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&ur(n,r)&&ur(i,o))}function yo(e,t,n){var r=!1,i=ui,o=t.contextType;return"object"==typeof o&&null!==o?o=no(o):(i=di(t)?fi:ci.current,o=(r=null!=(r=t.contextTypes))?hi(e,i):ui),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function go(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function vo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=fo,io(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=no(o):(o=di(t)?fi:ci.current,i.context=hi(e,o)),co(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(ho(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&po.enqueueReplaceState(i,i.state,null),co(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var bo=Array.isArray;function wo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===fo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function _o(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Vu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Hu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=wo(e,t,n),r.return=e,r):((r=ju(n.type,n.key,n.props,null,e.mode,r)).ref=wo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=qu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=ju(t.type,t.key,t.props,null,e.mode,n)).ref=wo(e,null,t),n.return=e,n;case S:return(t=Xu(t,e.mode,n)).return=e,t}if(bo(t)||q(t))return(t=qu(t,e.mode,n,null)).return=e,t;_o(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case S:return n.key===i?l(e,t,n,r):null}if(bo(n)||q(n))return null!==i?null:f(e,t,n,r,null);_o(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(bo(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);_o(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,f=a,m=a=0,y=null;null!==f&&m<s.length;m++){f.index>m?(y=f,f=null):y=f.sibling;var g=d(i,f,s[m],u);if(null===g){null===f&&(f=y);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,f=y}if(m===s.length)return n(i,f),c;if(null===f){for(;m<s.length;m++)null!==(f=h(i,s[m],u))&&(a=o(f,a,m),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);m<s.length;m++)null!==(y=p(f,i,m,s[m],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=q(u);if("function"!=typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=d(i,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===f?l=b:f.sibling=b,f=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=h(i,v.value,c))&&(s=o(v,s,y),null===f?l=v:f.sibling=v,f=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=p(m,i,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===f?l=v:f.sibling=v,f=v);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"==typeof o&&null!==o&&o.type===I&&null===o.key;c&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case E:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===I){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=wo(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===I?((r=qu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=ju(o.type,o.key,o.props,null,e.mode,u)).ref=wo(e,r,o),u.return=e,e=u)}return s(e);case S:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Hu(o,e.mode,u)).return=e,e=r),s(e);if(bo(o))return m(e,r,o,u);if(q(o))return y(e,r,o,u);if(l&&_o(e,o),void 0===o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,W(e.type)||"Component"))}return n(e,r)}}var So=Eo(!0),Io=Eo(!1),ko={},Co=oi(ko),To=oi(ko),Ao=oi(ko);function xo(e){if(e===ko)throw Error(a(174));return e}function Po(e,t){switch(si(Ao,t),si(To,e),si(Co,ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ai(Co),si(Co,t)}function Ro(){ai(Co),ai(To),ai(Ao)}function No(e){xo(Ao.current);var t=xo(Co.current),n=de(t,e.type);t!==n&&(si(To,e),si(Co,n))}function Oo(e){To.current===e&&(ai(Co),ai(To))}var Do=oi(0);function Mo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lo=null,Bo=null,Uo=!1;function Fo(e,t){var n=Uu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Vo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function jo(e){if(Uo){var t=Bo;if(t){var n=t;if(!Vo(e,t)){if(!(t=Hr(n.nextSibling))||!Vo(e,t))return e.flags=-1025&e.flags|2,Uo=!1,void(Lo=e);Fo(Lo,n)}Lo=e,Bo=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,Uo=!1,Lo=e}}function qo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Lo=e}function zo(e){if(e!==Lo)return!1;if(!Uo)return qo(e),Uo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vr(t,e.memoizedProps))for(t=Bo;t;)Fo(e,t),t=Hr(t.nextSibling);if(qo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Bo=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Bo=null}}else Bo=Lo?Hr(e.stateNode.nextSibling):null;return!0}function Ho(){Bo=Lo=null,Uo=!1}var Xo=[];function Ko(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var Wo=_.ReactCurrentDispatcher,$o=_.ReactCurrentBatchConfig,Go=0,Qo=null,Yo=null,Zo=null,Jo=!1,ea=!1;function ta(){throw Error(a(321))}function na(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ra(e,t,n,r,i,o){if(Go=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wo.current=null===e||null===e.memoizedState?xa:Pa,e=n(r,i),ea){o=0;do{if(ea=!1,!(25>o))throw Error(a(301));o+=1,Zo=Yo=null,t.updateQueue=null,Wo.current=Ra,e=n(r,i)}while(ea)}if(Wo.current=Aa,t=null!==Yo&&null!==Yo.next,Go=0,Zo=Yo=Qo=null,Jo=!1,t)throw Error(a(300));return e}function ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zo?Qo.memoizedState=Zo=e:Zo=Zo.next=e,Zo}function oa(){if(null===Yo){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=Yo.next;var t=null===Zo?Qo.memoizedState:Zo.next;if(null!==t)Zo=t,Yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Yo=e).memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null},null===Zo?Qo.memoizedState=Zo=e:Zo=Zo.next=e}return Zo}function aa(e,t){return"function"==typeof t?t(e):t}function sa(e){var t=oa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Go&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,o=r):u=u.next=f,Qo.lanes|=l,Ms|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,ar(r,t.memoizedState)||(Oa=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ua(e){var t=oa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);ar(o,t.memoizedState)||(Oa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ca(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Go&e)===e)&&(t._workInProgressVersionPrimary=r,Xo.push(t))),e)return n(t._source);throw Xo.push(t),Error(a(350))}function la(e,t,n,r){var i=Ts;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=Wo.current,c=u.useState((function(){return ca(i,t,n)})),l=c[1],f=c[0];c=Zo;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,m=h.source;h=h.subscribe;var y=Qo;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!ar(s,e)){e=n(t._source),ar(f,e)||(l(e),e=su(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-zt(a),c=1<<u;r[u]|=e,a&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=su(y);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ar(p,n)&&ar(m,t)&&ar(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:aa,lastRenderedState:f}).dispatch=l=Ta.bind(null,Qo,e),c.queue=e,c.baseQueue=null,f=ca(i,t,n),c.memoizedState=c.baseState=f),f}function fa(e,t,n){return la(oa(),e,t,n)}function ha(e){var t=ia();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:aa,lastRenderedState:e}).dispatch=Ta.bind(null,Qo,e),[t.memoizedState,e]}function da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pa(e){return e={current:e},ia().memoizedState=e}function ma(){return oa().memoizedState}function ya(e,t,n,r){var i=ia();Qo.flags|=e,i.memoizedState=da(1|t,n,void 0,void 0===r?null:r)}function ga(e,t,n,r){var i=oa();r=void 0===r?null:r;var o=void 0;if(null!==Yo){var a=Yo.memoizedState;if(o=a.destroy,null!==r&&na(r,a.deps))return void da(t,n,o,r)}Qo.flags|=e,i.memoizedState=da(1|t,n,o,r)}function va(e,t){return ya(516,4,e,t)}function ba(e,t){return ga(516,4,e,t)}function wa(e,t){return ga(4,2,e,t)}function _a(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ea(e,t,n){return n=null!=n?n.concat([e]):null,ga(4,2,_a.bind(null,t,e),n)}function Sa(){}function Ia(e,t){var n=oa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&na(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=oa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&na(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ca(e,t){var n=Vi();qi(98>n?98:n,(function(){e(!0)})),qi(97<n?97:n,(function(){var n=$o.transition;$o.transition=1;try{e(!1),t()}finally{$o.transition=n}}))}function Ta(e,t,n){var r=au(),i=su(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Qo||null!==a&&a===Qo)ea=Jo=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,ar(u,s))return}catch(e){}uu(e,i,r)}}var Aa={readContext:no,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useOpaqueIdentifier:ta,unstable_isNewReconciler:!1},xa={readContext:no,useCallback:function(e,t){return ia().memoizedState=[e,void 0===t?null:t],e},useContext:no,useEffect:va,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ya(4,2,_a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4,2,e,t)},useMemo:function(e,t){var n=ia();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ia();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ta.bind(null,Qo,e),[r.memoizedState,e]},useRef:pa,useState:ha,useDebugValue:Sa,useDeferredValue:function(e){var t=ha(e),n=t[0],r=t[1];return va((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=ha(!1),t=e[0];return pa(e=Ca.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ia();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},la(r,e,t,n)},useOpaqueIdentifier:function(){if(Uo){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Kr++).toString(36))),Error(a(355))})),n=ha(t)[1];return 0==(2&Qo.mode)&&(Qo.flags|=516,da(5,(function(){n("r:"+(Kr++).toString(36))}),void 0,null)),t}return ha(t="r:"+(Kr++).toString(36)),t},unstable_isNewReconciler:!1},Pa={readContext:no,useCallback:Ia,useContext:no,useEffect:ba,useImperativeHandle:Ea,useLayoutEffect:wa,useMemo:ka,useReducer:sa,useRef:ma,useState:function(){return sa(aa)},useDebugValue:Sa,useDeferredValue:function(e){var t=sa(aa),n=t[0],r=t[1];return ba((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=sa(aa)[0];return[ma().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return sa(aa)[0]},unstable_isNewReconciler:!1},Ra={readContext:no,useCallback:Ia,useContext:no,useEffect:ba,useImperativeHandle:Ea,useLayoutEffect:wa,useMemo:ka,useReducer:ua,useRef:ma,useState:function(){return ua(aa)},useDebugValue:Sa,useDeferredValue:function(e){var t=ua(aa),n=t[0],r=t[1];return ba((function(){var t=$o.transition;$o.transition=1;try{r(e)}finally{$o.transition=t}}),[e]),n},useTransition:function(){var e=ua(aa)[0];return[ma().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return ua(aa)[0]},unstable_isNewReconciler:!1},Na=_.ReactCurrentOwner,Oa=!1;function Da(e,t,n,r){t.child=null===e?Io(t,null,n,r):So(t,e.child,n,r)}function Ma(e,t,n,r,i){n=n.render;var o=t.ref;return to(t,i),r=ra(e,t,n,r,o,i),null===e||Oa?(t.flags|=1,Da(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Ja(e,t,i))}function La(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Fu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ju(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ba(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ur)(i,r)&&e.ref===t.ref)?Ja(e,t,o):(t.flags|=1,(e=Vu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ba(e,t,n,r,i,o){if(null!==e&&ur(e.memoizedProps,r)&&e.ref===t.ref){if(Oa=!1,0==(o&i))return t.lanes=e.lanes,Ja(e,t,o);0!=(16384&e.flags)&&(Oa=!0)}return Va(e,t,n,r,o)}function Ua(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},yu(0,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},yu(0,e),null;t.memoizedState={baseLanes:0},yu(0,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,yu(0,r);return Da(e,t,i,n),t.child}function Fa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Va(e,t,n,r,i){var o=di(n)?fi:ci.current;return o=hi(t,o),to(t,i),n=ra(e,t,n,r,o,i),null===e||Oa?(t.flags|=1,Da(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Ja(e,t,i))}function ja(e,t,n,r,i){if(di(n)){var o=!0;gi(t)}else o=!1;if(to(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),yo(t,n,r),vo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;c="object"==typeof c&&null!==c?no(c):hi(t,c=di(n)?fi:ci.current);var l=n.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&go(t,a,r,c),ro=!1;var h=t.memoizedState;a.state=h,co(t,r,a,i),u=t.memoizedState,s!==r||h!==u||li.current||ro?("function"==typeof l&&(ho(t,n,l,r),u=t.memoizedState),(s=ro||mo(t,n,s,r,h,u,c))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,oo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Wi(t.type,s),a.props=c,f=t.pendingProps,h=a.context,u="object"==typeof(u=n.contextType)&&null!==u?no(u):hi(t,u=di(n)?fi:ci.current);var d=n.getDerivedStateFromProps;(l="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||h!==u)&&go(t,a,r,u),ro=!1,h=t.memoizedState,a.state=h,co(t,r,a,i);var p=t.memoizedState;s!==f||h!==p||li.current||ro?("function"==typeof d&&(ho(t,n,d,r),p=t.memoizedState),(c=ro||mo(t,n,c,r,h,p,u))?(l||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return qa(e,t,n,r,o,i)}function qa(e,t,n,r,i,o){Fa(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&vi(t,n,!1),Ja(e,t,o);r=t.stateNode,Na.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=So(t,e.child,null,o),t.child=So(t,null,s,o)):Da(e,t,s,o),t.memoizedState=r.state,i&&vi(t,n,!0),t.child}function za(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),Po(e,t.containerInfo)}var Ha,Xa,Ka,Wa={dehydrated:null,retryLane:0};function $a(e,t,n){var r,i=t.pendingProps,o=Do.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),si(Do,1&o),null===e?(void 0!==i.fallback&&jo(t),e=i.children,o=i.fallback,a?(e=Ga(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wa,e):"number"==typeof i.unstable_expectedLoadTime?(e=Ga(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wa,t.lanes=33554432,e):((n=zu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=function(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Vu(a,s),null!==e?r=Vu(e,r):(r=qu(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Wa,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=Vu(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function Ga(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=zu(t,i,0,null),n=qu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Qa(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),eo(e.return,t)}function Ya(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Za(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Da(e,t,r.children,n),0!=(2&(r=Do.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qa(e,n);else if(19===e.tag)Qa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(si(Do,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Mo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ya(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Mo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ya(t,!0,n,null,o,t.lastEffect);break;case"together":Ya(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Vu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function es(e,t){if(!Uo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ts(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return di(t.type)&&pi(),null;case 3:return Ro(),ai(li),ai(ci),Ko(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(zo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Oo(t);var o=xo(Ao.current);if(n=t.type,null!==e&&null!=t.stateNode)Xa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=xo(Co.current),zo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[$r]=t,r[Gr]=s,n){case"dialog":Cr("cancel",r),Cr("close",r);break;case"iframe":case"object":case"embed":Cr("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Cr(Er[e],r);break;case"source":Cr("error",r);break;case"img":case"image":case"link":Cr("error",r),Cr("load",r);break;case"details":Cr("toggle",r);break;case"input":ee(r,s),Cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cr("invalid",r);break;case"textarea":ue(r,s),Cr("invalid",r)}for(var c in Se(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Cr("scroll",r));switch(n){case"input":Q(r),re(r,s,!0);break;case"textarea":Q(r),le(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Lr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===fe&&(e=he(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Gr]=r,Ha(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Cr("cancel",e),Cr("close",e),o=r;break;case"iframe":case"object":case"embed":Cr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Er.length;o++)Cr(Er[o],e);o=r;break;case"source":Cr("error",e),o=r;break;case"img":case"image":case"link":Cr("error",e),Cr("load",e),o=r;break;case"details":Cr("toggle",e),o=r;break;case"input":ee(e,r),o=J(e,r),Cr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Cr("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Cr("invalid",e);break;default:o=r}Se(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?_e(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"==typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"==typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Cr("scroll",e):null!=f&&w(e,s,f,c))}switch(n){case"input":Q(e),re(e,r,!1);break;case"textarea":Q(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Lr)}Fr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ka(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=xo(Ao.current),xo(Co.current),zo(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return ai(Do),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&zo(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Do.current)?0===Ns&&(Ns=3):(0!==Ns&&3!==Ns||(Ns=4),null===Ts||0==(134217727&Ms)&&0==(134217727&Ls)||hu(Ts,xs))),(r||n)&&(t.flags|=4),null);case 4:return Ro(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return Ji(t),null;case 17:return di(t.type)&&pi(),null;case 19:if(ai(Do),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(c=r.rendering))if(s)es(r,!1);else{if(0!==Ns||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Mo(e))){for(t.flags|=64,es(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return si(Do,1&Do.current|2),t.child}e=e.sibling}null!==r.tail&&Fi()>Vs&&(t.flags|=64,s=!0,es(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Mo(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),es(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Uo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Fi()-r.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=64,s=!0,es(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Fi(),n.sibling=null,t=Do.current,si(Do,s?1&t|2:1&t),n):null;case 23:case 24:return gu(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function ns(e){switch(e.tag){case 1:di(e.type)&&pi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ro(),ai(li),ai(ci),Ko(),0!=(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Oo(e),null;case 13:return ai(Do),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ai(Do),null;case 4:return Ro(),null;case 10:return Ji(e),null;case 23:case 24:return gu(),null;default:return null}}function rs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function is(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ha=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,xo(Co.current);var a,s=null;switch(n){case"input":o=J(e,o),r=J(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Lr)}for(f in Se(n,r),n=null,o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&null!=o[f])if("style"===f){var c=o[f];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=o?o[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Cr("scroll",e),s||c===l||(s=[])):"object"==typeof l&&null!==l&&l.$$typeof===M?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Ka=function(e,t,n,r){n!==r&&(t.flags|=4)};var os="function"==typeof WeakMap?WeakMap:Map;function as(e,t,n){(n=ao(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Xs=r),is(0,t)},n}function ss(e,t,n){(n=ao(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return is(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this),is(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var us="function"==typeof WeakSet?WeakSet:Set;function cs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Du(e,t)}else t.current=null}function ls(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Wi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&zr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function fs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Ru(n,e),Pu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Wi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&lo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}lo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Fr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function hs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ds(e,t){if(wi&&"function"==typeof wi.onCommitFiberUnmount)try{wi.onCommitFiberUnmount(bi,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Ru(t,n);else{r=t;try{i()}catch(e){Du(r,e)}}n=n.next}while(n!==e)}break;case 1:if(cs(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Du(t,e)}break;case 5:cs(t);break;case 4:bs(e,t)}}function ps(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ms(e){return 5===e.tag||3===e.tag||4===e.tag}function ys(e){e:{for(var t=e.return;null!==t;){if(ms(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ms(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?gs(e,n,t):vs(e,n,t)}function gs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Lr));else if(4!==r&&null!==(e=e.child))for(gs(e,t,n),e=e.sibling;null!==e;)gs(e,t,n),e=e.sibling}function vs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vs(e,t,n),e=e.sibling;null!==e;)vs(e,t,n),e=e.sibling}function bs(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ds(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ds(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ws(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Gr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?_e(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):w(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Fs=Fi(),hs(t.child,!0)),void _s(t);case 19:return void _s(t);case 17:return;case 23:case 24:return void hs(t,null!==t.memoizedState)}throw Error(a(163))}function _s(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new us),t.forEach((function(t){var r=Lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Es(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Ss=Math.ceil,Is=_.ReactCurrentDispatcher,ks=_.ReactCurrentOwner,Cs=0,Ts=null,As=null,xs=0,Ps=0,Rs=oi(0),Ns=0,Os=null,Ds=0,Ms=0,Ls=0,Bs=0,Us=null,Fs=0,Vs=1/0;function js(){Vs=Fi()+500}var qs,zs=null,Hs=!1,Xs=null,Ks=null,Ws=!1,$s=null,Gs=90,Qs=[],Ys=[],Zs=null,Js=0,eu=null,tu=-1,nu=0,ru=0,iu=null,ou=!1;function au(){return 0!=(48&Cs)?Fi():-1!==tu?tu:tu=Fi()}function su(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Vi()?1:2;if(0===nu&&(nu=Ds),0!==Ki.transition){0!==ru&&(ru=null!==Us?Us.pendingLanes:0),e=nu;var t=4186112&~ru;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Vi(),e=Ft(0!=(4&Cs)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),nu)}function uu(e,t,n){if(50<Js)throw Js=0,eu=null,Error(a(185));if(null===(e=cu(e,t)))return null;qt(e,t,n),e===Ts&&(Ls|=t,4===Ns&&hu(e,xs));var r=Vi();1===t?0!=(8&Cs)&&0==(48&Cs)?du(e):(lu(e,n),0===Cs&&(js(),Hi())):(0==(4&Cs)||98!==r&&99!==r||(null===Zs?Zs=new Set([e]):Zs.add(e)),lu(e,n)),Us=e}function cu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function lu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-zt(s),c=1<<u,l=o[u];if(-1===l){if(0==(c&r)||0!=(c&i)){l=t,Lt(c);var f=Mt;o[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Bt(e,e===Ts?xs:0),t=Mt,0===r)null!==n&&(n!==Oi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Oi&&Si(n)}15===t?(n=du.bind(null,e),null===Mi?(Mi=[n],Li=Ei(Ai,Xi)):Mi.push(n),n=Oi):n=14===t?zi(99,du.bind(null,e)):zi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),fu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function fu(e){if(tu=-1,ru=nu=0,0!=(48&Cs))throw Error(a(327));var t=e.callbackNode;if(xu()&&e.callbackNode!==t)return null;var n=Bt(e,e===Ts?xs:0);if(0===n)return null;var r=n,i=Cs;Cs|=16;var o=wu();for(Ts===e&&xs===r||(js(),vu(e,r));;)try{Su();break}catch(t){bu(e,t)}if(Zi(),Is.current=o,Cs=i,null!==As?r=0:(Ts=null,xs=0,r=Ns),0!=(Ds&Ls))vu(e,0);else if(0!==r){if(2===r&&(Cs|=64,e.hydrate&&(e.hydrate=!1,zr(e.containerInfo)),0!==(n=Ut(e))&&(r=_u(e,n))),1===r)throw t=Os,vu(e,0),hu(e,n),lu(e,Fi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Cu(e);break;case 3:if(hu(e,n),(62914560&n)===n&&10<(r=Fs+500-Fi())){if(0!==Bt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){au(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jr(Cu.bind(null,e),r);break}Cu(e);break;case 4:if(hu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-zt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Fi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ss(n/1960))-n)){e.timeoutHandle=jr(Cu.bind(null,e),n);break}Cu(e);break;case 5:Cu(e);break;default:throw Error(a(329))}}return lu(e,Fi()),e.callbackNode===t?fu.bind(null,e):null}function hu(e,t){for(t&=~Bs,t&=~Ls,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function du(e){if(0!=(48&Cs))throw Error(a(327));if(xu(),e===Ts&&0!=(e.expiredLanes&xs)){var t=xs,n=_u(e,t);0!=(Ds&Ls)&&(n=_u(e,t=Bt(e,t)))}else n=_u(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Cs|=64,e.hydrate&&(e.hydrate=!1,zr(e.containerInfo)),0!==(t=Ut(e))&&(n=_u(e,t))),1===n)throw n=Os,vu(e,0),hu(e,t),lu(e,Fi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cu(e),lu(e,Fi()),null}function pu(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(js(),Hi())}}function mu(e,t){var n=Cs;Cs&=-2,Cs|=8;try{return e(t)}finally{0===(Cs=n)&&(js(),Hi())}}function yu(e,t){si(Rs,Ps),Ps|=t,Ds|=t}function gu(){Ps=Rs.current,ai(Rs)}function vu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qr(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&pi();break;case 3:Ro(),ai(li),ai(ci),Ko();break;case 5:Oo(r);break;case 4:Ro();break;case 13:case 19:ai(Do);break;case 10:Ji(r);break;case 23:case 24:gu()}n=n.return}Ts=e,As=Vu(e.current,null),xs=Ps=Ds=t,Ns=0,Os=null,Bs=Ls=Ms=0}function bu(e,t){for(;;){var n=As;try{if(Zi(),Wo.current=Aa,Jo){for(var r=Qo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Jo=!1}if(Go=0,Zo=Yo=Qo=null,ea=!1,ks.current=null,null===n||null===n.return){Ns=1,Os=t,As=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=xs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u;if(0==(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&Do.current),h=a;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var m=h.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var g=new Set;g.add(c),h.updateQueue=g}else y.add(c);if(0==(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=ao(-1,1);v.tag=2,so(s,v)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new os,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var w=Mu.bind(null,o,c,s);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((W(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ns&&(Ns=2),u=rs(u,s),h=a;do{switch(h.tag){case 3:o=u,h.flags|=4096,t&=-t,h.lanes|=t,uo(h,as(0,o,t));break e;case 1:o=u;var _=h.type,E=h.stateNode;if(0==(64&h.flags)&&("function"==typeof _.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Ks||!Ks.has(E)))){h.flags|=4096,t&=-t,h.lanes|=t,uo(h,ss(h,o,t));break e}}h=h.return}while(null!==h)}ku(n)}catch(e){t=e,As===n&&null!==n&&(As=n=n.return);continue}break}}function wu(){var e=Is.current;return Is.current=Aa,null===e?Aa:e}function _u(e,t){var n=Cs;Cs|=16;var r=wu();for(Ts===e&&xs===t||vu(e,t);;)try{Eu();break}catch(t){bu(e,t)}if(Zi(),Cs=n,Is.current=r,null!==As)throw Error(a(261));return Ts=null,xs=0,Ns}function Eu(){for(;null!==As;)Iu(As)}function Su(){for(;null!==As&&!Ii();)Iu(As)}function Iu(e){var t=qs(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?ku(e):As=t,ks.current=null}function ku(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ts(n,t,Ps)))return void(As=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Ps)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ns(t)))return n.flags&=2047,void(As=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ns&&(Ns=5)}function Cu(e){var t=Vi();return qi(99,Tu.bind(null,e,t)),null}function Tu(e,t){do{xu()}while(null!==$s);if(0!=(48&Cs))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-zt(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==Zs&&0==(24&r)&&Zs.has(e)&&Zs.delete(e),e===Ts&&(As=Ts=null,xs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Cs,Cs|=32,ks.current=null,Br=$t,dr(s=hr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(e){u=null;break e}var f=0,h=-1,d=-1,p=0,m=0,y=s,g=null;t:for(;;){for(var v;y!==u||0!==o&&3!==y.nodeType||(h=f+o),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(v=y.firstChild);)g=y,y=v;for(;;){if(y===s)break t;if(g===u&&++p===o&&(h=f),g===c&&++m===l&&(d=f),null!==(v=y.nextSibling))break;g=(y=g).parentNode}y=v}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Ur={focusedElem:s,selectionRange:u},$t=!1,iu=null,ou=!1,zs=r;do{try{Au()}catch(e){if(null===zs)throw Error(a(330));Du(zs,e),zs=zs.nextEffect}}while(null!==zs);iu=null,zs=r;do{try{for(s=e;null!==zs;){var b=zs.flags;if(16&b&&ge(zs.stateNode,""),128&b){var w=zs.alternate;if(null!==w){var _=w.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&b){case 2:ys(zs),zs.flags&=-3;break;case 6:ys(zs),zs.flags&=-3,ws(zs.alternate,zs);break;case 1024:zs.flags&=-1025;break;case 1028:zs.flags&=-1025,ws(zs.alternate,zs);break;case 4:ws(zs.alternate,zs);break;case 8:bs(s,u=zs);var E=u.alternate;ps(u),null!==E&&ps(E)}zs=zs.nextEffect}}catch(e){if(null===zs)throw Error(a(330));Du(zs,e),zs=zs.nextEffect}}while(null!==zs);if(_=Ur,w=hr(),b=_.focusedElem,s=_.selectionRange,w!==b&&b&&b.ownerDocument&&fr(b.ownerDocument.documentElement,b)){null!==s&&dr(b)&&(w=s.start,void 0===(_=s.end)&&(_=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(_,b.value.length)):(_=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(_=_.getSelection(),u=b.textContent.length,E=Math.min(s.start,u),s=void 0===s.end?E:Math.min(s.end,u),!_.extend&&E>s&&(u=s,s=E,E=u),u=lr(b,E),o=lr(b,s),u&&o&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((w=w.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),E>s?(_.addRange(w),_.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),_.addRange(w))))),w=[];for(_=b;_=_.parentNode;)1===_.nodeType&&w.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(_=w[b]).element.scrollLeft=_.left,_.element.scrollTop=_.top}$t=!!Br,Ur=Br=null,e.current=n,zs=r;do{try{for(b=e;null!==zs;){var S=zs.flags;if(36&S&&fs(b,zs.alternate,zs),128&S){w=void 0;var I=zs.ref;if(null!==I){var k=zs.stateNode;switch(zs.tag){case 5:w=k;break;default:w=k}"function"==typeof I?I(w):I.current=w}}zs=zs.nextEffect}}catch(e){if(null===zs)throw Error(a(330));Du(zs,e),zs=zs.nextEffect}}while(null!==zs);zs=null,Di(),Cs=i}else e.current=n;if(Ws)Ws=!1,$s=e,Gs=t;else for(zs=r;null!==zs;)t=zs.nextEffect,zs.nextEffect=null,8&zs.flags&&((S=zs).sibling=null,S.stateNode=null),zs=t;if(0===(r=e.pendingLanes)&&(Ks=null),1===r?e===eu?Js++:(Js=0,eu=e):Js=0,n=n.stateNode,wi&&"function"==typeof wi.onCommitFiberRoot)try{wi.onCommitFiberRoot(bi,n,void 0,64==(64&n.current.flags))}catch(e){}if(lu(e,Fi()),Hs)throw Hs=!1,e=Xs,Xs=null,e;return 0!=(8&Cs)||Hi(),null}function Au(){for(;null!==zs;){var e=zs.alternate;ou||null===iu||(0!=(8&zs.flags)?Je(zs,iu)&&(ou=!0):13===zs.tag&&Es(e,zs)&&Je(zs,iu)&&(ou=!0));var t=zs.flags;0!=(256&t)&&ls(e,zs),0==(512&t)||Ws||(Ws=!0,zi(97,(function(){return xu(),null}))),zs=zs.nextEffect}}function xu(){if(90!==Gs){var e=97<Gs?97:Gs;return Gs=90,qi(e,Nu)}return!1}function Pu(e,t){Qs.push(t,e),Ws||(Ws=!0,zi(97,(function(){return xu(),null})))}function Ru(e,t){Ys.push(t,e),Ws||(Ws=!0,zi(97,(function(){return xu(),null})))}function Nu(){if(null===$s)return!1;var e=$s;if($s=null,0!=(48&Cs))throw Error(a(331));var t=Cs;Cs|=32;var n=Ys;Ys=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===o)throw Error(a(330));Du(o,e)}}for(n=Qs,Qs=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(e){if(null===o)throw Error(a(330));Du(o,e)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Cs=t,Hi(),!0}function Ou(e,t,n){so(e,t=as(0,t=rs(n,t),1)),t=au(),null!==(e=cu(e,1))&&(qt(e,1,t),lu(e,t))}function Du(e,t){if(3===e.tag)Ou(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ou(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){var i=ss(n,e=rs(t,e),1);if(so(n,i),i=au(),null!==(n=cu(n,1)))qt(n,1,i),lu(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ks||!Ks.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=au(),e.pingedLanes|=e.suspendedLanes&n,Ts===e&&(xs&n)===n&&(4===Ns||3===Ns&&(62914560&xs)===xs&&500>Fi()-Fs?vu(e,0):Bs|=n),lu(e,t)}function Lu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Vi()?1:2:(0===nu&&(nu=Ds),0===(t=Vt(62914560&~nu))&&(t=4194304))),n=au(),null!==(e=cu(e,t))&&(qt(e,t,n),lu(e,n))}function Bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Uu(e,t,n,r){return new Bu(e,t,n,r)}function Fu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vu(e,t){var n=e.alternate;return null===n?((n=Uu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ju(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Fu(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case I:return qu(n.children,i,o,t);case L:s=8,i|=16;break;case k:s=8,i|=1;break;case C:return(e=Uu(12,n,t,8|i)).elementType=C,e.type=C,e.lanes=o,e;case P:return(e=Uu(13,n,t,i)).type=P,e.elementType=P,e.lanes=o,e;case R:return(e=Uu(19,n,t,i)).elementType=R,e.lanes=o,e;case B:return zu(n,i,o,t);case U:return(e=Uu(24,n,t,i)).elementType=U,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case A:s=9;break e;case x:s=11;break e;case N:s=14;break e;case O:s=16,r=null;break e;case D:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Uu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function qu(e,t,n,r){return(e=Uu(7,e,r,t)).lanes=n,e}function zu(e,t,n,r){return(e=Uu(23,e,r,t)).elementType=B,e.lanes=n,e}function Hu(e,t,n){return(e=Uu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Uu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ku(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Wu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function $u(e,t,n,r){var i=t.current,o=au(),s=su(i);e:if(n){t:{if(Ge(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(di(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(di(c)){n=yi(n,c,u);break e}}n=u}else n=ui;return null===t.context?t.context=n:t.pendingContext=n,(t=ao(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),so(i,t),uu(i,s,o),s}function Gu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yu(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}function Zu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ku(e,t,null!=n&&!0===n.hydrate),t=Uu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,io(t),e[Qr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Gu(a);s.call(e)}}$u(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Zu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Gu(a);u.call(e)}}mu((function(){$u(t,a,e,i)}))}return Gu(a)}function tc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(a(200));return Wu(e,t,null,n)}qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||li.current)Oa=!0;else{if(0==(n&r)){switch(Oa=!1,t.tag){case 3:za(t),Ho();break;case 5:No(t);break;case 1:di(t.type)&&gi(t);break;case 4:Po(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;si($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?$a(e,t,n):(si(Do,1&Do.current),null!==(t=Ja(e,t,n))?t.sibling:null);si(Do,1&Do.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Za(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),si(Do,Do.current),r)break;return null;case 23:case 24:return t.lanes=0,Ua(e,t,n)}return Ja(e,t,n)}Oa=0!=(16384&e.flags)}else Oa=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=hi(t,ci.current),to(t,n),i=ra(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,di(r)){var o=!0;gi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,io(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&ho(t,r,s,e),i.updater=po,t.stateNode=i,i._reactInternals=t,vo(t,r,e,n),t=qa(null,t,r,!0,o,n)}else t.tag=0,Da(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Fu(e)?1:0;if(null!=e){if((e=e.$$typeof)===x)return 11;if(e===N)return 14}return 2}(i),e=Wi(i,e),o){case 0:t=Va(null,t,i,e,n);break e;case 1:t=ja(null,t,i,e,n);break e;case 11:t=Ma(null,t,i,e,n);break e;case 14:t=La(null,t,i,Wi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:if(za(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,oo(e,t),co(t,r,null,n),(r=t.memoizedState.element)===i)Ho(),t=Ja(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Bo=Hr(t.stateNode.containerInfo.firstChild),Lo=t,o=Uo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Xo.push(o);for(n=Io(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Da(e,t,r,n),Ho();t=t.child}return t;case 5:return No(t),null===e&&jo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Vr(r,i)?s=null:null!==o&&Vr(r,o)&&(t.flags|=16),Fa(e,t),Da(e,t,s,n),t.child;case 6:return null===e&&jo(t),null;case 13:return $a(e,t,n);case 4:return Po(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=So(t,null,r,n):Da(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ma(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return Da(e,t,t.pendingProps,n),t.child;case 8:case 12:return Da(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(si($i,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0==(o=ar(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!li.current){t=Ja(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=ao(-1,n&-n)).tag=2,so(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),eo(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Da(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,to(t,n),r=r(i=no(i,o.unstable_observedBits)),t.flags|=1,Da(e,t,r,n),t.child;case 14:return o=Wi(i=t.type,t.pendingProps),La(e,t,i,o=Wi(i.type,o),r,n);case 15:return Ba(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,di(r)?(e=!0,gi(t)):e=!1,to(t,n),yo(t,r,i),vo(t,r,i,n),qa(null,t,r,!0,e,n);case 19:return Za(e,t,n);case 23:case 24:return Ua(e,t,n)}throw Error(a(156,t.tag))},Zu.prototype.render=function(e){$u(e,this._internalRoot,null,null)},Zu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;$u(null,e,null,(function(){t[Qr]=null}))},et=function(e){13===e.tag&&(uu(e,4,au()),Yu(e,4))},tt=function(e){13===e.tag&&(uu(e,67108864,au()),Yu(e,67108864))},nt=function(e){if(13===e.tag){var t=au(),n=su(e);uu(e,n,t),Yu(e,n)}},rt=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ti(r);if(!i)throw Error(a(90));Y(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Ne=pu,Oe=function(e,t,n,r,i){var o=Cs;Cs|=4;try{return qi(98,e.bind(null,t,n,r,i))}finally{0===(Cs=o)&&(js(),Hi())}},De=function(){0==(49&Cs)&&(function(){if(null!==Zs){var e=Zs;Zs=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,lu(e,Fi())}))}Hi()}(),xu())},Me=function(e,t){var n=Cs;Cs|=2;try{return e(t)}finally{0===(Cs=n)&&(js(),Hi())}};var nc={Events:[Jr,ei,ti,Pe,Re,xu,{current:!1}]},rc={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ic={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{bi=oc.inject(ic),wi=oc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,t.createPortal=tc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Cs;if(0!=(48&n))return e(t);Cs|=1;try{if(e)return qi(99,e.bind(null,t))}finally{Cs=n,Hi()}},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.render=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(a(40));return!!e._reactRootContainer&&(mu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qr]=null}))})),!0)},t.unstable_batchedUpdates=pu,t.unstable_createPortal=function(e,t){return tc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="17.0.2"},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},207:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.r(t),n.d(t,{BrowserRouter:()=>ve,HashRouter:()=>be,Link:()=>ke,MemoryRouter:()=>$,NavLink:()=>Ae,Prompt:()=>Q,Redirect:()=>ee,Route:()=>ie,Router:()=>W,StaticRouter:()=>le,Switch:()=>fe,generatePath:()=>J,matchPath:()=>re,useHistory:()=>pe,useLocation:()=>me,useParams:()=>ye,useRouteMatch:()=>ge,withRouter:()=>he});var o=n(294),a=n(697),s=n.n(a);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return"/"===e.charAt(0)}function l(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function f(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const h=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"==typeof t||"object"==typeof n){var r=f(t),i=f(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1};const d=function(e,t){if(!e)throw new Error("Invariant failed")};function p(e){return"/"===e.charAt(0)?e:"/"+e}function m(e){return"/"===e.charAt(0)?e.substr(1):e}function y(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function g(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function v(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function b(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=u({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&c(e),a=t&&c(t),s=o||a;if(e&&c(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?l(i,h):".."===d?(l(i,h),f++):f&&(l(i,h),f--)}if(!s)for(;f--;f)i.unshift("..");!s||""===i[0]||i[0]&&c(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function w(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var _=!("undefined"==typeof window||!window.document||!window.document.createElement);function E(e,t){t(window.confirm(e))}var S="popstate",I="hashchange";function k(){try{return window.history.state||{}}catch(e){return{}}}function C(e){void 0===e&&(e={}),_||d(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,c=o.getUserConfirmation,l=void 0===c?E:c,f=o.keyLength,h=void 0===f?6:f,m=e.basename?g(p(e.basename)):"";function C(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return m&&(o=y(o,m)),b(o,r,n)}function T(){return Math.random().toString(36).substr(2,h)}var A=w();function x(e){u(j,e),j.length=n.length,A.notifyListeners(j.location,j.action)}function P(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||O(C(e.state))}function R(){O(C(k()))}var N=!1;function O(e){N?(N=!1,x()):A.confirmTransitionTo(e,"POP",l,(function(t){t?x({action:"POP",location:e}):function(e){var t=j.location,n=M.indexOf(t.key);-1===n&&(n=0);var r=M.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(N=!0,B(i))}(e)}))}var D=C(k()),M=[D.key];function L(e){return m+v(e)}function B(e){n.go(e)}var U=0;function F(e){1===(U+=e)&&1===e?(window.addEventListener(S,P),i&&window.addEventListener(I,R)):0===U&&(window.removeEventListener(S,P),i&&window.removeEventListener(I,R))}var V=!1,j={length:n.length,action:"POP",location:D,createHref:L,push:function(e,t){var i="PUSH",o=b(e,t,T(),j.location);A.confirmTransitionTo(o,i,l,(function(e){if(e){var t=L(o),a=o.key,u=o.state;if(r)if(n.pushState({key:a,state:u},null,t),s)window.location.href=t;else{var c=M.indexOf(j.location.key),l=M.slice(0,c+1);l.push(o.key),M=l,x({action:i,location:o})}else window.location.href=t}}))},replace:function(e,t){var i="REPLACE",o=b(e,t,T(),j.location);A.confirmTransitionTo(o,i,l,(function(e){if(e){var t=L(o),a=o.key,u=o.state;if(r)if(n.replaceState({key:a,state:u},null,t),s)window.location.replace(t);else{var c=M.indexOf(j.location.key);-1!==c&&(M[c]=o.key),x({action:i,location:o})}else window.location.replace(t)}}))},go:B,goBack:function(){B(-1)},goForward:function(){B(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return V||(F(1),V=!0),function(){return V&&(V=!1,F(-1)),t()}},listen:function(e){var t=A.appendListener(e);return F(1),function(){F(-1),t()}}};return j}var T="hashchange",A={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+m(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:m,decodePath:p},slash:{encodePath:p,decodePath:p}};function x(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function P(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function R(e){window.location.replace(x(window.location.href)+"#"+e)}function N(e){void 0===e&&(e={}),_||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?E:r,o=n.hashType,a=void 0===o?"slash":o,s=e.basename?g(p(e.basename)):"",c=A[a],l=c.encodePath,f=c.decodePath;function h(){var e=f(P());return s&&(e=y(e,s)),b(e)}var m=w();function S(e){u(V,e),V.length=t.length,m.notifyListeners(V.location,V.action)}var I=!1,k=null;function C(){var e,t,n=P(),r=l(n);if(n!==r)R(r);else{var o=h(),a=V.location;if(!I&&(t=o,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(k===v(o))return;k=null,function(e){if(I)I=!1,S();else{m.confirmTransitionTo(e,"POP",i,(function(t){t?S({action:"POP",location:e}):function(e){var t=V.location,n=M.lastIndexOf(v(t));-1===n&&(n=0);var r=M.lastIndexOf(v(e));-1===r&&(r=0);var i=n-r;i&&(I=!0,L(i))}(e)}))}}(o)}}var N=P(),O=l(N);N!==O&&R(O);var D=h(),M=[v(D)];function L(e){t.go(e)}var B=0;function U(e){1===(B+=e)&&1===e?window.addEventListener(T,C):0===B&&window.removeEventListener(T,C)}var F=!1,V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=x(window.location.href)),n+"#"+l(s+v(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,V.location);m.confirmTransitionTo(r,n,i,(function(e){if(e){var t=v(r),i=l(s+t);if(P()!==i){k=t,function(e){window.location.hash=e}(i);var o=M.lastIndexOf(v(V.location)),a=M.slice(0,o+1);a.push(t),M=a,S({action:n,location:r})}else S()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,V.location);m.confirmTransitionTo(r,n,i,(function(e){if(e){var t=v(r),i=l(s+t);P()!==i&&(k=t,R(i));var o=M.indexOf(v(V.location));-1!==o&&(M[o]=t),S({action:n,location:r})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),t()}},listen:function(e){var t=m.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function O(e,t,n){return Math.min(Math.max(e,t),n)}function D(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,a=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=w();function f(e){u(g,e),g.length=g.entries.length,l.notifyListeners(g.location,g.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=O(a,0,i.length-1),p=i.map((function(e){return b(e,void 0,"string"==typeof e?h():e.key||h())})),m=v;function y(e){var t=O(g.index+e,0,g.entries.length-1),r=g.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var g={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:m,push:function(e,t){var r="PUSH",i=b(e,t,h(),g.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=g.index+1,n=g.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=b(e,t,h(),g.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(g.entries[g.index]=i,f({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=g.index+e;return t>=0&&t<g.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return g}var M=1073741823,L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};function B(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}const U=o.createContext||function(e,t){var n,r,a,u="__create-react-context-"+((L[a="__global_unique_id__"]=(L[a]||0)+1)+"__"),c=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=B(t.props.value),t}i(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[u]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(a=i)?0!==o||1/o==1/a:o!=o&&a!=a)?n=0:(n="function"==typeof t?t(r,i):M,0!=(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(o.Component);c.childContextTypes=((n={})[u]=s().object.isRequired,n);var l=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}i(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?M:t},r.componentDidMount=function(){this.context[u]&&this.context[u].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?M:e},r.componentWillUnmount=function(){this.context[u]&&this.context[u].off(this.onUpdate)},r.getValue=function(){return this.context[u]?this.context[u].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(o.Component);return l.contextTypes=((r={})[u]=s().object,r),{Provider:c,Consumer:l}};var F=n(658),V=n.n(F);function j(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(663);var q=n(679),z=n.n(q),H=function(e){var t=U();return t.displayName=e,t},X=H("Router-History"),K=H("Router"),W=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}i(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return o.createElement(K.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.createElement(X.Provider,{children:this.props.children||null,value:this.props.history}))},t}(o.Component),$=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=D(t.props),t}return i(t,e),t.prototype.render=function(){return o.createElement(W,{history:this.history,children:this.props.children})},t}(o.Component),G=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(o.Component);function Q(e){var t=e.message,n=e.when,r=void 0===n||n;return o.createElement(K.Consumer,null,(function(e){if(e||d(!1),!r||e.staticContext)return null;var n=e.history.block;return o.createElement(G,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var Y={},Z=0;function J(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Y[e])return Y[e];var t=V().compile(e);return Z<1e4&&(Y[e]=t,Z++),t}(e)(t,{pretty:!0})}function ee(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return o.createElement(K.Consumer,null,(function(e){e||d(!1);var r=e.history,a=e.staticContext,s=i?r.push:r.replace,c=b(t?"string"==typeof n?J(n,t.params):u({},n,{pathname:J(n.pathname,t.params)}):n);return a?(s(c),null):o.createElement(G,{onMount:function(){s(c)},onUpdate:function(e,t){var n,r,i=b(t.to);n=i,r=u({},c,{key:i.key}),n.pathname===r.pathname&&n.search===r.search&&n.hash===r.hash&&n.key===r.key&&h(n.state,r.state)||s(c)},to:n})}))}var te={},ne=0;function re(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=te[n]||(te[n]={});if(r[e])return r[e];var i=[],o={regexp:V()(e,i,t),keys:i};return ne<1e4&&(r[e]=o,ne++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],f=u.slice(1),h=e===l;return o&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:a.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var ie=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this;return o.createElement(K.Consumer,null,(function(t){t||d(!1);var n=e.props.location||t.location,r=u({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?re(n.pathname,e.props):t.match}),i=e.props,a=i.children,s=i.component,c=i.render;return Array.isArray(a)&&function(e){return 0===o.Children.count(e)}(a)&&(a=null),o.createElement(K.Provider,{value:r},r.match?a?"function"==typeof a?a(r):a:s?o.createElement(s,r):c?c(r):null:"function"==typeof a?a(r):null)}))},t}(o.Component);function oe(e){return"/"===e.charAt(0)?e:"/"+e}function ae(e,t){if(!e)return t;var n=oe(e);return 0!==t.pathname.indexOf(n)?t:u({},t,{pathname:t.pathname.substr(n.length)})}function se(e){return"string"==typeof e?e:v(e)}function ue(e){return function(){d(!1)}}function ce(){}var le=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return ce},t.handleBlock=function(){return ce},t}i(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,a=void 0===o?{}:o;a.action=t,a.location=function(e,t){return e?u({},t,{pathname:oe(e)+t.pathname}):t}(i,b(e)),a.url=se(a.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,i=void 0===r?{}:r,a=e.location,s=void 0===a?"/":a,c=j(e,["basename","context","location"]),l={createHref:function(e){return oe(n+se(e))},action:"POP",location:ae(n,b(s)),push:this.handlePush,replace:this.handleReplace,go:ue(),goBack:ue(),goForward:ue(),listen:this.handleListen,block:this.handleBlock};return o.createElement(W,u({},c,{history:l,staticContext:i}))},t}(o.Component),fe=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this;return o.createElement(K.Consumer,null,(function(t){t||d(!1);var n,r,i=e.props.location||t.location;return o.Children.forEach(e.props.children,(function(e){if(null==r&&o.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?re(i.pathname,u({},e.props,{path:a})):t.match}})),r?o.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(o.Component);function he(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=j(t,["wrappedComponentRef"]);return o.createElement(K.Consumer,null,(function(t){return t||d(!1),o.createElement(e,u({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,z()(n,e)}var de=o.useContext;function pe(){return de(X)}function me(){return de(K).location}function ye(){var e=de(K).match;return e?e.params:{}}function ge(e){var t=me(),n=de(K).match;return e?re(t.pathname,e):n}var ve=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=C(t.props),t}return i(t,e),t.prototype.render=function(){return o.createElement(W,{history:this.history,children:this.props.children})},t}(o.Component),be=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=N(t.props),t}return i(t,e),t.prototype.render=function(){return o.createElement(W,{history:this.history,children:this.props.children})},t}(o.Component),we=function(e,t){return"function"==typeof e?e(t):e},_e=function(e,t){return"string"==typeof e?b(e,null,null,t):e},Ee=function(e){return e},Se=o.forwardRef;void 0===Se&&(Se=Ee);var Ie=Se((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,a=j(e,["innerRef","navigate","onClick"]),s=a.target,c=u({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return c.ref=Ee!==Se&&t||n,o.createElement("a",c)})),ke=Se((function(e,t){var n=e.component,r=void 0===n?Ie:n,i=e.replace,a=e.to,s=e.innerRef,c=j(e,["component","replace","to","innerRef"]);return o.createElement(K.Consumer,null,(function(e){e||d(!1);var n=e.history,l=_e(we(a,e.location),e.location),f=l?n.createHref(l):"",h=u({},c,{href:f,navigate:function(){var t=we(a,e.location),r=v(e.location)===v(_e(t));(i||r?n.replace:n.push)(t)}});return Ee!==Se?h.ref=t||s:h.innerRef=s,o.createElement(r,h)}))})),Ce=function(e){return e},Te=o.forwardRef;void 0===Te&&(Te=Ce);var Ae=Te((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,a=void 0===i?"active":i,s=e.activeStyle,c=e.className,l=e.exact,f=e.isActive,h=e.location,p=e.sensitive,m=e.strict,y=e.style,g=e.to,v=e.innerRef,b=j(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(K.Consumer,null,(function(e){e||d(!1);var n=h||e.location,i=_e(we(g,n),n),w=i.pathname,_=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=_?re(n.pathname,{path:_,exact:l,sensitive:p,strict:m}):null,S=!!(f?f(E,n):E),I=S?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,a):c,k=S?u({},y,s):y,C=u({"aria-current":S&&r||null,className:I,style:k,to:i},b);return Ce!==Te?C.ref=t||v:C.innerRef=v,o.createElement(ke,C)}))}))},585:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},658:(e,t,n)=>{var r=n(585);e.exports=function e(t,n,i){return r(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(t,n):r(t)?function(t,n,r){for(var i=[],o=0;o<t.length;o++)i.push(e(t[o],n,r).source);return l(new RegExp("(?:"+i.join("|")+")",f(r)),n)}(t,n,i):function(e,t,n){return h(o(e,n),t,n)}(t,n,i)},e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(s+=e.slice(a,d),a=d+f.length,h)s+=h[1];else{var p=e[a],m=n[2],y=n[3],g=n[4],v=n[5],b=n[6],w=n[7];s&&(r.push(s),s="");var _=null!=m&&null!=p&&p!==m,E="+"===b||"*"===b,S="?"===b||"*"===b,I=n[2]||l,k=g||v;r.push({name:y||o++,prefix:m||"",delimiter:I,optional:S,repeat:E,partial:_,asterisk:!!w,pattern:k?c(k):w?".*":"[^"+u(I)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var o="",s=t||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!=typeof l){var f,h=s[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=u(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');o+=l.prefix+f}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"==typeof c)a+=u(c);else{var h=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),a+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=u(n.delimiter||"/"),m=a.slice(-p.length)===p;return i||(a=(m?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+p+"|$)",l(new RegExp("^"+a,f(n)),t)}},86:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for;n&&Symbol.for("react.element"),n&&Symbol.for("react.portal"),n&&Symbol.for("react.fragment"),n&&Symbol.for("react.strict_mode"),n&&Symbol.for("react.profiler"),n&&Symbol.for("react.provider"),n&&Symbol.for("react.context"),n&&Symbol.for("react.async_mode"),n&&Symbol.for("react.concurrent_mode"),n&&Symbol.for("react.forward_ref"),n&&Symbol.for("react.suspense"),n&&Symbol.for("react.suspense_list"),n&&Symbol.for("react.memo"),n&&Symbol.for("react.lazy"),n&&Symbol.for("react.block"),n&&Symbol.for("react.fundamental"),n&&Symbol.for("react.responder"),n&&Symbol.for("react.scope")},663:(e,t,n)=>{"use strict";n(86)},408:(e,t,n)=>{"use strict";var r=n(418),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),o=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),a=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=v.prototype=new g;b.constructor=v,r(b,y.prototype),b.isPureReactComponent=!0;var w={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:w.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var k=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+C(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),T(a,t,n,"",(function(e){return e}))):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+C(s=e[c],c);u+=T(s,t,n,l,a)}else if("function"==typeof(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(s=e.next()).done;)u+=T(s=s.value,t,n,l=r+C(s,c++),a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function x(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function R(){var e=P.current;if(null===e)throw Error(d(321));return e}var N={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null==e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!E.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:x}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{"use strict";e.exports=n(408)},53:(e,t)=>{"use strict";var n,r,i,o;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,l=null,f=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(f,0),e}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,y=null,g=-1,v=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,_=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();b=e+v;try{y(!0,e)?_.postMessage(null):(m=!1,y=null)}catch(e){throw _.postMessage(null),e}}else m=!1},n=function(e){y=e,m||(m=!0,_.postMessage(null))},r=function(e,n){g=h((function(){e(t.unstable_now())}),n)},i=function(){d(g),g=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>k(a,n))void 0!==u&&0>k(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>k(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],T=[],A=1,x=null,P=3,R=!1,N=!1,O=!1;function D(e){for(var t=S(T);null!==t;){if(null===t.callback)I(T);else{if(!(t.startTime<=e))break;I(T),t.sortIndex=t.expirationTime,E(C,t)}t=S(T)}}function M(e){if(O=!1,D(e),!N)if(null!==S(C))N=!0,n(L);else{var t=S(T);null!==t&&r(M,t.startTime-e)}}function L(e,n){N=!1,O&&(O=!1,i()),R=!0;var o=P;try{for(D(n),x=S(C);null!==x&&(!(x.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=x.callback;if("function"==typeof a){x.callback=null,P=x.priorityLevel;var s=a(x.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?x.callback=s:x===S(C)&&I(C),D(n)}else I(C);x=S(C)}if(null!==x)var u=!0;else{var c=S(T);null!==c&&r(M,c.startTime-n),u=!1}return u}finally{x=null,P=o,R=!1}}var B=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||R||(N=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:A++,callback:o,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,E(T,e),null===S(C)&&e===S(T)&&(O?i():O=!0,r(M,a-s))):(e.sortIndex=u,E(C,e),N||R||(N=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},629:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(294)),u=a(n(935)),c=n(207),l=o(n(271)),f=o(n(236));u.default.render(s.default.createElement((function(){return s.default.createElement(c.HashRouter,null,s.default.createElement("nav",{style:{display:"flex",gap:10}},s.default.createElement(c.NavLink,{exact:!0,to:"/"},"nes"),s.default.createElement(c.NavLink,{to:"/ci"},"ci")),s.default.createElement("div",null,s.default.createElement(c.Switch,null,s.default.createElement(c.Route,{path:"/ci"},s.default.createElement(f.App,null)),s.default.createElement(c.Route,{path:"/"},s.default.createElement(l.App,null)))))}),null),document.getElementById("app"))},161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APU=void 0;const r=n(769),i=n(216);class o{setR1(e){this.sequencer.duty=e>>6&3,this.envelope.loop=this.lengthCounter.halt=e>>5&1,this.envelope.constantVolume=e>>4&1,this.envelope.volume=15&e}setR2(e){this.sweep.enabled=e>>7&1,this.sweep.dividerPeriod=e>>4&7,this.sweep.negate=e>>3&1,this.sweep.shiftCount=7&e}setR3(e){this.sequencer.timerValue=1792&this.sequencer.timerValue|e}setR4(e){this.sequencer.timerValue=(7&e)<<8|255&this.sequencer.timerValue,this.lengthCounter.setLoad(e>>3),this.envelope.restart()}envelope;sweep;sequencer;lengthCounter;constructor(e){this.envelope=new c,this.sequencer=new f("pulse"),this.sweep=new l(e,this.sequencer),this.lengthCounter=new h}tickAPU(){this.sequencer.tick()}output(){return 0===this.sequencer.output()||this.sweep.muted()||!this.lengthCounter.output()?0:this.envelope.output()}}class a{setR1(e){this.lengthCounter.halt=e>>7,this.linearCounter.controlFlag=e>>7,this.linearCounter.reloadValue=127&e}setR2(e){this.sequencer.timerValue=1792&this.sequencer.timerValue|e}setR3(e){this.sequencer.timerValue=255&this.sequencer.timerValue|(7&e)<<8,this.lengthCounter.setLoad(e>>3),this.linearCounter.reloadFlag=1}linearCounter=new d;lengthCounter=new h;sequencer=new f("triangle");tickCPU(){this.lengthCounter.output()&&this.linearCounter.output()&&this.sequencer.tick()}output(){return this.sequencer.output()}}class s{mode=0;timerPeriod=0;static timerPeriodTable=[4,8,16,32,64,96,128,160,202,254,380,508,762,1016,2034,4068];setR1(e){this.envelope.loop=this.lengthCounter.halt=e>>5&1,this.envelope.constantVolume=e>>4&1,this.envelope.volume=15&e}setR2(e){this.mode=e>>7,this.timerPeriod=s.timerPeriodTable[15&e]}setR3(e){this.lengthCounter.setLoad(e>>3),this.envelope.restart()}envelope=new c;lengthCounter=new h;timer=0;shiftRegister=1;tickAPU(){0===this.timer?(this.timer=this.timerPeriod,this.timerClock()):this.timer--}timerClock(){const e=1&this.shiftRegister^this.shiftRegister>>(this.mode?6:1)&1;this.shiftRegister>>=1,this.shiftRegister|=e<<14}output(){return 1&this.shiftRegister||!this.lengthCounter.output()?0:this.envelope.output()}}class u{p=0;counter=0;onClock;constructor(e){this.onClock=e,this.reload()}tick(){0===this.counter?(this.onClock&&this.onClock(),this.counter=this.p):this.counter--}reload(){this.counter=this.p}setP(e){this.p=e}}class c{loop=0;constantVolume=0;volume=0;startFlag=!1;divider;decayLevelCounter=0;constructor(){this.divider=new u(this.onDividerClock.bind(this))}tickQuarterFrame(){this.startFlag?(this.startFlag=!1,this.decayLevelCounter=15,this.divider.reload()):this.divider.tick()}onDividerClock(){this.divider.setP(this.volume),this.divider.reload(),this.decayLevelCounter>0?this.decayLevelCounter--:this.loop&&(this.decayLevelCounter=15)}output(){return this.constantVolume?this.volume:this.decayLevelCounter}restart(){this.startFlag=!0}}class l{divider;reloadFlag=!1;enabled=0;dividerPeriod=0;negate=0;shiftCount=0;isPulse1;sequencer;constructor(e,t){this.divider=new u,this.isPulse1=e,this.sequencer=t}targetPeriod(){let e=this.sequencer.timerValue>>this.shiftCount;return this.negate&&(e=this.isPulse1?-e-1:-e),e+this.sequencer.timerValue}isEnabled(){return 1===this.enabled&&this.shiftCount>0}muted(){return this.sequencer.timerValue<8||this.targetPeriod()>2047}tickHalfFrame(){0===this.divider.counter&&this.isEnabled()&&!this.muted()&&(this.sequencer.timerValue=this.targetPeriod()),0===this.divider.counter||this.reloadFlag?(this.divider.setP(this.dividerPeriod),this.reloadFlag=!1):this.divider.counter--}}class f{duty=0;timerValue=0;timer=0;index=0;type;period;static pulseWaveform=[[0,1,0,0,0,0,0,0],[0,1,1,0,0,0,0,0],[0,1,1,1,1,0,0,0],[1,0,0,1,1,1,1,1]];static triangleWaveform=[15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];constructor(e){switch(this.type=e,this.type){case"pulse":this.period=8;break;case"triangle":this.period=32}}tick(){0===this.timer?(this.timer=this.timerValue,this.index=this.index+1&this.period-1):this.timer--}output(){switch(this.type){case"pulse":return f.pulseWaveform[this.duty][this.index];case"triangle":return f.triangleWaveform[this.index]}}}class h{enabled=0;halt=0;setLoad(e){r.assertInRange(e,0,31),this.enabled&&(this.counter=h.lengthTable[e])}counter=0;static lengthTable=[10,254,20,2,40,4,80,6,160,8,60,10,14,12,26,14,12,16,24,18,48,20,96,22,192,24,72,26,16,28,32,30];setEnabled(e){r.assertInRange(e,0,1),this.enabled=e,this.enabled||(this.counter=0)}tickHalfFrame(){0===this.counter||this.halt||this.counter--}output(){return this.counter>0}}class d{controlFlag=0;reloadValue=0;reloadFlag=0;counter=0;tickQuarterFrame(){this.reloadFlag?this.counter=this.reloadValue:this.counter>0&&this.counter--,this.controlFlag||(this.reloadFlag=0)}output(){return this.counter>0}}t.APU=class{constructor(e){this.dmc=new i.DMC(e)}pulse1=new o(!0);pulse2=new o(!1);triangle=new a;noise=new s;dmc;interruptInhibit=0;fiveStepSequence=0;frameInterruptFlag=0;frameCounter2=0;timerResetIn=0;irq(){return 1===this.frameInterruptFlag||1===this.dmc.interruptFlag}tickAPU(){1&this.frameCounter2&&this.clockAPU(),this.timerResetIn>0?0==--this.timerResetIn&&(this.resetFrameCounter(),this.fiveStepSequence&&(this.tickHalfFrame(),this.tickQuarterFrame())):(this.triangle.tickCPU(),this.tickFrameCounterSequencer())}tickFrameCounterSequencer(){if(this.frameCounter2++,0===this.fiveStepSequence)switch(this.frameCounter2){case 7457:this.tickQuarterFrame();break;case 14913:this.tickQuarterFrame(),this.tickHalfFrame();break;case 22371:this.tickQuarterFrame();break;case 29828:this.updateFrameInterruptFlag();break;case 29829:this.tickQuarterFrame(),this.tickHalfFrame(),this.updateFrameInterruptFlag();break;case 29830:this.updateFrameInterruptFlag(),this.frameCounter2=0}else switch(this.frameCounter2){case 7457:this.tickQuarterFrame();break;case 14913:this.tickQuarterFrame(),this.tickHalfFrame();break;case 22371:this.tickQuarterFrame();break;case 37281:this.tickQuarterFrame(),this.tickHalfFrame();break;case 37282:this.frameCounter2=0}}updateFrameInterruptFlag(){this.interruptInhibit||(this.frameInterruptFlag=1)}resetFrameCounter(){this.frameCounter2=0}clockAPU(){this.pulse1.tickAPU(),this.pulse2.tickAPU(),this.noise.tickAPU(),this.dmc.tickAPU()}tickHalfFrame(){this.pulse1.lengthCounter.tickHalfFrame(),this.pulse2.lengthCounter.tickHalfFrame(),this.triangle.lengthCounter.tickHalfFrame(),this.noise.lengthCounter.tickHalfFrame(),this.pulse1.sweep.tickHalfFrame(),this.pulse2.sweep.tickHalfFrame()}tickQuarterFrame(){this.pulse1.envelope.tickQuarterFrame(),this.pulse2.envelope.tickQuarterFrame(),this.noise.envelope.tickQuarterFrame(),this.triangle.linearCounter.tickQuarterFrame()}read(e){switch(e){case 16405:{const e=this.dmc.interruptFlag,t=this.frameInterruptFlag;this.frameInterruptFlag=0;const n=this.pulse1.lengthCounter.output()?1:0,r=this.pulse2.lengthCounter.output()?1:0,i=this.triangle.lengthCounter.output()?1:0,o=this.noise.lengthCounter.output()?1:0;return e<<7|t<<6|(this.dmc.readBytesRemaining>0?1:0)<<4|o<<3|i<<2|r<<1|n}}throw new Error(`APU.read($${e.toString(16)}) not implemented`)}write(e,t){switch(r.assertInRange(e,16384,16407),r.assertUint8(t),31&e){case 0:return void this.pulse1.setR1(t);case 1:return void this.pulse1.setR2(t);case 2:return void this.pulse1.setR3(t);case 3:return void this.pulse1.setR4(t);case 4:return void this.pulse2.setR1(t);case 5:return void this.pulse2.setR2(t);case 6:return void this.pulse2.setR3(t);case 7:return void this.pulse2.setR4(t);case 8:return void this.triangle.setR1(t);case 9:return;case 10:return void this.triangle.setR2(t);case 11:return void this.triangle.setR3(t);case 12:return void this.noise.setR1(t);case 13:return;case 14:return void this.noise.setR2(t);case 15:return void this.noise.setR3(t);case 16:return void this.dmc.setR1(t);case 17:return void this.dmc.setR2(t);case 18:return void this.dmc.setR3(t);case 19:return void this.dmc.setR4(t);case 20:throw new Error("BUG: $4014 should be handled by PPU");case 21:return this.dmc.interruptFlag=0,this.pulse1.lengthCounter.setEnabled(t>>0&1),this.pulse2.lengthCounter.setEnabled(t>>1&1),this.triangle.lengthCounter.setEnabled(t>>2&1),this.noise.lengthCounter.setEnabled(t>>3&1),void(0==(t>>4&1)?this.dmc.readBytesRemaining=0:0===this.dmc.readBytesRemaining&&this.dmc.restart());case 22:throw new Error("BUG: $4016 should be handled by Controller");case 23:return this.fiveStepSequence=t>>7&1,this.interruptInhibit=t>>6&1,this.interruptInhibit&&(this.frameInterruptFlag=0),void(this.timerResetIn=1&this.frameCounter2?3:4)}throw new Error(`APU.write not implemented. 0x${e.toString(16)}, ${t}`)}output(){const e=this.pulse1.output(),t=this.pulse2.output();r.assertInRange(e,0,15),r.assertInRange(t,0,15);const n=95.88/(8128/(e+t)+100),i=this.triangle.output(),o=this.noise.output(),a=this.dmc.output();return r.assertInRange(i,0,15),r.assertInRange(o,0,15),r.assertInRange(a,0,127),this.prevDMC!=a&&(this.prevDMC=a),n+159.79/(1/(i/8227+o/12241+a/22638)+100)}logger;prevDMC=0}},216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DMC=void 0;const r=n(769);class i{mapper;constructor(e){this.mapper=e}setR1(e){this.irqEnabled=e>>7&1,this.loop=e>>6&1,this.rateIndex=15&e,this.irqEnabled||(this.interruptFlag=0)}setR2(e){this.outputLevel=127&e}setR3(e){this.sampleAddress=49152+64*e}setR4(e){this.sampleLength=16*e+1}irqEnabled=0;loop=0;rateIndex=0;static rateTable=[428,380,340,320,286,254,226,214,190,160,142,128,106,84,72,54];outputLevel=0;sampleAddress=49152;sampleLength=1;interruptFlag=0;sampleBuffer=null;readAddress=0;readBytesRemaining=0;cpuStallCount=0;fillBuffer(){null===this.sampleBuffer&&0!==this.readBytesRemaining&&(this.cpuStallCount=4,this.sampleBuffer=this.mapper.readCPU(this.readAddress),65535===this.readAddress?this.readAddress=32768:this.readAddress++,this.readBytesRemaining--,0===this.readBytesRemaining&&(this.loop?this.restart():this.irqEnabled&&(this.interruptFlag=1)))}timer=0;tickAPU(){0===this.timer?(this.timer=i.rateTable[this.rateIndex]/2,this.timerClock()):this.timer--}restart(){this.readAddress=this.sampleAddress,this.readBytesRemaining=this.sampleLength,this.fillBuffer()}timerClock(){this.fillBuffer(),this.outputSilence||(1&this.outputShiftRegister?this.outputLevel+2<=127&&(this.outputLevel+=2):this.outputLevel-2>=0&&(this.outputLevel-=2),this.outputShiftRegister>>=1),this.outputBitsRemainingCounter--,0===this.outputBitsRemainingCounter&&(this.outputBitsRemainingCounter=8,null===this.sampleBuffer?this.outputSilence=1:(this.outputSilence=0,this.outputShiftRegister=this.sampleBuffer,this.sampleBuffer=null))}outputShiftRegister=0;outputBitsRemainingCounter=1;outputSilence=0;output(){return r.assertInRange(this.outputLevel,0,127),this.outputLevel}}t.DMC=i},784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioEventDeque=void 0;const r=n(769),i=16384;t.AudioEventDeque=class{buffer=new Array(i);front=0;back=0;pushBack(e){if(this.buffer[this.back]=e,this.back=this.back+1&16383,this.back===this.front)throw new Error("overflow")}pushFront(e){if(this.front=this.front-1+i&16383,this.buffer[this.front]=e,this.back===this.front)throw new Error("overflow")}size(){return this.back-this.front+i&16383}isEmpty(){return 0===this.size()}peek(){return this.isEmpty()?null:this.buffer[this.front]}pop(){if(this.isEmpty())throw new Error("pop: empty");this.front=this.front+1&16383}get(e){return r.assertInRange(e,0,this.size()-1),this.buffer[this.front+e&16383]}ensureCapacity(e){for(;this.size()>i-e;)this.pop()}}},323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=t.ButtonRight=t.ButtonLeft=t.ButtonDown=t.ButtonUp=t.ButtonStart=t.ButtonSelect=t.ButtonB=t.ButtonA=void 0,t.ButtonA=1,t.ButtonB=2,t.ButtonSelect=4,t.ButtonStart=8,t.ButtonUp=16,t.ButtonDown=32,t.ButtonLeft=64,t.ButtonRight=128,t.Controller=class{strobe=0;controller1=0;controller2=0;realController1=0;realController2=0;write4016(e){this.update(),this.strobe=e,this.update()}read4016(){this.update();const e=1&this.controller1;return this.controller1>>=1,e}read4017(){this.update();const e=1&this.controller2;return this.controller2>>=1,e}setControllerData(e,t){1===e?this.realController1=t:this.realController2=t}update(){1==(1&this.strobe)&&(this.controller1=this.realController1,this.controller2=this.realController2)}}},435:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CPU=t.operation2str=t.CPUHaltError=void 0;const a=o(n(102)),s=n(769);class u extends Error{}function c(e){const t=(()=>{switch(e.op.mode){case a.Mode.IMP:return 0;case a.Mode.IMM:case a.Mode.ZP:case a.Mode.ZPX:case a.Mode.ZPY:case a.Mode.IZX:case a.Mode.IZY:return 2;case a.Mode.ABS:case a.Mode.ABX:case a.Mode.ABY:case a.Mode.IND:case a.Mode.REL:return 4}})(),n=`$${e.arg.toString(16).toUpperCase().padStart(t,"0")}`;return a.Instruction[e.op.opcode]+" "+(()=>{switch(e.op.mode){case a.Mode.IMP:return"";case a.Mode.IMM:return`#${n}`;case a.Mode.ZP:return`${n}`;case a.Mode.ZPX:return`${n},X`;case a.Mode.ZPY:return`${n},Y`;case a.Mode.IZX:return`(${n},X)`;case a.Mode.IZY:return`(${n}),Y`;case a.Mode.ABS:return`${n}`;case a.Mode.ABX:return`${n},X`;case a.Mode.ABY:return`${n},Y`;case a.Mode.IND:return`(${n})`;case a.Mode.REL:return`${n} (relative)`}})()}function l(e){return e+s.UINT8_MAX&s.UINT8_MAX}function f(e){return e+1&s.UINT8_MAX}function h(e){return 1+(e^s.UINT8_MAX)}function d(e){return s.hasBit(e,7)}function p(e){return e+s.UINT16_MAX&s.UINT16_MAX}t.CPUHaltError=u,t.operation2str=c,t.CPU=class{A=0;X=0;Y=0;S;PC=0;cycle=0;debugMode=!1;N=!1;V=!1;D=!1;I=!1;Z=!1;C=!1;halt=!1;nmi;stallCount=6;constructor(e,t,n,r,i){this.nmi=n,this.S=253,this.I=!0,this.CPURAM=new Uint8Array(2048),this.mapper=e,this.ppu=t,this.controller=r,this.apu=i,this.reset()}reset(){this.PC=this.read16(65532)}postIncPC(){const e=this.PC++;return this.PC>s.UINT16_MAX&&(this.PC=0),e}fetch(){return this.read(this.postIncPC())}fetch16(){return this.fetch()|this.fetch()<<8}fetchInstruction(){let e;e=this.nmi.handle()?a.nmi:!this.I&&this.apu.irq()?a.irq:a.opcodes[this.fetch()];let t=0;return t=e.mode===a.Mode.IMP?0:e.mode<=a.Mode.REL?this.fetch():this.fetch16(),{op:e,arg:t}}setNZ(e){return this.N=s.hasBit(e,7),this.Z=0===e,e}setNZC(e){return this.C=s.hasBit(e,8),e&=s.UINT8_MAX,this.N=s.hasBit(e,7),this.Z=0===e,e}push(e){this.write(256+this.S,e),this.S=l(this.S)}push16(e){s.assertUint16(e),this.push(e>>8),this.push(e&s.UINT8_MAX)}pop(){return this.S=f(this.S),s.assertUint8(this.S),this.read(256+this.S)}pop16(){return this.pop()|this.pop()<<8}setP(e){this.N=1==(e>>7&1),this.V=1==(e>>6&1),this.D=1==(e>>3&1),this.I=1==(e>>2&1),this.Z=1==(e>>1&1),this.C=1==(e>>0&1)}getP(){let e=32;return this.N&&(e|=128),this.V&&(e|=64),this.D&&(e|=8),this.I&&(e|=4),this.Z&&(e|=2),this.C&&(e|=1),e}execute(e){const{op:t,arg:n}=e;this.stallCount+=t.cycle-1;let r=!1,i=0;switch(t.mode){case a.Mode.IMM:i=p(this.PC);break;case a.Mode.ZP:i=n;break;case a.Mode.ZPX:i=n+this.X&s.UINT8_MAX;break;case a.Mode.ZPY:i=n+this.Y&s.UINT8_MAX;break;case a.Mode.IZX:i=this.read16(n+this.X&s.UINT8_MAX);break;case a.Mode.IZY:{const e=this.read16(n),t=e+this.Y&s.UINT16_MAX;r=t>>8!=e>>8,i=t;break}case a.Mode.ABS:i=n;break;case a.Mode.ABX:i=n+this.X&s.UINT16_MAX,r=i>>8!=n>>8;break;case a.Mode.ABY:i=n+this.Y&s.UINT16_MAX,r=i>>8!=n>>8;break;case a.Mode.IND:i=this.read16(n);break;case a.Mode.REL:i=this.PC+s.uint8ToSigned(n)&s.UINT16_MAX}let o=!1;switch(t.opcode){case a.Instruction._NMI:this.push16(this.PC),this.push(this.getP()),this.PC=this.read16(65530),this.I=!0;break;case a.Instruction._IRQ:this.push16(this.PC),this.push(this.getP()),this.PC=this.read16(65534),this.I=!0;break;case a.Instruction.ORA:this.A=this.setNZ(this.A|this.read(i));break;case a.Instruction.AND:this.A=this.setNZ(this.A&this.read(i));break;case a.Instruction.EOR:this.A=this.setNZ(this.A^this.read(i));break;case a.Instruction.ADC:{const e=this.A,t=this.read(i);this.A=this.setNZC(e+(this.C?1:0)+t),this.V=d(e)===d(t)&&d(e)!=d(this.A);break}case a.Instruction.SBC:{const e=this.A,t=this.read(i)^s.UINT8_MAX;this.A=this.setNZC(e+(this.C?1:0)+t),this.V=d(e)===d(t)&&d(e)!=d(this.A);break}case a.Instruction.CMP:this.setNZC(this.A+h(this.read(i)));break;case a.Instruction.CPX:this.setNZC(this.X+h(this.read(i)));break;case a.Instruction.CPY:this.setNZC(this.Y+h(this.read(i)));break;case a.Instruction.DEC:this.write(i,this.setNZ(l(this.read(i))));break;case a.Instruction.DEX:this.X=this.setNZ(l(this.X));break;case a.Instruction.DEY:this.Y=this.setNZ(l(this.Y));break;case a.Instruction.INC:this.write(i,this.setNZ(f(this.read(i))));break;case a.Instruction.INX:this.X=this.setNZ(f(this.X));break;case a.Instruction.INY:this.Y=this.setNZ(f(this.Y));break;case a.Instruction.ASL:{const e=t.mode?this.read(i):this.A,n=this.setNZC(2*e);t.mode?this.write(i,n):this.A=n;break}case a.Instruction.ROL:{const e=t.mode?this.read(i):this.A,n=this.setNZC(2*e+(this.C?1:0));t.mode?this.write(i,n):this.A=n;break}case a.Instruction.LSR:{const e=t.mode?this.read(i):this.A,n=this.setNZC(e>>1|(1&e)<<8);t.mode?this.write(i,n):this.A=n;break}case a.Instruction.ROR:{const e=t.mode?this.read(i):this.A,n=this.setNZC(e>>1|(this.C?1:0)<<7|(1&e)<<8);t.mode?this.write(i,n):this.A=n;break}case a.Instruction.LDA:this.A=this.setNZ(this.read(i));break;case a.Instruction.STA:this.write(i,this.A);break;case a.Instruction.LDX:this.X=this.setNZ(this.read(i));break;case a.Instruction.STX:this.write(i,this.X);break;case a.Instruction.LDY:this.Y=this.setNZ(this.read(i));break;case a.Instruction.STY:this.write(i,this.Y);break;case a.Instruction.TAX:this.X=this.setNZ(this.A);break;case a.Instruction.TXA:this.A=this.setNZ(this.X);break;case a.Instruction.TAY:this.Y=this.setNZ(this.A);break;case a.Instruction.TYA:this.A=this.setNZ(this.Y);break;case a.Instruction.TSX:this.X=this.setNZ(this.S);break;case a.Instruction.TXS:this.S=this.X;break;case a.Instruction.PLA:this.A=this.setNZ(this.pop());break;case a.Instruction.PHA:this.push(this.A);break;case a.Instruction.PLP:this.setP(this.pop());break;case a.Instruction.PHP:this.push(48|this.getP());break;case a.Instruction.BPL:this.N||(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BMI:this.N&&(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BVC:this.V||(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BVS:this.V&&(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BCC:this.C||(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BCS:this.C&&(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BNE:this.Z||(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BEQ:this.Z&&(r=i>>8!=this.PC>>8,this.PC=i,o=!0);break;case a.Instruction.BRK:this.push16(this.PC),this.push(this.getP()),this.PC=this.read16(65534);break;case a.Instruction.RTI:this.setP(this.pop()),this.PC=this.pop16();break;case a.Instruction.JSR:this.push16(p(this.PC)),this.PC=i;break;case a.Instruction.RTS:this.PC=this.pop16()+1&s.UINT16_MAX;break;case a.Instruction.JMP:this.PC=i;break;case a.Instruction.BIT:{const e=this.read(i);this.Z=0==(e&this.A),this.N=1==(e>>7&1),this.V=1==(e>>6&1);break}case a.Instruction.CLC:this.C=!1;break;case a.Instruction.SEC:this.C=!0;break;case a.Instruction.CLD:this.D=!1;break;case a.Instruction.SED:this.D=!0;break;case a.Instruction.CLI:this.I=!1;break;case a.Instruction.SEI:this.I=!0;break;case a.Instruction.CLV:this.V=!1;break;case a.Instruction.NOP:break;case a.Instruction.SLO:{const e=this.setNZC(this.read(i)<<1);this.write(i,e),this.A=this.setNZ(this.A|e);break}case a.Instruction.RLA:{const e=this.setNZC(2*this.read(i)+(this.C?1:0));this.write(i,e),this.A=this.setNZ(this.A&e);break}case a.Instruction.SRE:{let e=this.read(i);this.C=1==(1&e),e=this.setNZ(e>>1),this.write(i,e),this.A=this.setNZ(this.A^e);break}case a.Instruction.RRA:{let e=this.read(i);e=this.setNZC((1&e)<<8|e>>1|(this.C?1:0)<<7),this.write(i,e);const t=this.A;this.A=this.setNZC(t+(this.C?1:0)+e),this.V=d(t)===d(e)&&d(t)!=d(this.A);break}case a.Instruction.SAX:this.write(i,this.A&this.X);break;case a.Instruction.LAX:this.A=this.X=this.setNZ(this.read(i));break;case a.Instruction.DCP:{const e=this.setNZ(l(this.read(i)));this.write(i,e),this.setNZC(this.A+h(e));break}case a.Instruction.ISC:{this.write(i,this.setNZ(f(this.read(i))));const e=this.A,t=this.read(i)^s.UINT8_MAX;this.A=this.setNZC(e+(this.C?1:0)+t),this.V=d(e)===d(t)&&d(e)!=d(this.A);break}case a.Instruction.ANC:this.A=this.setNZ(this.A&this.read(i)),this.C=1==(this.A>>7&1);break;case a.Instruction.ALR:{const e=this.A&this.read(i);this.A=this.setNZ(e>>1),this.C=1==(1&e);break}case a.Instruction.ARR:{const e=this.read(i);this.A&=e,this.A=this.setNZ(this.A>>1|(this.C?1:0)<<7),this.C=1==(this.A>>6&1),this.V=1==((this.C?1:0)^this.A>>5&1);break}case a.Instruction.XAA:this.A=this.setNZ(this.X&this.read(i));break;case a.Instruction.AXS:this.X=this.setNZC((this.A&this.X)+h(this.read(i)));break;case a.Instruction.AHX:this.write(i,this.A&this.X&f(i>>8));break;case a.Instruction.SHY:{let e=i>>8;r&&(e=f(i>>8)&this.Y);const t=this.Y&f(i>>8);this.write(e<<8|255&i,t);break}case a.Instruction.SHX:{let e=i>>8;r&&(e=f(i>>8)&this.X);const t=this.X&f(i>>8);this.write(e<<8|255&i,t);break}case a.Instruction.TAS:this.S=this.A&this.X,this.write(i,this.S&f(i>>8));break;case a.Instruction.LAS:this.A=this.X=this.S=this.setNZ(this.read(i)&this.S);break;case a.Instruction.KIL:this.halt=!0;break;default:throw new Error(`BUG: unimplemented opcode ${t.op}`)}o&&this.stallCount++,r&&t.extra&&this.stallCount++}tickCPU(){if(this.halt)throw new u("CPU halt");this.apu.dmc.cpuStallCount>0?this.apu.dmc.cpuStallCount--:(this.cycle++,this.stallCount>0?this.stallCount--:(this.instructionCount++,this.execute(this.fetchInstruction())))}CPURAM;mapper;ppu;controller;apu;logger;read(e){if(e<8192)return this.CPURAM[2047&e];if(e<16384)return this.ppu.readCPU(e);if(e<16406)return this.apu.read(e);if(16406===e)return this.controller.read4016();if(16407===e)return this.controller.read4017();if(!(e<16416))return this.mapper.readCPU(e);throw new Error(`Unsupported CPU.read 0x${e.toString(16)}`)}read16(e){let t=e+1;return t>>8>e>>8&&(t-=256),this.read(e)|this.read(t)<<8}dmaBuf=new Array(256);write(e,t){if(s.assertUint16(e),s.assertUint8(t),e<8192)this.CPURAM[e%2048]=t;else if(e<16384)this.ppu.writeCPU(e,t);else if(16404===e){for(let e=0;e<256;e++)this.dmaBuf[e]=this.read(t<<8|e);this.ppu.sendDMA(this.dmaBuf),this.stallCount+=513+(1&this.cycle)}else if(16406===e)this.controller.write4016(t);else if(e<16408)this.apu.write(e,t);else{if(e<16416)throw new Error(`Unsupported write(0x${e.toString(16)}, ${t}) to CPU Test Mode`);this.mapper.writeCPU(e,t)}}instructionCount=0;setPC(e){this.PC=e}cpuStatus(){return{registers:{pc:this.PC,a:this.A,x:this.X,y:this.Y,p:this.getP(),s:this.S},cyc:this.cycle,instr:this.instructionCount}}getInstruction(e){const t=a.opcodes[this.read(e++)],n=(()=>{switch(t.mode){case a.Mode.IMP:return 0;case a.Mode.IMM:case a.Mode.ZP:case a.Mode.ZPX:case a.Mode.ZPY:case a.Mode.IZX:case a.Mode.IZY:case a.Mode.REL:return this.read(e++);case a.Mode.ABS:case a.Mode.ABX:case a.Mode.ABY:case a.Mode.IND:{const t=this.read16(e);return e+=2,t}}})();return[{op:t,arg:n},e]}disasm(e){let t=this.PC;const n=new Array;for(let r=0;r<e&&t<65532;r++){const[e,r]=this.getInstruction(t);n.push([t,c(e)]),t=r}return n}}},79:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NMI=void 0,t.NMI=class{x=!1;set(){this.x=!0}handle(){const e=this.x;return this.x=!1,e}}},102:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.opcodes=t.irq=t.nmi=t.Instruction=t.Mode=void 0,function(e){e[e.IMP=0]="IMP",e[e.IMM=1]="IMM",e[e.ZP=2]="ZP",e[e.ZPX=3]="ZPX",e[e.ZPY=4]="ZPY",e[e.IZX=5]="IZX",e[e.IZY=6]="IZY",e[e.REL=7]="REL",e[e.ABS=8]="ABS",e[e.ABX=9]="ABX",e[e.ABY=10]="ABY",e[e.IND=11]="IND"}(n=t.Mode||(t.Mode={})),function(e){e[e.ADC=0]="ADC",e[e.AHX=1]="AHX",e[e.ALR=2]="ALR",e[e.ANC=3]="ANC",e[e.AND=4]="AND",e[e.ARR=5]="ARR",e[e.ASL=6]="ASL",e[e.AXS=7]="AXS",e[e.BCC=8]="BCC",e[e.BCS=9]="BCS",e[e.BEQ=10]="BEQ",e[e.BIT=11]="BIT",e[e.BMI=12]="BMI",e[e.BNE=13]="BNE",e[e.BPL=14]="BPL",e[e.BRK=15]="BRK",e[e.BVC=16]="BVC",e[e.BVS=17]="BVS",e[e.CLC=18]="CLC",e[e.CLD=19]="CLD",e[e.CLI=20]="CLI",e[e.CLV=21]="CLV",e[e.CMP=22]="CMP",e[e.CPX=23]="CPX",e[e.CPY=24]="CPY",e[e.DCP=25]="DCP",e[e.DEC=26]="DEC",e[e.DEX=27]="DEX",e[e.DEY=28]="DEY",e[e.EOR=29]="EOR",e[e.INC=30]="INC",e[e.INX=31]="INX",e[e.INY=32]="INY",e[e.ISC=33]="ISC",e[e.JMP=34]="JMP",e[e.JSR=35]="JSR",e[e.KIL=36]="KIL",e[e.LAS=37]="LAS",e[e.LAX=38]="LAX",e[e.LDA=39]="LDA",e[e.LDX=40]="LDX",e[e.LDY=41]="LDY",e[e.LSR=42]="LSR",e[e.NOP=43]="NOP",e[e.ORA=44]="ORA",e[e.PHA=45]="PHA",e[e.PHP=46]="PHP",e[e.PLA=47]="PLA",e[e.PLP=48]="PLP",e[e.RLA=49]="RLA",e[e.ROL=50]="ROL",e[e.ROR=51]="ROR",e[e.RRA=52]="RRA",e[e.RTI=53]="RTI",e[e.RTS=54]="RTS",e[e.SAX=55]="SAX",e[e.SBC=56]="SBC",e[e.SEC=57]="SEC",e[e.SED=58]="SED",e[e.SEI=59]="SEI",e[e.SHX=60]="SHX",e[e.SHY=61]="SHY",e[e.SLO=62]="SLO",e[e.SRE=63]="SRE",e[e.STA=64]="STA",e[e.STX=65]="STX",e[e.STY=66]="STY",e[e.TAS=67]="TAS",e[e.TAX=68]="TAX",e[e.TAY=69]="TAY",e[e.TSX=70]="TSX",e[e.TXA=71]="TXA",e[e.TXS=72]="TXS",e[e.TYA=73]="TYA",e[e.XAA=74]="XAA",e[e._NMI=75]="_NMI",e[e._IRQ=76]="_IRQ"}(r=t.Instruction||(t.Instruction={})),t.nmi={op:256,opcode:r._NMI,mode:n.IMP,cycle:7,extra:!1},t.irq={op:257,opcode:r._IRQ,mode:n.IMP,cycle:7,extra:!1},t.opcodes=[{op:0,opcode:r.BRK,mode:n.IMP,cycle:7,extra:!1},{op:1,opcode:r.ORA,mode:n.IZX,cycle:6,extra:!1},{op:2,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:3,opcode:r.SLO,mode:n.IZX,cycle:8,extra:!1},{op:4,opcode:r.NOP,mode:n.ZP,cycle:3,extra:!1},{op:5,opcode:r.ORA,mode:n.ZP,cycle:3,extra:!1},{op:6,opcode:r.ASL,mode:n.ZP,cycle:5,extra:!1},{op:7,opcode:r.SLO,mode:n.ZP,cycle:5,extra:!1},{op:8,opcode:r.PHP,mode:n.IMP,cycle:3,extra:!1},{op:9,opcode:r.ORA,mode:n.IMM,cycle:2,extra:!1},{op:10,opcode:r.ASL,mode:n.IMP,cycle:2,extra:!1},{op:11,opcode:r.ANC,mode:n.IMM,cycle:2,extra:!1},{op:12,opcode:r.NOP,mode:n.ABS,cycle:4,extra:!1},{op:13,opcode:r.ORA,mode:n.ABS,cycle:4,extra:!1},{op:14,opcode:r.ASL,mode:n.ABS,cycle:6,extra:!1},{op:15,opcode:r.SLO,mode:n.ABS,cycle:6,extra:!1},{op:16,opcode:r.BPL,mode:n.REL,cycle:2,extra:!0},{op:17,opcode:r.ORA,mode:n.IZY,cycle:5,extra:!0},{op:18,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:19,opcode:r.SLO,mode:n.IZY,cycle:8,extra:!1},{op:20,opcode:r.NOP,mode:n.ZPX,cycle:4,extra:!1},{op:21,opcode:r.ORA,mode:n.ZPX,cycle:4,extra:!1},{op:22,opcode:r.ASL,mode:n.ZPX,cycle:6,extra:!1},{op:23,opcode:r.SLO,mode:n.ZPX,cycle:6,extra:!1},{op:24,opcode:r.CLC,mode:n.IMP,cycle:2,extra:!1},{op:25,opcode:r.ORA,mode:n.ABY,cycle:4,extra:!0},{op:26,opcode:r.NOP,mode:n.IMP,cycle:2,extra:!1},{op:27,opcode:r.SLO,mode:n.ABY,cycle:7,extra:!1},{op:28,opcode:r.NOP,mode:n.ABX,cycle:4,extra:!0},{op:29,opcode:r.ORA,mode:n.ABX,cycle:4,extra:!0},{op:30,opcode:r.ASL,mode:n.ABX,cycle:7,extra:!1},{op:31,opcode:r.SLO,mode:n.ABX,cycle:7,extra:!1},{op:32,opcode:r.JSR,mode:n.ABS,cycle:6,extra:!1},{op:33,opcode:r.AND,mode:n.IZX,cycle:6,extra:!1},{op:34,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:35,opcode:r.RLA,mode:n.IZX,cycle:8,extra:!1},{op:36,opcode:r.BIT,mode:n.ZP,cycle:3,extra:!1},{op:37,opcode:r.AND,mode:n.ZP,cycle:3,extra:!1},{op:38,opcode:r.ROL,mode:n.ZP,cycle:5,extra:!1},{op:39,opcode:r.RLA,mode:n.ZP,cycle:5,extra:!1},{op:40,opcode:r.PLP,mode:n.IMP,cycle:4,extra:!1},{op:41,opcode:r.AND,mode:n.IMM,cycle:2,extra:!1},{op:42,opcode:r.ROL,mode:n.IMP,cycle:2,extra:!1},{op:43,opcode:r.ANC,mode:n.IMM,cycle:2,extra:!1},{op:44,opcode:r.BIT,mode:n.ABS,cycle:4,extra:!1},{op:45,opcode:r.AND,mode:n.ABS,cycle:4,extra:!1},{op:46,opcode:r.ROL,mode:n.ABS,cycle:6,extra:!1},{op:47,opcode:r.RLA,mode:n.ABS,cycle:6,extra:!1},{op:48,opcode:r.BMI,mode:n.REL,cycle:2,extra:!0},{op:49,opcode:r.AND,mode:n.IZY,cycle:5,extra:!0},{op:50,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:51,opcode:r.RLA,mode:n.IZY,cycle:8,extra:!1},{op:52,opcode:r.NOP,mode:n.ZPX,cycle:4,extra:!1},{op:53,opcode:r.AND,mode:n.ZPX,cycle:4,extra:!1},{op:54,opcode:r.ROL,mode:n.ZPX,cycle:6,extra:!1},{op:55,opcode:r.RLA,mode:n.ZPX,cycle:6,extra:!1},{op:56,opcode:r.SEC,mode:n.IMP,cycle:2,extra:!1},{op:57,opcode:r.AND,mode:n.ABY,cycle:4,extra:!0},{op:58,opcode:r.NOP,mode:n.IMP,cycle:2,extra:!1},{op:59,opcode:r.RLA,mode:n.ABY,cycle:7,extra:!1},{op:60,opcode:r.NOP,mode:n.ABX,cycle:4,extra:!0},{op:61,opcode:r.AND,mode:n.ABX,cycle:4,extra:!0},{op:62,opcode:r.ROL,mode:n.ABX,cycle:7,extra:!1},{op:63,opcode:r.RLA,mode:n.ABX,cycle:7,extra:!1},{op:64,opcode:r.RTI,mode:n.IMP,cycle:6,extra:!1},{op:65,opcode:r.EOR,mode:n.IZX,cycle:6,extra:!1},{op:66,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:67,opcode:r.SRE,mode:n.IZX,cycle:8,extra:!1},{op:68,opcode:r.NOP,mode:n.ZP,cycle:3,extra:!1},{op:69,opcode:r.EOR,mode:n.ZP,cycle:3,extra:!1},{op:70,opcode:r.LSR,mode:n.ZP,cycle:5,extra:!1},{op:71,opcode:r.SRE,mode:n.ZP,cycle:5,extra:!1},{op:72,opcode:r.PHA,mode:n.IMP,cycle:3,extra:!1},{op:73,opcode:r.EOR,mode:n.IMM,cycle:2,extra:!1},{op:74,opcode:r.LSR,mode:n.IMP,cycle:2,extra:!1},{op:75,opcode:r.ALR,mode:n.IMM,cycle:2,extra:!1},{op:76,opcode:r.JMP,mode:n.ABS,cycle:3,extra:!1},{op:77,opcode:r.EOR,mode:n.ABS,cycle:4,extra:!1},{op:78,opcode:r.LSR,mode:n.ABS,cycle:6,extra:!1},{op:79,opcode:r.SRE,mode:n.ABS,cycle:6,extra:!1},{op:80,opcode:r.BVC,mode:n.REL,cycle:2,extra:!0},{op:81,opcode:r.EOR,mode:n.IZY,cycle:5,extra:!0},{op:82,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:83,opcode:r.SRE,mode:n.IZY,cycle:8,extra:!1},{op:84,opcode:r.NOP,mode:n.ZPX,cycle:4,extra:!1},{op:85,opcode:r.EOR,mode:n.ZPX,cycle:4,extra:!1},{op:86,opcode:r.LSR,mode:n.ZPX,cycle:6,extra:!1},{op:87,opcode:r.SRE,mode:n.ZPX,cycle:6,extra:!1},{op:88,opcode:r.CLI,mode:n.IMP,cycle:2,extra:!1},{op:89,opcode:r.EOR,mode:n.ABY,cycle:4,extra:!0},{op:90,opcode:r.NOP,mode:n.IMP,cycle:2,extra:!1},{op:91,opcode:r.SRE,mode:n.ABY,cycle:7,extra:!1},{op:92,opcode:r.NOP,mode:n.ABX,cycle:4,extra:!0},{op:93,opcode:r.EOR,mode:n.ABX,cycle:4,extra:!0},{op:94,opcode:r.LSR,mode:n.ABX,cycle:7,extra:!1},{op:95,opcode:r.SRE,mode:n.ABX,cycle:7,extra:!1},{op:96,opcode:r.RTS,mode:n.IMP,cycle:6,extra:!1},{op:97,opcode:r.ADC,mode:n.IZX,cycle:6,extra:!1},{op:98,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:99,opcode:r.RRA,mode:n.IZX,cycle:8,extra:!1},{op:100,opcode:r.NOP,mode:n.ZP,cycle:3,extra:!1},{op:101,opcode:r.ADC,mode:n.ZP,cycle:3,extra:!1},{op:102,opcode:r.ROR,mode:n.ZP,cycle:5,extra:!1},{op:103,opcode:r.RRA,mode:n.ZP,cycle:5,extra:!1},{op:104,opcode:r.PLA,mode:n.IMP,cycle:4,extra:!1},{op:105,opcode:r.ADC,mode:n.IMM,cycle:2,extra:!1},{op:106,opcode:r.ROR,mode:n.IMP,cycle:2,extra:!1},{op:107,opcode:r.ARR,mode:n.IMM,cycle:2,extra:!1},{op:108,opcode:r.JMP,mode:n.IND,cycle:5,extra:!1},{op:109,opcode:r.ADC,mode:n.ABS,cycle:4,extra:!1},{op:110,opcode:r.ROR,mode:n.ABS,cycle:6,extra:!1},{op:111,opcode:r.RRA,mode:n.ABS,cycle:6,extra:!1},{op:112,opcode:r.BVS,mode:n.REL,cycle:2,extra:!0},{op:113,opcode:r.ADC,mode:n.IZY,cycle:5,extra:!0},{op:114,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:115,opcode:r.RRA,mode:n.IZY,cycle:8,extra:!1},{op:116,opcode:r.NOP,mode:n.ZPX,cycle:4,extra:!1},{op:117,opcode:r.ADC,mode:n.ZPX,cycle:4,extra:!1},{op:118,opcode:r.ROR,mode:n.ZPX,cycle:6,extra:!1},{op:119,opcode:r.RRA,mode:n.ZPX,cycle:6,extra:!1},{op:120,opcode:r.SEI,mode:n.IMP,cycle:2,extra:!1},{op:121,opcode:r.ADC,mode:n.ABY,cycle:4,extra:!0},{op:122,opcode:r.NOP,mode:n.IMP,cycle:2,extra:!1},{op:123,opcode:r.RRA,mode:n.ABY,cycle:7,extra:!1},{op:124,opcode:r.NOP,mode:n.ABX,cycle:4,extra:!0},{op:125,opcode:r.ADC,mode:n.ABX,cycle:4,extra:!0},{op:126,opcode:r.ROR,mode:n.ABX,cycle:7,extra:!1},{op:127,opcode:r.RRA,mode:n.ABX,cycle:7,extra:!1},{op:128,opcode:r.NOP,mode:n.IMM,cycle:2,extra:!1},{op:129,opcode:r.STA,mode:n.IZX,cycle:6,extra:!1},{op:130,opcode:r.NOP,mode:n.IMM,cycle:2,extra:!1},{op:131,opcode:r.SAX,mode:n.IZX,cycle:6,extra:!1},{op:132,opcode:r.STY,mode:n.ZP,cycle:3,extra:!1},{op:133,opcode:r.STA,mode:n.ZP,cycle:3,extra:!1},{op:134,opcode:r.STX,mode:n.ZP,cycle:3,extra:!1},{op:135,opcode:r.SAX,mode:n.ZP,cycle:3,extra:!1},{op:136,opcode:r.DEY,mode:n.IMP,cycle:2,extra:!1},{op:137,opcode:r.NOP,mode:n.IMM,cycle:2,extra:!1},{op:138,opcode:r.TXA,mode:n.IMP,cycle:2,extra:!1},{op:139,opcode:r.XAA,mode:n.IMM,cycle:2,extra:!1},{op:140,opcode:r.STY,mode:n.ABS,cycle:4,extra:!1},{op:141,opcode:r.STA,mode:n.ABS,cycle:4,extra:!1},{op:142,opcode:r.STX,mode:n.ABS,cycle:4,extra:!1},{op:143,opcode:r.SAX,mode:n.ABS,cycle:4,extra:!1},{op:144,opcode:r.BCC,mode:n.REL,cycle:2,extra:!0},{op:145,opcode:r.STA,mode:n.IZY,cycle:6,extra:!1},{op:146,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:147,opcode:r.AHX,mode:n.IZY,cycle:6,extra:!1},{op:148,opcode:r.STY,mode:n.ZPX,cycle:4,extra:!1},{op:149,opcode:r.STA,mode:n.ZPX,cycle:4,extra:!1},{op:150,opcode:r.STX,mode:n.ZPY,cycle:4,extra:!1},{op:151,opcode:r.SAX,mode:n.ZPY,cycle:4,extra:!1},{op:152,opcode:r.TYA,mode:n.IMP,cycle:2,extra:!1},{op:153,opcode:r.STA,mode:n.ABY,cycle:5,extra:!1},{op:154,opcode:r.TXS,mode:n.IMP,cycle:2,extra:!1},{op:155,opcode:r.TAS,mode:n.ABY,cycle:5,extra:!1},{op:156,opcode:r.SHY,mode:n.ABX,cycle:5,extra:!1},{op:157,opcode:r.STA,mode:n.ABX,cycle:5,extra:!1},{op:158,opcode:r.SHX,mode:n.ABY,cycle:5,extra:!1},{op:159,opcode:r.AHX,mode:n.ABY,cycle:5,extra:!1},{op:160,opcode:r.LDY,mode:n.IMM,cycle:2,extra:!1},{op:161,opcode:r.LDA,mode:n.IZX,cycle:6,extra:!1},{op:162,opcode:r.LDX,mode:n.IMM,cycle:2,extra:!1},{op:163,opcode:r.LAX,mode:n.IZX,cycle:6,extra:!1},{op:164,opcode:r.LDY,mode:n.ZP,cycle:3,extra:!1},{op:165,opcode:r.LDA,mode:n.ZP,cycle:3,extra:!1},{op:166,opcode:r.LDX,mode:n.ZP,cycle:3,extra:!1},{op:167,opcode:r.LAX,mode:n.ZP,cycle:3,extra:!1},{op:168,opcode:r.TAY,mode:n.IMP,cycle:2,extra:!1},{op:169,opcode:r.LDA,mode:n.IMM,cycle:2,extra:!1},{op:170,opcode:r.TAX,mode:n.IMP,cycle:2,extra:!1},{op:171,opcode:r.LAX,mode:n.IMM,cycle:2,extra:!1},{op:172,opcode:r.LDY,mode:n.ABS,cycle:4,extra:!1},{op:173,opcode:r.LDA,mode:n.ABS,cycle:4,extra:!1},{op:174,opcode:r.LDX,mode:n.ABS,cycle:4,extra:!1},{op:175,opcode:r.LAX,mode:n.ABS,cycle:4,extra:!1},{op:176,opcode:r.BCS,mode:n.REL,cycle:2,extra:!0},{op:177,opcode:r.LDA,mode:n.IZY,cycle:5,extra:!0},{op:178,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:179,opcode:r.LAX,mode:n.IZY,cycle:5,extra:!0},{op:180,opcode:r.LDY,mode:n.ZPX,cycle:4,extra:!1},{op:181,opcode:r.LDA,mode:n.ZPX,cycle:4,extra:!1},{op:182,opcode:r.LDX,mode:n.ZPY,cycle:4,extra:!1},{op:183,opcode:r.LAX,mode:n.ZPY,cycle:4,extra:!1},{op:184,opcode:r.CLV,mode:n.IMP,cycle:2,extra:!1},{op:185,opcode:r.LDA,mode:n.ABY,cycle:4,extra:!0},{op:186,opcode:r.TSX,mode:n.IMP,cycle:2,extra:!1},{op:187,opcode:r.LAS,mode:n.ABY,cycle:4,extra:!0},{op:188,opcode:r.LDY,mode:n.ABX,cycle:4,extra:!0},{op:189,opcode:r.LDA,mode:n.ABX,cycle:4,extra:!0},{op:190,opcode:r.LDX,mode:n.ABY,cycle:4,extra:!0},{op:191,opcode:r.LAX,mode:n.ABY,cycle:4,extra:!0},{op:192,opcode:r.CPY,mode:n.IMM,cycle:2,extra:!1},{op:193,opcode:r.CMP,mode:n.IZX,cycle:6,extra:!1},{op:194,opcode:r.NOP,mode:n.IMM,cycle:2,extra:!1},{op:195,opcode:r.DCP,mode:n.IZX,cycle:8,extra:!1},{op:196,opcode:r.CPY,mode:n.ZP,cycle:3,extra:!1},{op:197,opcode:r.CMP,mode:n.ZP,cycle:3,extra:!1},{op:198,opcode:r.DEC,mode:n.ZP,cycle:5,extra:!1},{op:199,opcode:r.DCP,mode:n.ZP,cycle:5,extra:!1},{op:200,opcode:r.INY,mode:n.IMP,cycle:2,extra:!1},{op:201,opcode:r.CMP,mode:n.IMM,cycle:2,extra:!1},{op:202,opcode:r.DEX,mode:n.IMP,cycle:2,extra:!1},{op:203,opcode:r.AXS,mode:n.IMM,cycle:2,extra:!1},{op:204,opcode:r.CPY,mode:n.ABS,cycle:4,extra:!1},{op:205,opcode:r.CMP,mode:n.ABS,cycle:4,extra:!1},{op:206,opcode:r.DEC,mode:n.ABS,cycle:6,extra:!1},{op:207,opcode:r.DCP,mode:n.ABS,cycle:6,extra:!1},{op:208,opcode:r.BNE,mode:n.REL,cycle:2,extra:!0},{op:209,opcode:r.CMP,mode:n.IZY,cycle:5,extra:!0},{op:210,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:211,opcode:r.DCP,mode:n.IZY,cycle:8,extra:!1},{op:212,opcode:r.NOP,mode:n.ZPX,cycle:4,extra:!1},{op:213,opcode:r.CMP,mode:n.ZPX,cycle:4,extra:!1},{op:214,opcode:r.DEC,mode:n.ZPX,cycle:6,extra:!1},{op:215,opcode:r.DCP,mode:n.ZPX,cycle:6,extra:!1},{op:216,opcode:r.CLD,mode:n.IMP,cycle:2,extra:!1},{op:217,opcode:r.CMP,mode:n.ABY,cycle:4,extra:!0},{op:218,opcode:r.NOP,mode:n.IMP,cycle:2,extra:!1},{op:219,opcode:r.DCP,mode:n.ABY,cycle:7,extra:!1},{op:220,opcode:r.NOP,mode:n.ABX,cycle:4,extra:!0},{op:221,opcode:r.CMP,mode:n.ABX,cycle:4,extra:!0},{op:222,opcode:r.DEC,mode:n.ABX,cycle:7,extra:!1},{op:223,opcode:r.DCP,mode:n.ABX,cycle:7,extra:!1},{op:224,opcode:r.CPX,mode:n.IMM,cycle:2,extra:!1},{op:225,opcode:r.SBC,mode:n.IZX,cycle:6,extra:!1},{op:226,opcode:r.NOP,mode:n.IMM,cycle:2,extra:!1},{op:227,opcode:r.ISC,mode:n.IZX,cycle:8,extra:!1},{op:228,opcode:r.CPX,mode:n.ZP,cycle:3,extra:!1},{op:229,opcode:r.SBC,mode:n.ZP,cycle:3,extra:!1},{op:230,opcode:r.INC,mode:n.ZP,cycle:5,extra:!1},{op:231,opcode:r.ISC,mode:n.ZP,cycle:5,extra:!1},{op:232,opcode:r.INX,mode:n.IMP,cycle:2,extra:!1},{op:233,opcode:r.SBC,mode:n.IMM,cycle:2,extra:!1},{op:234,opcode:r.NOP,mode:n.IMP,cycle:2,extra:!1},{op:235,opcode:r.SBC,mode:n.IMM,cycle:2,extra:!1},{op:236,opcode:r.CPX,mode:n.ABS,cycle:4,extra:!1},{op:237,opcode:r.SBC,mode:n.ABS,cycle:4,extra:!1},{op:238,opcode:r.INC,mode:n.ABS,cycle:6,extra:!1},{op:239,opcode:r.ISC,mode:n.ABS,cycle:6,extra:!1},{op:240,opcode:r.BEQ,mode:n.REL,cycle:2,extra:!0},{op:241,opcode:r.SBC,mode:n.IZY,cycle:5,extra:!0},{op:242,opcode:r.KIL,mode:n.IMP,cycle:0,extra:!1},{op:243,opcode:r.ISC,mode:n.IZY,cycle:8,extra:!1},{op:244,opcode:r.NOP,mode:n.ZPX,cycle:4,extra:!1},{op:245,opcode:r.SBC,mode:n.ZPX,cycle:4,extra:!1},{op:246,opcode:r.INC,mode:n.ZPX,cycle:6,extra:!1},{op:247,opcode:r.ISC,mode:n.ZPX,cycle:6,extra:!1},{op:248,opcode:r.SED,mode:n.IMP,cycle:2,extra:!1},{op:249,opcode:r.SBC,mode:n.ABY,cycle:4,extra:!0},{op:250,opcode:r.NOP,mode:n.IMP,cycle:2,extra:!1},{op:251,opcode:r.ISC,mode:n.ABY,cycle:7,extra:!1},{op:252,opcode:r.NOP,mode:n.ABX,cycle:4,extra:!0},{op:253,opcode:r.SBC,mode:n.ABX,cycle:4,extra:!0},{op:254,opcode:r.INC,mode:n.ABX,cycle:7,extra:!1},{op:255,opcode:r.ISC,mode:n.ABX,cycle:7,extra:!1}]},835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogBuffer=t.ConsoleLogSink=t.Logger=void 0;class n{sink;prefix;constructor(e,t){this.sink=e,this.prefix=t}log(e){this.sink.log(`${this.prefix}: ${e}`)}newLogger(e){return new n(this.sink,e)}setPrefix(e){this.prefix=e}}t.Logger=n,t.ConsoleLogSink=class{log(e){console.log(e)}},t.LogBuffer=class{buf=new Array;log(e){this.buf.push(e)}get(){return this.buf}clear(){this.buf.length=0}}},983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cartridge=void 0;const r=n(769);class i{p;data;constructor(e){this.p=0,this.data=e}read(){return this.data[this.p++]}expect(e){const t=this.read();if(t!=e)throw new Error(`data[${this.p-1}] = ${t}, want ${e}`)}readArray(e){const t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=this.read();return t}isEOF(){return this.data.length===this.p}assertEOF(){if(!this.isEOF())throw new Error(`EOF is not reached data.length = ${this.data.length} p = ${this.p}`)}}class o{header;trainer;prgROM;chrROM;chrRAM;constructor(e,t,n,r,i){this.header=e,this.trainer=t,this.prgROM=n,this.chrROM=r,this.chrRAM=i}readCHR(e){return this.chrROM.length?(r.assertInRange(e,0,this.chrROM.length),this.chrROM[e]):(r.assertInRange(e,0,this.chrRAM.length),this.chrRAM[e])}writeCHR(e,t){r.assertUint8(t),this.header.chrROMSize||(r.assertInRange(e,0,this.chrRAM.length),this.chrRAM[e]=t)}static parseINES(e){const t=new i(e),n=function(e){e.expect(78),e.expect(69),e.expect(83),e.expect(26);const t=16*e.read()*1024,n=8*e.read()*1024,i=e.read(),o=e.read(),a=e.read();e.read(),e.read(),e.read(),e.read(),e.read(),e.read(),e.read();const s=r.hasBit(i,0),u=r.hasBit(i,1),c=r.hasBit(i,2),l=r.hasBit(i,3),f=r.hasBit(o,0),h=r.hasBit(o,1),d=r.hasBit(o,3)&&!r.hasBit(o,2),p=240&o|i>>4;if(a>0)throw new Error("Not widely use option is used");if(d)throw new Error("NES 2.0 is not supported");return{prgROMSize:t,chrROMSize:n,mirroring:s,hasBatteryPackedPRGRAM:u,hasTrainer:c,ignoreMirroring:l,vsUnisystem:f,playChoice10:h,nes2format:d,mapper:p}}(t),a=t.readArray(n.hasTrainer?512:0),s=t.readArray(n.prgROMSize),u=t.readArray(n.chrROMSize),c=n.chrROMSize?new Uint8Array(0):new Uint8Array(8192);if(n.playChoice10)throw new Error("PlayChoice is not supported");return t.assertEOF(),new o(n,a,s,u,c)}}t.Cartridge=o},4:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapperFactory=void 0;const r=n(983),i=n(587),o=n(660);t.MapperFactory=class{static parseINES(e){const t=r.Cartridge.parseINES(e);switch(t.header.mapper){case 0:return new i.Mapper0(t);case 1:return new o.Mapper1(t)}throw new Error(`Mapper ${t.header.mapper} not supported`)}}},587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mapper0=void 0,t.Mapper0=class{cartridge;vram=new Uint8Array(2048);prgRAM=new Uint8Array(8192);constructor(e){this.cartridge=e}readCPU(e){if(e<16416)throw new Error(`Outside cartridge space ${e.toString(16)}`);return e<24576?0:e<32768?this.prgRAM[e-24576]:this.cartridge.prgROM[(e-32768)%this.cartridge.prgROM.length]}writeCPU(e,t){if(e<16416)throw new Error(`Outside cartridge space ${e.toString(16)}`);return e<=24575?void 0:e<=32767?void(this.prgRAM[e-24576]=t):void 0}readCHR(e){if(e<0||e>=8192)throw new Error(`Cartridge.readPPU(${e})`);return this.cartridge.readCHR(e)}writeCHR(e,t){this.cartridge.writeCHR(e,t)}nametableIndex(e){return this.cartridge.header.mirroring?2047&e:e>>1&1024|1023&e}readNametable(e){return this.vram[this.nametableIndex(e)]}writeNametable(e,t){this.vram[this.nametableIndex(e)]=t}state(){return[]}}},660:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mapper1=void 0;const r=n(769);t.Mapper1=class{cartridge;vram=new Uint8Array(2048);prgRAM=new Uint8Array(32768);constructor(e){this.cartridge=e,this.resetShiftRegister()}shiftRegister=0;resetShiftRegister(){this.shiftRegister=16}loadRegister(e,t){if(t>>7)return this.resetShiftRegister(),void this.setControl(12|this.getControl());const n=1&this.shiftRegister;this.shiftRegister=this.shiftRegister>>1|(1&t)<<4,n&&(e<=40959?this.setControl(this.shiftRegister):e<=49151?this.chrBank0=this.shiftRegister:e<=57343?this.chrBank1=this.shiftRegister:(this.prgBank=31&this.shiftRegister,this.prgRAMChipEnable=this.shiftRegister>>4),this.resetShiftRegister())}setControl(e){this.mirroring=3&e,this.prgROMBankMode=e>>2&3,this.chrROMBankMode=e>>4&1}getControl(){return this.chrROMBankMode<<4|this.prgROMBankMode<<2|this.mirroring}mirroring=0;prgROMBankMode=0;chrROMBankMode=0;chrBank0=0;chrBank1=0;prgBank=0;prgRAMChipEnable=0;readCPU(e){if(e<24576)return 0;if(e<=32767)return this.prgRAM[e-24576];{const t=e-32768,n=this.cartridge.prgROM;switch(this.prgROMBankMode){case 0:case 1:return n[32768*(this.prgBank>>1)+t];case 2:return t<16384?n[t]:n[16384*this.prgBank+(t-16384)];case 3:return t<16384?n[16384*this.prgBank+t]:n[n.length-32768+t]}throw new Error(`BUG $${e.toString(16)} ${this.prgROMBankMode}`)}}writeCPU(e,t){e<24576||(e<=32767?this.prgRAM[e-24576]=t:this.loadRegister(e,t))}chrROMIndex(e){return 0===this.chrROMBankMode?8192*(this.chrBank0>>1)+e:e<4096?4096*this.chrBank0+e:4096*this.chrBank1+(e-4096)}readCHR(e){return r.assertInRange(e,0,8191),this.cartridge.readCHR(this.chrROMIndex(e))}writeCHR(e,t){r.assertInRange(e,0,8191),this.cartridge.writeCHR(this.chrROMIndex(e),t)}nametableIndex(e){switch(this.mirroring){case 0:return 1023&e;case 1:return 1024+(1023&e);case 2:return 2047&e;case 3:return e>>1&1024|1023&e}throw new Error(`BUG: mirroring=${this.mirroring}`)}readNametable(e){r.assertInRange(e,8192,12287);const t=this.nametableIndex(e);return r.assertInRange(t,0,2048),this.vram[t]}writeNametable(e,t){r.assertInRange(e,8192,12287),r.assertUint8(t);const n=this.nametableIndex(e);r.assertInRange(n,0,2048),this.vram[n]=t}state(){return[["mirroring",""+this.mirroring],["prgROMBankMode",""+this.prgROMBankMode],["chrROMBankMode",""+this.chrROMBankMode],["chrBank0",""+this.chrBank0],["chrBank1",""+this.chrBank1],["prgBank",""+this.prgBank],["prgRAMChipEnable",""+this.prgRAMChipEnable]]}}},267:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NES=void 0;const r=n(453),i=n(435),o=n(161),a=n(79),s=n(323),u=n(784),c=n(4);class l{mapper;controller;apu;ppu;cpu;cycleCount=0;nextAudioSampleCount=0;audioSampleBuffer=new u.AudioEventDeque;audioSampleRate;constructor(e){this.mapper=e,this.audioSampleRate="undefined"==typeof AudioContext?44100:(new AudioContext).sampleRate,this.controller=new s.Controller;const t=new a.NMI;this.apu=new o.APU(this.mapper),this.ppu=new r.PPU(this.mapper,t),this.cpu=new i.CPU(this.mapper,this.ppu,t,this.controller,this.apu)}static fromCartridgeData(e){return new l(c.MapperFactory.parseINES(e))}play(e){const t=Math.round(e/.0005587300735903379);try{this.step(t)}catch(e){if(!(e instanceof i.CPUHaltError))throw e}}step(e){for(let t=0;t<e;t++)this.tick()}tick(){this.ppu.tickPPU3(),this.cpu.tickCPU(),this.apu.tickAPU(),this.cycleCount++,this.nextAudioSampleCount<this.cycleCount&&(this.nextAudioSampleCount+=1789773.0000000002/this.audioSampleRate,this.audioSampleBuffer.pushBack({value:this.apu.output(),cycle:this.cycleCount}),this.audioSampleBuffer.ensureCapacity(1024))}render(e){this.ppu.render(e)}setControllerState(e,t){this.controller.setControllerData(e,t)}tones=[261,293,329,349,391,440,493,523];index=0;prevTimeSecond=-1;toneIndex=-2;processAudio(e){const t=e.length;let n=null;for(let r=0;r<t;r++){const t=this.audioSampleBuffer.peek();null!==t?(n=t,e[r]=t.value,this.audioSampleBuffer.pop()):n&&(e[r]=n.value)}}frame(e){const t=e??1;for(let e=0;e<t;e++){const e=this.ppu.frameCount;for(;e===this.ppu.frameCount;)this.tick()}}buffer(){return this.ppu.buffer()}resetAll(){const e=new a.NMI;this.ppu=new r.PPU(this.mapper,e),this.cpu=new i.CPU(this.mapper,this.ppu,e,this.controller,new o.APU(this.mapper)),this.setLogger(this.logger),console.clear()}stepToNextInstruction(){const e=this.cpu.instructionCount;for(;e===this.cpu.instructionCount;)this.step(1)}logger;setLogger(e){this.logger=e,this.ppu.logger=e?.newLogger("PPU"),this.cpu.logger=e?.newLogger("CPU"),this.apu.logger=e?.newLogger("APU")}}t.NES=l},769:(e,t)=>{"use strict";function n(e,t){return 1==(e>>t&1)}Object.defineProperty(t,"__esModule",{value:!0}),t.uint8Reverse=t.assertInRange=t.assertUint16=t.assertUint8=t.uint8ToSigned=t.hasBit=t.UINT16_MAX=t.UINT8_MAX=void 0,t.UINT8_MAX=255,t.UINT16_MAX=65535,t.hasBit=n,t.uint8ToSigned=function(e){return n(e,7)?-(1+(e^t.UINT8_MAX)):e},t.assertUint8=(e,n)=>{if(!(0<=e&&e<=t.UINT8_MAX))throw n&&n(),new Error(`${e} not uint8`)},t.assertUint16=e=>{if(!(0<=e&&e<=t.UINT16_MAX))throw new Error(`${e} not uint16`)},t.assertInRange=(e,t,n)=>{if(!(t<=e&&e<=n))throw new Error(`$${e.toString(16)} not in range [$${t.toString(16)}, $${n.toString(16)}]`)},t.uint8Reverse=e=>{let t=0;for(let n=0;n<8;n++)t|=(e>>n&1)<<7-n;return t}},816:(e,t)=>{"use strict";function n(e){return[255&e,e>>8&255,e>>16&255]}Object.defineProperty(t,"__esModule",{value:!0}),t.indexOf=t.sameColor=t.render=t.toRGB=t.get=t.palette=void 0,t.palette=(()=>{const e=[84,84,84,0,30,116,8,16,144,48,0,136,68,0,100,92,0,48,84,4,0,60,24,0,32,42,0,8,58,0,0,64,0,0,60,0,0,50,60,0,0,0,152,150,152,8,76,196,48,50,236,92,30,228,136,20,176,160,20,100,152,34,32,120,60,0,84,90,0,40,114,0,8,124,0,0,118,40,0,102,120,0,0,0,236,238,236,76,154,236,120,124,236,176,98,236,228,84,236,236,88,180,236,106,100,212,136,32,160,170,0,116,196,0,76,208,32,56,204,108,56,180,204,60,60,60,236,238,236,168,204,236,188,188,236,212,178,236,236,174,236,236,174,212,236,180,176,228,196,144,204,210,120,180,222,120,168,226,144,152,226,180,160,214,228,160,162,160],t=new Int32Array(64);let n=0;const r=4278190080;for(let i=0;i<4;i++)for(let o=0;o<16;o++)if(o<14){const a=e[n++],s=e[n++],u=e[n++];t[16*i+o]=r|u<<16|s<<8|a}else t[16*i+o]=r;return t})(),t.get=e=>t.palette[e],t.toRGB=n,t.render=e=>{e.width=240,e.height=60;const r=e.getContext("2d");for(let e=0;e<16;e++)for(let i=0;i<4;i++){const[o,a,s]=n(t.palette[16*i|e]);r.fillStyle=`rgb(${o},${a},${s})`,r.fillRect(15*e,15*i,15,15)}},t.sameColor=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2],t.indexOf=function(e){for(let r=0;r<64;r++)if(t.sameColor(e,n(t.palette[r])))return r;throw new Error(`Unknown color ${e}`)}},453:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.to2DPalettes=t.PPU=t.HEIGHT=t.WIDTH=void 0;const a=n(769),s=o(n(816));t.WIDTH=256,t.HEIGHT=240;class u{ctrlNMIEnable=0;ctrlSpriteHeight=0;ctrlBackgroundTileSelect=0;ctrlSpriteTileSelect=0;ctrlIncrementMode=0;setCtrl(e){const t=this.ctrlNMIEnable;this.ctrlNMIEnable=e>>7&1,this.ctrlSpriteHeight=e>>5&1,this.ctrlBackgroundTileSelect=e>>4&1,this.ctrlSpriteTileSelect=e>>3&1,this.ctrlIncrementMode=e>>2&1,this.internalT=-3073&this.internalT|(3&e)<<10,this.vblank&&this.ctrlNMIEnable>t&&this.nmi.set(),this.ctrlNMIEnable!==t&&this.logger?.log(`ctroNMIEnable <- ${this.ctrlNMIEnable}`)}colorEmphasis=0;spriteEnable=0;backgroundEnable=0;spriteLeftColumnEnable=0;backgroundLeftColumnEnable=0;grayscale=0;setMask(e){if(a.assertUint8(e),this.colorEmphasis=e>>5,this.spriteEnable=e>>4&1,this.backgroundEnable=e>>3&1,this.spriteLeftColumnEnable=e>>2&1,this.backgroundLeftColumnEnable=e>>1&1,this.grayscale=1&e,this.colorEmphasis)throw new Error("Unimplemented colorEmphasis");if(this.grayscale)throw new Error("Unimplemented grayscale")}vblank=0;spriteZeroHit=0;spriteOverflow=0;readStatus(){const e=this.vblank<<7|this.spriteZeroHit<<6|this.spriteOverflow<<5;return this.vblank=0,this.internalW=0,e}oamAddr=0;setData(e){if(this.renderingEnabled()&&this.scanline<240)throw new Error("Data write while rendering");this.bus.write(16383&this.internalV,e),this.incrementInternalV()}readData(){if(this.renderingEnabled()&&this.scanline<240)throw new Error("Data read while rendering");let e;return this.internalV<=16127?(e=this.internalReadBuffer,this.internalReadBuffer=this.bus.read(this.internalV)):(e=this.bus.read(this.internalV),this.internalReadBuffer=this.bus.read(this.internalV-4096)),this.incrementInternalV(),e}incrementInternalV(){this.internalV=this.internalV+(this.ctrlIncrementMode?32:1)&32767}internalV=0;internalT=0;internalX=0;internalW=0;patternTableData=0;paletteAttributes=0;paletteAttributesNext=0;internalReadBuffer=0;bus;scanline=-1;scanlineCycle=1;frameCount=0;nmi;logger;constructor(e,t){this.bus=new c(e),this.nmi=t}updateIndices(){if(++this.scanlineCycle>341&&(this.scanlineCycle=1,++this.scanline>260)){this.scanline=-1,this.frameCount++;const e=this.frontView;this.frontView=this.backView,this.backView=e;const t=this.frontBuffer;this.frontBuffer=this.backBuffer,this.backBuffer=t}}coarseXIncrement(){if(!(this.scanline<=239&&0==(7&this.scanlineCycle)&&(this.scanlineCycle>=8&&this.scanlineCycle<=256||this.scanlineCycle>=328&&this.scanlineCycle<=336)))throw new Error(`inc hori(v) at (${this.scanline}, ${this.scanlineCycle})`);31==(31&this.internalV)?(this.internalV&=-32,this.internalV^=1024):this.internalV+=1}yIncrement(){if(!(this.scanline<=239&&256===this.scanlineCycle))throw new Error(`inc ver(v) at (${this.scanline}, ${this.scanlineCycle})`);if(28672!=(28672&this.internalV))this.internalV+=4096;else{this.internalV&=-28673;let e=(992&this.internalV)>>5;29===e?(e=0,this.internalV^=2048):31===e?e=0:e+=1,this.internalV=-993&this.internalV|e<<5}}renderingEnabled(){return!(!this.backgroundEnable&&!this.spriteEnable)}patternByteLatch=0;paletteAttributesNextLatch=0;fetchTileData(){const e=this.internalV,t=e>>12,n=8192|4095&e,r=this.bus.mapper.readNametable(n),i=this.bus.mapper.readCHR(this.ctrlBackgroundTileSelect<<12|r<<4|0|t),o=this.bus.mapper.readCHR(this.ctrlBackgroundTileSelect<<12|r<<4|8|t)<<1;let a=0;for(let e=0;e<8;e++)a|=(i>>e&1|o>>e&2)<<(7-e<<1);this.patternByteLatch=a;const s=9152|3072&e|e>>4&56|e>>2&7,u=this.bus.mapper.readNametable(s);this.paletteAttributesNextLatch=u>>(e>>4&4|2&e)&3}reloadShifters(){this.patternTableData|=this.patternByteLatch<<16,this.paletteAttributesNext=this.paletteAttributesNextLatch}tickPPU3(){for(let e=0;e<3;e++){if(this.updateIndices(),this.scanlineCycle>=337)continue;const e=this.scanlineCycle,t=this.scanline;if(this.scanline>=240){241===t&&1===e&&(this.vblank=1,this.ctrlNMIEnable&&this.nmi.set());continue}let n=-1;if(this.renderingEnabled())if(e>=327||e<=256){switch(7&e){case 0:256===e?this.yIncrement():this.coarseXIncrement();break;case 1:this.reloadShifters();break;case 7:this.fetchTileData()}if(327!==e&&328!==e){if(e<=256){const e=this.patternTableData>>>(this.internalX<<1)&3;e>0&&(n=this.bus.backgroundPalettes[(this.paletteAttributes>>(this.internalX<<1)&3)<<2|e])}this.patternTableData>>>=2,this.paletteAttributes=this.paletteAttributesNext<<14|this.paletteAttributes>>2}}else if(257===e){const e=1055;this.internalV&=~e,this.internalV|=this.internalT&e}if(t<0){if(1===e)this.spriteOverflow=0,this.spriteZeroHit=0,this.vblank=0;else if(e>=280&&e<=304&&this.renderingEnabled()){const e=31712;this.internalV&=~e,this.internalV|=this.internalT&e}}else if(e<=256){let r=-1;this.backgroundEnable&&(e>=9||this.backgroundLeftColumnEnable)&&(r=n);const i=this.spriteLineBuffer[e-1];if(this.spriteEnable&&i>=0){const e=63&i,t=i>>6&1,n=i>>7&1;r>=0&&n&&(this.spriteZeroHit=1),0!==t&&-1!==r||(r=e)}-1===r&&(r=this.bus.universalBackgroundColor),this.putPixel(e-1,t,r)}else 261===e&&this.spriteLine(this.scanline)}}frontBuffer=new ArrayBuffer(t.WIDTH*t.HEIGHT*4);backBuffer=new ArrayBuffer(t.WIDTH*t.HEIGHT*4);frontView=new Int32Array(this.frontBuffer);backView=new Int32Array(this.backBuffer);putPixel(e,t,n){this.backView[t<<8|e]=s.palette[n]}spriteLineBuffer=new Int32Array(t.WIDTH);spriteLine(e){for(let e=0;e<256;e++)this.spriteLineBuffer[e]=-1;let n=0;const r=this.ctrlSpriteHeight?16:8;for(let i=0;i<256;i+=4){const o=this.bus.oam[i];if(e<o||e>=o+r)continue;if(8==n++)return void(this.spriteOverflow=1);const a=this.bus.oam[i+1],s=this.bus.oam[i+2],u=this.bus.oam[i+3],c=3&s,l=this.bus.spritePalettes[c],f=s>>5&1,h=s>>6&1,d=s>>7&1;for(let n=0;n<8&&u+n<t.WIDTH;n++){if(this.spriteLineBuffer[u+n]>=0||!this.spriteLeftColumnEnable&&u+n<8)continue;const t=e-o,s=h?7-n:n,c=d?r-1-t:t;let p;if(0===this.ctrlSpriteHeight)p=this.patternValue(this.ctrlSpriteTileSelect,a,s,c);else{const e=1&a,t=c<8?-2&a:1|a;p=this.patternValue(e,t,s,7&c)}0!==p&&(this.spriteLineBuffer[u+n]=l[p-1]|f<<6|(0===i?1:0)<<7)}}}patternValue(e,n,r,i){if(e<0||e>1||n<0||n>=256||r<0||r>=t.WIDTH||i<0||i>=t.HEIGHT)throw new Error("BUG: patternValue");return(this.bus.mapper.readCHR(e<<12|n<<4|8|7&i)>>7-(7&r)&1)<<1|this.bus.mapper.readCHR(e<<12|n<<4|0|7&i)>>7-(7&r)&1}render(e){const n=new ImageData(this.buffer(),t.WIDTH,t.HEIGHT);e.putImageData(n,0,0)}buffer(){return new Uint8ClampedArray(this.frontBuffer)}readCPU(e){if(void 0===this.internalV)throw new Error("this.internalV === undefined");switch(7&e){case 0:case 1:return 0;case 2:return this.readStatus();case 3:return 0;case 4:return this.bus.oam[this.oamAddr];case 5:case 6:return 0;case 7:return this.readData()}throw new Error("Impossible")}writeCPU(e,t){if(a.assertUint8(t),e<8192||e>16383)throw new Error(`Out of range PPC.writeCPU(${e}, ${t})`);switch(7&e){case 0:return void this.setCtrl(t);case 1:return void this.setMask(t);case 2:return;case 3:return void(this.oamAddr=t);case 4:if(this.scanline<240)return;return this.bus.oam[this.oamAddr]=t,void(this.oamAddr=this.oamAddr+1&255);case 5:return void(0===this.internalW?(this.internalT=-32&this.internalT|t>>3,this.internalX=7&t,this.internalW=1):(this.internalT&=-29665,this.internalT|=(7&t)<<12|t>>3<<5,this.internalW=0));case 6:return void(0===this.internalW?(this.internalT&=-32513,this.internalT|=(63&t)<<8,this.internalW=1):(this.internalT&=-256,this.internalT|=t,this.internalV=this.internalT,this.internalW=0));case 7:return void this.setData(t)}throw new Error(`Unsupported PPU.writeCPU(0x${e.toString(16)}, ${t})`)}sendDMA(e){for(let t=0;t<256;t++)this.bus.oam[t+this.oamAddr&255]=e[t]}coarseX(){return 31&this.internalV}coarseY(){return this.internalV>>5&31}nametableSelect(){return this.internalV>>10&3}fineX(){return this.internalX}fineY(){return this.internalV>>12}renderNametableBuffer=new Uint8ClampedArray(t.HEIGHT*t.WIDTH*4*4);renderNametable(e){e.width=2*t.WIDTH,e.height=2*t.HEIGHT;const n=e.getContext("2d");if(!n)return;const r=(1&this.nametableSelect())*t.WIDTH+8*this.coarseX()+this.fineX(),i=(this.nametableSelect()>>1)*t.HEIGHT+8*this.coarseY()+this.fineY();for(let e=0;e<4;e++)for(let n=0;n<t.HEIGHT;n++)for(let o=0;o<t.WIDTH;o++){const u=o>>3|n>>3<<5,c=this.bus.mapper.readNametable(8192+1024*e+u),l=this.patternValue(this.ctrlBackgroundTileSelect,c,o,n);let f;if(a.assertInRange(l,0,3),0===l)f=this.bus.universalBackgroundColor;else{const t=n>>5<<3|o>>5,r=this.bus.mapper.readNametable(8192+1024*e|960+t)>>((n>>4&1)<<1<<1|(o>>4&1)<<1)&3;f=this.bus.backgroundPalettes[4*r+l]}const h=s.get(f);let d=[255&h,h>>8&255,h>>16&255];const p=o+(1&e)*t.WIDTH,m=n+(e>>1)*t.HEIGHT;Math.abs(p-r)+Math.abs(m-i)<=1&&(d=[255,0,0]);for(let e=0;e<4;e++)this.renderNametableBuffer[4*(2*m*t.WIDTH+p)+e]=3===e?255:d[e]}const o=new ImageData(this.renderNametableBuffer,2*t.WIDTH,2*t.HEIGHT);n.putImageData(o,0,0)}getNametableTileInfo(e,t){const n=Math.floor(e/32)+2*Math.floor(t/30),r=[e%32,t%30],i=8192+1024*n+(r[0]+32*r[1]),o=this.bus.read(i),a=4096*this.ctrlBackgroundTileSelect+16*o,s=8192+1024*n+960+Math.floor(r[0]/4)+8*Math.floor(r[1]/4),u=this.bus.read(s),[c,l]=[Math.floor(r[0]%4/2),Math.floor(r[1]%4/2)];return{addr:i,nameTable:n,location:r,tileIndex:o,tileAddr:a,attributeData:u,attributeAddr:s,paletteAddr:16129+4*(u>>2*(c+2*l)&3)}}renderCharacters(e){e.setAttribute("width","512"),e.setAttribute("height","256");const t=e.getContext("2d");if(t)for(let e=0;e<2;e++)for(let n=0;n<16;n++)for(let r=0;r<16;r++)for(let i=0;i<8;i++){const o=this.bus.mapper.readCHR(e<<12|n<<8|r<<4|i),a=this.bus.mapper.readCHR(e<<12|n<<8|r<<4|8|i);for(let s=0;s<8;s++){const u=80*(3-((a>>7-s&1)<<1|o>>7-s&1));t.fillStyle=`rgb(${u},${u},${u})`,t.fillRect(2*(16*e*8+8*r+s),2*(8*n+i),2,2)}}}static registerNames=new Map([[8192,"PPUCTRL"],[8193,"PPUMASK"],[8194,"PPUSTATUS"],[8195,"OAMADDR"],[8196,"OAMDATA"],[8197,"PPUSCROLL"],[8198,"PPUADDR"],[8199,"PPUDATA"],[16404,"OAMDMA"]])}t.PPU=u;class c{mapper;universalBackgroundColor=9;backgroundPalettes=new Int8Array([-1,1,0,1,-1,2,2,13,-1,16,8,36,-1,0,4,44]);spritePalettes=[[1,52,3],[4,0,20],[58,0,2],[32,44,8]];unusedData=[0,8,0];oam=new Int16Array(256);constructor(e){this.mapper=e,this.oam.fill(0);for(let e=0;e<4;e++)this.backgroundPalettes[4*e]=-1}read(e){if(a.assertInRange(e,0,16383),e<=8191)return this.mapper.readCHR(e);if(e<=16127){let t=e;return t>=12288&&(t-=4096),this.mapper.readNametable(t)}{let t=31&e;if(16!==t&&20!==t&&24!==t&&28!==t||(t-=16),0===t)return this.universalBackgroundColor;if(0==(3&t))return this.unusedData[t-4>>2];const n=t>>2,r=3&t;return n<4?this.backgroundPalettes[4*n+r]:this.spritePalettes[n-4][r-1]}}write(e,t){if(a.assertInRange(e,0,16383),a.assertUint8(t),e<=8191)this.mapper.writeCHR(e,t);else{if(e<=16127){let n=e;return n>=12288&&(n-=4096),void this.mapper.writeNametable(n,t)}{let n=31&e;if(16!==n&&20!==n&&24!==n&&28!==n||(n-=16),0===n)return void(this.universalBackgroundColor=63&t);if(0==(3&n))return void(this.unusedData[n-4>>2]=63&t);const r=n>>2;r<4?this.backgroundPalettes[4*r+(3&n)]=63&t:this.spritePalettes[r-4][(3&n)-1]=63&t}}}}t.to2DPalettes=function(e){const t=new Array;for(let n=0;n<4;n++){t.push([0,0,0]);for(let r=0;r<3;r++)t[n][r]=e[4*n+1+r]}return t}},555:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.devInit=t.initOnce=void 0;const i=r(n(503));n(705);const o={storageBucket:"tsnes-324212.appspot.com"};let a;function s(){i.default.initializeApp(o),i.default.storage().useEmulator("localhost",9199),console.log("firebase.storage() now use emulator")}t.initOnce=function(e){if(void 0===a)a=e,e?s():i.default.initializeApp({...o,apiKey:"AIzaSyBkwlf9s468l_DjAtlpgGnWUVZK4ub_dp0",authDomain:"tsnes-324212.firebaseapp.com",projectId:"tsnes-324212",messagingSenderId:"759252247703",appId:"1:759252247703:web:550805e63288ee8274f5d2",measurementId:"G-4JDYDDZCKK"});else if(a!=e)throw new Error(`unexpected dev = ${e}`)},t.devInit=s},236:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=o(n(294)),u=a(n(503));n(705),n(140),o(n(555)).initOnce(!1);const c=e=>s.default.createElement("ul",null,e.items.map((t=>s.default.createElement("li",{key:t,onClick:()=>e.onClick(t)},t))));function l(e){const{src:t,status:n,onMarkAsCorrect:r}=e,[i,o]=s.useState(!1),a=s.default.createElement("img",{width:i?264:136,src:t,onClick:()=>{o(!i)},style:{padding:4,backgroundColor:"correct"===n?"lightgreen":"wrong"===n?"#FF7F7F":void 0}}),u="mark as "+("correct"===n?"unknown":"correct"),l=s.default.createElement(c,{items:["open",u],onClick:e=>{switch(e){case"open":open(t);break;case u:r("correct"!==n)}o(!1)}});return s.default.createElement("div",null,a,i?l:null)}const f=e=>{const t=new Map;for(const[n,r]of Object.entries(e.results))for(const[e,i]of Object.entries(r))["id","timestamp"].includes(e)||(t.has(e)||t.set(e,new Map),t.get(e)?.set(n,{url:i.url,sha1:i.imageSHA1}));const n=Object.keys(e.results).sort().reverse(),r=new Array(...t.keys()).sort(),i=s.default.createElement("tr",null,s.default.createElement("th",null),n.map((e=>{const{timestamp:t,hash:n}=function(e){const[t,...n]=e.split("-");return{timestamp:new Date(1e3*parseInt(t)),hash:n.join("-")}}(e);return s.default.createElement("th",{key:n,title:t.toString()},s.default.createElement("div",{style:{width:128,overflowWrap:"break-word"}},n))}))),o=r.map((r=>s.default.createElement("tr",{key:r},s.default.createElement("td",null,s.default.createElement("div",{style:{width:192,overflowWrap:"break-word"}},(()=>{const[e,...t]=r.split(":");return s.default.createElement(s.default.Fragment,null,s.default.createElement("p",null,s.default.createElement("a",{href:"https://github.com/christopherpow/nes-test-roms/tree/master/"+e},e)),s.default.createElement("p",null,t[t.length-1]))})())),n.map((n=>{const i=t.get(r)?.get(n);if(!i||!i.sha1||!i.url)return s.default.createElement("td",{key:n});const o=e.answers[r],a=o?o===i.sha1?"correct":"wrong":"unknown";return s.default.createElement("td",{key:n},s.default.createElement(l,{src:i.url,status:a,onMarkAsCorrect:t=>{e.onMarkAs(r,i.sha1,t)}}))})))));return s.default.createElement("table",null,s.default.createElement("thead",null,i),s.default.createElement("tbody",null,o))},h=()=>{const[e,t]=s.useState({}),[n,r]=s.useState({});return s.useEffect((()=>{(async function(){const e=await u.default.firestore().collection("results").orderBy("id","desc").limit(5).get(),n={};e.forEach((e=>{n[e.id]=e.data()})),t(n);const i=(await u.default.firestore().collection("answers").doc("sha1").get()).data();if(i){const e={};for(const[t,n]of Object.entries(i))e[t]=n;r((t=>Object.assign(e,t)))}})().catch(console.error)}),[]),s.default.createElement("div",null,s.default.createElement(f,{results:e,answers:n,onMarkAs:(e,t,n)=>{(async function(){if(console.log(`onMarkAs(${e}, ${n})`),n)return await u.default.firestore().collection("answers").doc("sha1").set({[e]:t},{merge:!0}),void r((n=>{const r=Object.assign({},n);return r[e]=t,r}));await u.default.firestore().collection("answers").doc("sha1").update(new u.default.firestore.FieldPath(e),u.default.firestore.FieldValue.delete()),console.log(`onMarkAs(${e}, ${n})`),r((t=>{const n=Object.assign({},t);return delete n[e],n}))})().catch(console.error)}}))};t.App=()=>s.default.createElement("div",null,s.default.createElement(h,null))},351:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DB=void 0;const a=o(n(29));class s{db;constructor(e){this.db=e}static async open(e){const t=await a.openDB(e,2,{upgrade(e){e.createObjectStore("keyval")}});return new s(t)}async get(){return await this.db.get("keyval","dummy")}async set(e){await this.db.put("keyval",e,"dummy")}}t.DB=s},561:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBanner=t.DebugGame=void 0;const a=o(n(294)),s=o(n(816)),u=o(n(453)),c=n(835),l=(e,t)=>a.default.createElement("div",null,a.default.createElement("label",null,a.default.createElement("strong",null,e)),t),f=e=>{const{apu:t}=e;return l("APU",a.default.createElement("div",null,a.default.createElement("table",null,a.default.createElement("tbody",null,[["DMC.irqEnabled",""+t.dmc.irqEnabled],["DMC.loop",""+t.dmc.loop],["DMC.rateIndex",""+t.dmc.rateIndex],["DMC.outputLevel",""+t.dmc.outputLevel],["DMC.sampleAddress","$"+t.dmc.sampleAddress.toString(16).toUpperCase()],["DMC.sampleLength",""+t.dmc.sampleLength],["DMC.readBytesRemaining",""+t.dmc.readBytesRemaining],["DMC.interruptFlag",""+t.dmc.interruptFlag],["DMC.outputSilence",""+t.dmc.outputSilence],["DMC.sampleBuffer",""+t.dmc.sampleBuffer]].map((([e,t],n)=>a.default.createElement(v,{key:n,row:[e,t]})))))))},h=e=>{const[t,n,r]=s.toRGB(e.color);return a.default.createElement("div",{style:{backgroundColor:`rgb(${t}, ${n}, ${r})`,height:10,width:10}})},d=e=>{const t=e.palette.map(((e,t)=>a.default.createElement(h,{key:t,color:s.get(e)})));return a.default.createElement("div",{style:{display:"flex",marginLeft:2}},t)},p=e=>{const t=e.palettes.map(((e,t)=>a.default.createElement(d,{key:t,palette:e})));return a.default.createElement("div",{style:{display:"flex"}},t)},m=e=>a.default.createElement("div",{style:{display:"flex"}},a.default.createElement(h,{color:s.get(e.universal)}),a.default.createElement(p,{palettes:e.bg}),a.default.createElement(p,{palettes:e.sprite})),y=e=>{const t=e.oam,n=[];for(let e=0;e<t.length;e+=4){const r=t[e],i=t[e+1],o=t[e+2],s=t[e+3];n.push(a.default.createElement("tr",{key:e/4},a.default.createElement("td",null,e/4),a.default.createElement("td",null,s),a.default.createElement("td",null,r),a.default.createElement("td",null,i),a.default.createElement("td",null,o)))}return a.default.createElement(a.default.Fragment,null,a.default.createElement("strong",null,"OAM"),a.default.createElement("div",{style:{overflow:"scroll",height:500,width:200}},a.default.createElement("table",null,a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",null,"index"),a.default.createElement("th",null,"x"),a.default.createElement("th",null,"y"),a.default.createElement("th",null,"tile"),a.default.createElement("th",null,"attr"))),a.default.createElement("tbody",null,n))))},g=e=>{const t=e.radix??10,n=16===t?"$":2===t?"b":"";return a.default.createElement("tr",null,a.default.createElement("td",null,e.name),a.default.createElement("td",{width:"60px"},n+e.value.toString(t).toUpperCase()))},v=e=>a.default.createElement("tr",null,e.row.map(((t,n)=>a.default.createElement("td",{key:n,style:{minWidth:e.width}},t)))),b=e=>{const{ppu:t}=e,n=a.useRef(null),[r,i]=a.useState([0,0]),[o,s]=a.useState(!1),u=t.getNametableTileInfo(r[0],r[1]);return a.useEffect((()=>{if(!n.current)return;const e=n.current;t.renderNametable(e);const i=e.getContext("2d");if(!i)return;i.strokeStyle="red";const[o,a]=r;i.strokeRect(8*o+1,8*a+1,8,8)}),[t,r]),a.useEffect((()=>{if(!o)return;const e=e=>{const t="asdw".indexOf(e.key);if(t<0)return;const n=[0,1,0,-1],r=[-1,0,1,0];i((([e,i])=>((e+=r[t])<0&&(e=0),e>=64&&(e=63),(i+=n[t])<0&&(i=0),i>=60&&(i=59),[e,i])))};return document.addEventListener("keypress",e),()=>{document.removeEventListener("keypress",e)}}),[o]),a.default.createElement("div",{style:{display:"flex"}},a.default.createElement("canvas",{tabIndex:0,ref:n,onFocus:()=>s(!0),onBlur:()=>s(!1)}),a.default.createElement("div",null,a.default.createElement("table",null,a.default.createElement("tbody",null,[["PPU Addr",u.addr.toString(16).toUpperCase()],["Name Table",u.nameTable+""],["Location",u.location.join(", ")],["Tile Index",u.tileIndex.toString(16).toUpperCase()],["Tile Addr",u.tileAddr.toString(16).toUpperCase()],["Attribute Data",u.attributeData.toString(16).toUpperCase()],["Attribute Addr",u.attributeAddr.toString(16).toUpperCase()],["Palette Addr",u.paletteAddr.toString(16).toUpperCase()]].map(((e,t)=>a.default.createElement(v,{key:t,row:e,width:120})))))))},w=e=>{const{ppu:t}=e,n=a.useRef(null),r=a.useRef(null);a.useEffect((()=>{const e=n.current;e&&t.renderCharacters(e)})),a.useEffect((()=>{const e=r.current;e&&s.render(e)}),[]);const i=[["frame",t.frameCount],["scanline",t.scanline],["scanlineCycle",t.scanlineCycle],["coarseX",t.coarseX()],["coarseY",t.coarseY()],["nametableSelect [$2000@0-1]",t.nametableSelect()],["fineX",t.fineX()],["fineY",t.fineY()],["ctrlNMIEnable [$2000@7]",t.ctrlNMIEnable],["ctrlSpriteHeight [$2000@5]",t.ctrlSpriteHeight],["ctrlBackgroundTileSelect [$2000@4]",t.ctrlBackgroundTileSelect],["ctrlSpriteTileSelect [$2000@3]",t.ctrlSpriteTileSelect],["ctrlIncrementMode [$2000@2]",t.ctrlIncrementMode],["colorEmphasis [$2001@5-7]",t.colorEmphasis,2],["spriteEnable [$2001@4]",t.spriteEnable],["backgroundEnable [$2001@3]",t.backgroundEnable],["spriteLeftColumnEnable [$2001@2]",t.spriteLeftColumnEnable],["backgroundLeftColumnEnable [$2001@1]",t.backgroundLeftColumnEnable],["grayscale [$2001@0]",t.grayscale],["vblank [$2002@7]",t.vblank],["spriteZeroHit [$2002@6]",t.spriteZeroHit],["spriteOverflow [$2002@5]",t.spriteOverflow],["oamAddr",t.oamAddr,16]].map(((e,t)=>{const n=e[0],r=e[1],i=e[2];return a.default.createElement(g,{key:t,name:n,value:r,radix:i})})),o=a.default.createElement("table",null,a.default.createElement("tbody",null,i));return a.default.createElement("div",null,a.default.createElement("div",{style:{display:"flex"}},a.default.createElement("span",null,o),a.default.createElement("span",null,a.default.createElement(y,{oam:t.bus.oam}))),a.default.createElement(m,{universal:t.bus.universalBackgroundColor,bg:u.to2DPalettes(t.bus.backgroundPalettes),sprite:t.bus.spritePalettes}),a.default.createElement("div",{style:{marginTop:"1px"}},a.default.createElement(b,{ppu:t})),a.default.createElement("canvas",{ref:n}),a.default.createElement("canvas",{ref:r}))},_=e=>{const t=e.cpu,n=t.disasm(10),r=a.default.createElement("div",{style:{width:"200px"}},a.default.createElement("table",null,a.default.createElement("tbody",null,n.map((([e,n],r)=>a.default.createElement("tr",{key:r,style:{backgroundColor:e===t.PC?"lightyellow":void 0}},a.default.createElement("td",null,e.toString(16).toUpperCase()),a.default.createElement("td",null,n)))))));return l("CPU",a.default.createElement("div",null,a.default.createElement("table",{style:{marginBottom:"2px"}},a.default.createElement("tbody",null,[["PC","0x"+t.PC.toString(16).toUpperCase()],["A","0x"+t.A.toString(16).toUpperCase()],["X","0x"+t.X.toString(16).toUpperCase()],["Y","0x"+t.Y.toString(16).toUpperCase()],["P","0b"+t.getP().toString(2)],["S","0x"+t.S.toString(16).toUpperCase()],["CYC",""+t.cycle],["INSTR",""+t.instructionCount]].map((([e,t],n)=>a.default.createElement(v,{key:n,row:[e,t]}))))),r))},E=e=>{const n=a.useRef(null),[r,i]=a.useState(0),[o,s]=a.useState(null),[u,c]=a.useState(1),[l,f]=a.useState(1),[h,d]=a.useState(1),p=a.useCallback((()=>{const t=n.current?.getContext("2d");t&&e.nes.render(t)}),[e.nes]);a.useEffect((()=>{p()}),[p,e.nes]),a.useEffect((()=>{e.nes.setControllerState(1,r)}),[r,e.nes]);const m=["A","B","SELECT","START","UP","DOWN","LEFT","RIGHT"].map(((e,t)=>a.default.createElement("div",{key:t},a.default.createElement("input",{type:"checkbox",value:r>>t&1,onChange:e=>{i((n=>n&~(1<<t)|(e.target.checked?1<<t:0)))}}),e)));return a.default.createElement("div",null,a.default.createElement("div",null,a.default.createElement(t.ErrorBanner,{error:o}),a.default.createElement("div",null,a.default.createElement("button",{onClick:()=>{s(null),e.onReset()}},"reset")),a.default.createElement("div",null,a.default.createElement("button",{onClick:()=>{try{for(let t=0;t<u;t++)e.nes.tick()}catch(e){s(e)}p(),e.onChange()}},"cycle"),a.default.createElement("input",{min:"1",type:"number",value:u||"",onChange:e=>{""===e.target.value&&c(0),c(parseInt(e.target.value))}})),a.default.createElement("div",null,a.default.createElement("button",{onClick:()=>{try{for(let t=0;t<l;t++)e.nes.stepToNextInstruction()}catch(e){s(e)}p(),e.onChange()}},"step"),a.default.createElement("input",{min:"1",type:"number",value:l||"",onChange:e=>{""===e.target.value&&f(0),f(parseInt(e.target.value))}})),a.default.createElement("div",null,a.default.createElement("button",{onClick:()=>{try{e.nes.frame(h)}catch(e){s(e)}p(),e.onChange()}},"frame"),a.default.createElement("input",{min:"1",type:"number",value:h||"",onChange:e=>{""===e.target.value&&d(0),d(parseInt(e.target.value))}})),a.default.createElement("div",null,m)),a.default.createElement("div",null,a.default.createElement("canvas",{ref:n,width:"256",height:"240"})))},S=e=>l("Mapper",a.default.createElement("table",null,a.default.createElement("tbody",null,e.mapper.state().map((([e,t],n)=>a.default.createElement(v,{key:n,row:[e,t]})))))),I=e=>l("Cartridge",a.default.createElement("table",null,a.default.createElement("tbody",null,[["Mapper",e.cartridge.header.mapper.toString(10)],["chrROMSize","0x"+e.cartridge.header.chrROMSize.toString(16)],["mirroring",""+e.cartridge.header.mirroring],["hasBatteryPackedPRGRAM",""+e.cartridge.header.hasBatteryPackedPRGRAM],["prgROMSize",e.cartridge.header.prgROMSize/1024+"K"]].map((([e,t],n)=>a.default.createElement(v,{key:n,row:[e,t]}))))));t.DebugGame=e=>{const[,t]=a.useState(0);return a.useEffect((()=>(e.nes.setLogger(new c.Logger(new c.ConsoleLogSink,"NES")),()=>{e.nes.setLogger(void 0)})),[e.nes]),a.default.createElement("div",{style:{display:"flex"}},a.default.createElement(E,{nes:e.nes,onChange:()=>t((e=>e+1)),onReset:e.onReset}),a.default.createElement("div",null,a.default.createElement(I,{cartridge:e.nes.mapper.cartridge}),a.default.createElement(S,{mapper:e.nes.mapper}),a.default.createElement(f,{apu:e.nes.apu}),a.default.createElement(_,{cpu:e.nes.cpu})),a.default.createElement(w,{ppu:e.nes.ppu}))},t.ErrorBanner=e=>e.error?(console.log("error!!!!!!!!!!!!!!!!!!!!"),console.error(e.error),a.default.createElement("div",{style:{color:"red"}},a.default.createElement("label",null,e.error.message),a.default.createElement("div",null,e.error.stack))):null},271:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const a=o(n(294)),s=o(n(267)),u=n(351),c=n(561),l=e=>{const t=a.useRef(null),[n,r]=a.useState(100),[i,o]=a.useState(0);return a.useEffect((()=>{const t="kjfhwsad";let n=0;const r=r=>{const i=t.indexOf(r.key);void 0!==i&&(n|=1<<i,e.nes.setControllerState(1,n))},i=r=>{const i=t.indexOf(r.key);void 0!==i&&(n&=~(1<<i),e.nes.setControllerState(1,n))};return document.addEventListener("keydown",r),document.addEventListener("keyup",i),()=>{document.removeEventListener("keydown",r),document.removeEventListener("keyup",i),e.nes.setControllerState(1,0)}}),[e.nes]),a.useEffect((()=>{const r=t.current.getContext("2d");let i,a,s,u=0;const c=t=>{s=requestAnimationFrame(c);const l=Math.floor(t/1e3);if(void 0===i)return i=t,void(a=l);const f=t-i;i=t,e.nes.play(f*n/100),e.nes.render(r),u++,a<l&&(o(u),a=l,u=0)};return c(performance.now()),()=>{cancelAnimationFrame(s)}})),a.useEffect((()=>{const t=new AudioContext,n=t.createScriptProcessor(1024,0,1);return n.onaudioprocess=t=>{const n=t.outputBuffer.getChannelData(0);e.nes.processAudio(n)},n.connect(t.destination),()=>{n.disconnect(t.destination),n.onaudioprocess=null,t.close()}}),[e.nes]),a.default.createElement(a.default.Fragment,null,a.default.createElement("div",null,"Speed 100%",a.default.createElement("input",{type:"range",value:n,min:100,max:500,onChange:e=>{const t=parseInt(e.target.value);100<=t&&t<=500&&r(t)}}),500,"%"),a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-6"},a.default.createElement("canvas",{ref:t,width:"256",height:"240"}),a.default.createElement("label",null,"FPS = ",Math.round(10*i)/10))))},f=e=>{const{onChange:t}=e,[n,r]=a.useState([]);async function i(e){r(e);const t=await u.DB.open("history");await t.set(e)}a.useEffect((()=>{console.log("initializing history"),async function(){const e=await u.DB.open("history"),t=await e.get();void 0!==t&&r(t)}().catch((e=>{throw console.error(e),e}))}),[]),a.useEffect((()=>{(async function(){n.length>0&&t(new Uint8Array(await n[0].file.arrayBuffer()))})().catch((e=>{throw console.error(e),e}))}),[n,t]);const o=a.default.createElement("div",{style:{height:50,borderStyle:"inset"},onDrop:e=>{e.preventDefault();const t=e.dataTransfer.files[0];!async function(e,t){const r=[{name:e,file:t}].concat(n);await i(r)}(t.name,t)},onDragOver:e=>{e.preventDefault()}},"D&D NES file here"),s=a.default.createElement("select",{value:0,onChange:e=>{const t=parseInt(e.target.value),r=n.slice();i(r.splice(t,1).concat(r))}},n.map(((e,t)=>a.default.createElement("option",{value:t,key:t},e.name))));return a.default.createElement("div",null,s,o)},h=e=>{const[t,n]=a.useState((()=>!sessionStorage.getItem("noDebug")));a.useEffect((()=>{t?sessionStorage.removeItem("noDebug"):sessionStorage.setItem("noDebug","1")}),[t]);const r=t?a.default.createElement(c.DebugGame,{nes:e.nes,onReset:e.onReset}):a.default.createElement(a.default.Fragment,null,a.default.createElement(l,{nes:e.nes}),a.default.createElement(d,null));return a.default.createElement("div",null,a.default.createElement("label",null,"debug mode:",a.default.createElement("input",{name:"debugmode",type:"checkbox",checked:t,onChange:e=>{n(e.target.checked)}})),r)},d=()=>a.default.createElement("div",null,"Control:",a.default.createElement("ul",null,a.default.createElement("li",null,"A: Left"),a.default.createElement("li",null,"D: Right"),a.default.createElement("li",null,"W: Up"),a.default.createElement("li",null,"S: Down"),a.default.createElement("li",null,"K: A button"),a.default.createElement("li",null,"J: B button"),a.default.createElement("li",null,"F: SELECT"),a.default.createElement("li",null,"H: START")));t.App=()=>{const[e,t]=a.useState(null),[n,r]=a.useState(null),i=a.useCallback((e=>{t(e),r(null)}),[]);let o=null;if(!n&&e)try{r(s.NES.fromCartridgeData(e))}catch(e){console.error(e),o=a.default.createElement(c.ErrorBanner,{error:e.toString()})}return n&&(o=a.default.createElement(h,{nes:n,onReset:()=>{r(null)}})),a.default.createElement("div",null,a.default.createElement(f,{onChange:i}),o)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(629)})();